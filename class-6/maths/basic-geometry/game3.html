<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry Adventure - STEM Learn Odisha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f0f7ff;
            color: #1e293b;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo i {
            font-size: 1.8rem;
            color: #2a69ac;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-text h1 span {
            color: #38b2ac;
            font-weight: 800;
        }

        .logo-text p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 6px;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1rem;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .profile-container {
            position: relative;
        }

        .profile-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 30px;
            padding: 8px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .profile-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        .profile-dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 180px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .profile-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #f5f7fa;
        }

        .dropdown-item i {
            color: #3182ce;
            width: 20px;
        }

        /* Language Options */
        .language-options {
            position: absolute;
            top: 60px;
            right: 120px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 120px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .language-options.show {
            display: block;
        }

        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: #f5f7fa;
        }

        /* Language Switcher for Game */
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            padding: 8px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }

        .lang-btn.active {
            background: rgba(255, 255, 255, 0.25);
            color: white;
        }

        .lang-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Game Header */
        .game-header {
            background: linear-gradient(rgba(14, 42, 71, 0.85), rgba(26, 54, 93, 0.9)), url('https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 60px 0;
            text-align: center;
            position: relative;
            display: none;
        }

        .game-header h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .game-header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.95;
            font-weight: 300;
        }

        /* Game Stats */
        .game-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 1000px;
            display: none;
        }

        .timer,
        .score,
        .hints {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a365d;
        }

        .timer i { color: #e53e3e; }
        .score i { color: #38a169; }
        .hints i { color: #d69e2e; }

        .progress-container {
            width: 200px;
            height: 12px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #3182ce;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Game Area */
        .game-area {
            display: flex;
            flex-wrap: wrap;
            padding: 20px 0;
            display: none;
        }

        .crossword-container {
            flex: 2;
            min-width: 500px;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .clues-container {
            flex: 1;
            min-width: 280px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-left: 20px;
        }

        /* Geometry Game Layout */
        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .topic-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: #ebf8ff;
            color: #2b6cb0;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .topic-title-main {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1a365d;
        }

        .topic-subtitle {
            font-size: 0.9rem;
            color: #64748b;
        }

        .topic-progress {
            font-size: 0.9rem;
            color: #4a5568;
        }

        .geometry-layout {
            display: grid;
            grid-template-columns: 1.1fr 1.1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .visual-board {
            background: #f8fafc;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid #e2e8f0;
        }

        .visual-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1a365d;
        }

        .visual-area {
            background: white;
            border-radius: 10px;
            border: 1px dashed #cbd5e0;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .visual-caption {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #718096;
            text-align: center;
        }

        .question-panel {
            background: #f8fafc;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid #e2e8f0;
        }

        .question-tag {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: 999px;
            background: #edf2ff;
            color: #4c51bf;
            display: inline-block;
            margin-bottom: 8px;
        }

        .question-text {
            font-size: 1.05rem;
            margin-bottom: 12px;
            color: #1a365d;
            font-weight: 500;
        }

        .concept-label {
            font-size: 0.9rem;
            color: #718096;
            margin-bottom: 10px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }

        .option-btn {
            width: 100%;
            text-align: left;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background: white;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-btn span.option-letter {
            width: 22px;
            height: 22px;
            border-radius: 999px;
            border: 1px solid #a0aec0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: #4a5568;
        }

        .option-btn:hover {
            border-color: #3182ce;
            box-shadow: 0 0 0 2px rgba(49,130,206,0.2);
        }

        .option-btn.correct {
            border-color: #38a169;
            background: #f0fff4;
        }

        .option-btn.incorrect {
            border-color: #e53e3e;
            background: #fff5f5;
        }

        .question-footer {
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #718096;
        }

        .question-footer strong {
            color: #2b6cb0;
        }

        /* Topic Map (Right side) */
        .clues-title {
            font-size: 1.2rem;
            color: #4a6572;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid #4a6572;
        }

        .topic-card {
            background: white;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            padding: 10px 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .topic-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topic-card-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #1a365d;
        }

        .topic-card-badge {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 999px;
            background: #edf2f7;
            color: #4a5568;
        }

        .topic-card-body {
            margin-top: 4px;
            font-size: 0.8rem;
            color: #718096;
        }

        .topic-card-progress {
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
        }

        .topic-card-progress-bar {
            flex: 1;
            height: 6px;
            background: #edf2f7;
            border-radius: 999px;
            overflow: hidden;
        }

        .topic-card-progress-fill {
            height: 100%;
            background: #38b2ac;
            width: 0%;
        }

        .topic-card.active {
            border-color: #3182ce;
            box-shadow: 0 0 0 2px rgba(49,130,206,0.2);
        }

        .topic-card.completed {
            border-color: #38a169;
        }

        .topic-card.completed .topic-card-badge {
            background: #c6f6d5;
            color: #22543d;
        }

        .topic-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            padding: 15px 0 0 0;
            margin-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .control-btn-game {
            padding: 10px 20px;
            background: #3182ce;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .control-btn-game:hover {
            background: #2b6cb0;
            transform: translateY(-2px);
        }

        .control-btn-game.hint {
            background: #d69e2e;
        }

        .control-btn-game.hint:hover {
            background: #b3821e;
        }

        .control-btn-game.reset {
            background: #e53e3e;
        }

        .control-btn-game.reset:hover {
            background: #c53030;
        }

        /* Instructions Modal */
        .instructions-modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .instructions-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            text-align: center;
        }

        .instructions-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #1a365d;
            font-weight: 700;
        }

        .instructions-text {
            color: #64748b;
            margin-bottom: 25px;
            line-height: 1.6;
            text-align: left;
            font-size: 1.1rem;
        }

        .instructions-list {
            margin-left: 20px;
            margin-bottom: 25px;
        }

        .instructions-list li {
            margin-bottom: 10px;
        }

        .start-game-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #38b2ac 0%, #2c9a94 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .start-game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(56, 178, 172, 0.3);
        }

        /* Riddle Modal (reused as info disabled) */
        .riddle-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .riddle-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            text-align: center;
        }

        .riddle-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #1a365d;
            font-weight: 700;
        }

        /* Fun Fact Modal (answer explanation) */
        .funfact-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .funfact-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            text-align: center;
        }

        .funfact-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .funfact-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #1a365d;
            font-weight: 700;
        }

        .funfact-text {
            color: #64748b;
            margin-bottom: 10px;
            line-height: 1.6;
            font-size: 1.05rem;
        }

        .funfact-subtext {
            font-size: 0.9rem;
            color: #4a5568;
            margin-top: 10px;
        }

        .continue-btn {
            padding: 12px 30px;
            background: #38b2ac;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .continue-btn:hover {
            background: #2c9a94;
            transform: translateY(-2px);
        }

        /* Success Modal */
        .success-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .success-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .badge {
            font-size: 3rem;
            color: #d69e2e;
            margin-bottom: 15px;
        }

        .success-title {
            font-size: 1.8rem;
            color: #1a365d;
            margin-bottom: 15px;
        }

        .success-text {
            color: #64748b;
            margin-bottom: 25px;
        }

        .did-you-know {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .did-you-know strong {
            color: #38b2ac;
            font-size: 1.1em;
            display: block;
            margin-bottom: 5px;
        }

        .did-you-know p {
            font-size: 0.95rem;
            color: #4a6572;
        }

        .next-btn {
            padding: 12px 30px;
            background: #38b2ac;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            background: #2c9a94;
            transform: translateY(-2px);
        }

        /* Shape visuals (simple CSS drawings) */
        .shape-line {
            width: 80%;
            height: 2px;
            background: #2b6cb0;
        }

        .shape-angle-right {
            width: 120px;
            height: 120px;
            position: relative;
        }

        .shape-angle-right::before,
        .shape-angle-right::after {
            content: "";
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: #2b6cb0;
        }

        .shape-angle-right::before {
            width: 80px;
            height: 3px;
        }

        .shape-angle-right::after {
            width: 3px;
            height: 80px;
        }

        .shape-angle-right span {
            position: absolute;
            bottom: 30px;
            left: 25px;
            width: 30px;
            height: 30px;
            border: 2px solid #63b3ed;
            border-top: none;
            border-right: none;
        }

        .shape-angle-acute,
        .shape-angle-obtuse {
            width: 120px;
            height: 120px;
            position: relative;
        }

        .shape-angle-acute::before,
        .shape-angle-acute::after,
        .shape-angle-obtuse::before,
        .shape-angle-obtuse::after {
            content: "";
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: #2b6cb0;
        }

        .shape-angle-acute::before {
            width: 80px;
            height: 3px;
        }

        .shape-angle-acute::after {
            width: 3px;
            height: 80px;
            transform-origin: bottom;
            transform: rotate(-40deg);
        }

        .shape-angle-obtuse::before {
            width: 80px;
            height: 3px;
        }

        .shape-angle-obtuse::after {
            width: 3px;
            height: 80px;
            transform-origin: bottom;
            transform: rotate(40deg);
        }

        .shape-triangle-equilateral,
        .shape-triangle-right,
        .shape-triangle-isosceles {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 90px solid #2b6cb0;
        }

        .shape-triangle-right {
            border-left: 0;
            border-right: 80px solid #2b6cb0;
            border-bottom: 80px solid transparent;
        }

        .shape-quad-square,
        .shape-quad-rectangle,
        .shape-quad-rhombus {
            width: 100px;
            height: 100px;
            border: 3px solid #2b6cb0;
        }

        .shape-quad-rectangle {
            width: 140px;
            height: 70px;
        }

        .shape-quad-rhombus {
            transform: skewX(-25deg);
        }

        .shape-quad-trapezium {
            width: 0;
            height: 0;
            border-bottom: 80px solid #2b6cb0;
            border-left: 20px solid transparent;
            border-right: 60px solid transparent;
        }

        .shape-polygon-hexagon {
            width: 100px;
            height: 55px;
            background: #2b6cb0;
            position: relative;
        }

        .shape-polygon-hexagon::before,
        .shape-polygon-hexagon::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            height: 55px;
            background: inherit;
        }

        .shape-polygon-hexagon::before {
            top: -27px;
            transform: rotate(60deg);
            transform-origin: center;
        }

        .shape-polygon-hexagon::after {
            bottom: -27px;
            transform: rotate(-60deg);
            transform-origin: center;
        }

        .shape-3d-cube {
            width: 80px;
            height: 80px;
            border: 3px solid #2b6cb0;
            position: relative;
        }

        .shape-3d-cube::before {
            content: "";
            position: absolute;
            width: 80px;
            height: 80px;
            border: 3px solid #63b3ed;
            left: 15px;
            top: -15px;
        }

        .shape-3d-cube::after {
            content: "";
            position: absolute;
            width: 3px;
            height: 15px;
            background: #2b6cb0;
            left: 0;
            top: -15px;
            box-shadow: 80px 0 0 #2b6cb0;
        }

        .shape-3d-cylinder {
            width: 80px;
            height: 100px;
            border-radius: 40px / 20px;
            border: 3px solid #2b6cb0;
            position: relative;
            overflow: visible;
        }

        .shape-3d-cylinder::before {
            content: "";
            position: absolute;
            width: 80px;
            height: 20px;
            border-radius: 40px / 20px;
            border: 3px solid #63b3ed;
            border-bottom: none;
            top: -3px;
            left: -3px;
        }

        .shape-3d-cone {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 100px solid #2b6cb0;
            position: relative;
        }

        .shape-3d-cone::before {
            content: "";
            position: absolute;
            width: 90px;
            height: 18px;
            background: white;
            border-radius: 50%;
            border: 3px solid #63b3ed;
            left: -45px;
            bottom: -12px;
        }

        .shape-3d-sphere {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #2b6cb0;
            position: relative;
        }

        .shape-3d-sphere::before {
            content: "";
            position: absolute;
            width: 80px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #63b3ed;
            left: 8px;
            top: 28px;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .game-area {
                flex-direction: column;
            }
            .clues-container {
                margin-left: 0;
                margin-top: 20px;
            }
            .crossword-container {
                min-width: unset;
            }
            .geometry-layout {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .game-header h1 {
                font-size: 2.2rem;
            }

            .game-stats {
                flex-direction: column;
                gap: 15px;
            }

            .controls {
                flex-direction: column;
                gap: 10px;
            }

            .control-btn-game {
                width: 100%;
                justify-content: center;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% {transform: scale(1);}
            50% {transform: scale(1.05);}
            100% {transform: scale(1);}
        }

        .pulse {
            animation: pulse 0.5s;
        }

        /* Odia font support */
        .odia-text {
            font-family: 'Kalinga', 'Nirmala UI', 'Segoe UI', sans-serif;
        }

        /* Hindi font support */
        .hindi-text {
            font-family: 'Mangal', 'Nirmala UI', 'Segoe UI', sans-serif;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-atom"></i>
            </div>
            <div class="logo-text">
                <h1>STEM Learn Odisha</h1>
                <p>Gamified Learning Platform</p>
            </div>
        </div>

        <nav>
            <ul>
                <li><a href="student-dashboard.html" id="navDashboard">Dashboard</a></li>
                <li><a href="science.html" id="navScience">Science</a></li>
                <li><a href="food.html" id="navFood">Food</a></li>
                <li><a href="scienceidx.html" id="navCurriculum">Curriculum</a></li>
            </ul>
        </nav>

        <div class="header-controls">
            <button class="control-btn" id="languageToggle">
                <i class="fas fa-globe"></i>
            </button>

            <div class="profile-container">
                <button class="profile-btn" id="profileToggle">
                    <img src="" alt="Profile" class="profile-pic" id="headerProfilePic">
                    <span id="headerUserName">Student</span>
                    <i class="fas fa-chevron-down"></i>
                </button>

                <div class="profile-dropdown" id="profileDropdown">
                    <a href="student-dashboard.html" class="dropdown-item" id="dropdownProfile">
                        <i class="fas fa-user"></i>
                        <span data-translate="dropdown-profile">Profile</span>
                    </a>
                    <a href="student-dashboard.html" class="dropdown-item" id="dropdownSettings">
                        <i class="fas fa-cog"></i>
                        <span data-translate="dropdown-settings">Settings</span>
                    </a>
                    <a href="#" class="dropdown-item" id="dropdownLogout">
                        <i class="fas fa-sign-out-alt"></i>
                        <span data-translate="dropdown-logout">Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Language Options -->
    <div class="language-options" id="languageOptions">
        <div class="language-option" data-lang="en">English</div>
        <div class="language-option" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</div>
        <div class="language-option" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</div>
    </div>

    <!-- Language Switcher for Game -->
    <div class="language-switcher" id="game-language-switcher">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</button>
        <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
    </div>

    <!-- Instructions Modal -->
    <div class="instructions-modal" id="instructions-modal">
        <div class="instructions-content">
            <!-- Separate language switcher for instructions only -->
            <div class="language-switcher" id="instructions-language-switcher" style="position: relative; top: 0; right: 0; margin: 0 auto 20px auto; width: fit-content; background: rgba(26, 54, 93, 0.1);">
                <button class="lang-btn active" data-lang="en">English</button>
                <button class="lang-btn" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</button>
                <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
            </div>

            <h2 class="instructions-title" id="instructions-title">How to Play the Geometry Adventure</h2>
            <div class="instructions-text">
                <p id="instructions-intro">Welcome to the Geometry Adventure! You will travel through different missions and master every concept from the chapter "Understanding Elementary Shapes".</p>
                <ul class="instructions-list">
                    <li id="instruction-1">Each card on the right side is a mission (Line segments, angles, triangles, quadrilaterals, polygons, 3D shapes etc.).</li>
                    <li id="instruction-2">Click a mission card to begin. Read the question and observe the visual carefully.</li>
                    <li id="instruction-3">Choose the correct option. After answering, a short explanation will appear.</li>
                    <li id="instruction-4">Use hints if you are stuck, but remember: hints reduce your score slightly.</li>
                    <li id="instruction-5">Complete all questions in a mission to unlock the next one.</li>
                    <li id="instruction-6">Finish every mission to become a <strong>Geometry Star</strong> and earn your badge!</li>
                </ul>
                <p id="instructions-outro">Ready? Let's explore angles, triangles, quadrilaterals and more‚Äîstep by step.</p>
            </div>
            <button class="start-game-btn" id="start-game-btn">Start Game</button>
        </div>
    </div>

    <!-- Game Header -->
    <section class="game-header" id="game-header">
        <div class="container">
            <h1 data-translate="game-title">Geometry Adventure: Understanding Elementary Shapes</h1>
            <p data-translate="game-desc">Travel through missions on line segments, angles, triangles, quadrilaterals, polygons and 3D shapes‚Äîand learn by playing!</p>
        </div>
    </section>

    <!-- Game Stats -->
    <div class="container" id="game-stats-container">
        <div class="game-stats" id="game-stats">
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span id="time">20:00</span>
            </div>

            <div class="score">
                <i class="fas fa-star"></i>
                <span id="score">Score: 0</span>
            </div>

            <div class="hints">
                <i class="fas fa-lightbulb"></i>
                <span id="hints-left">Hints: 3</span>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progress" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- Game Area -->
    <section class="game-area" id="game-area">
        <div class="container">
            <div class="crossword-container">
                <div class="topic-header">
                    <div>
                        <div class="topic-badge">
                            <i class="fas fa-compass"></i>
                            <span id="topic-badge-text">Mission 1</span>
                        </div>
                        <div class="topic-title-main" id="topic-title-main">Measuring Line Segments</div>
                        <div class="topic-subtitle" id="topic-subtitle">Learn to measure and compare line segments using a ruler.</div>
                    </div>
                    <div class="topic-progress" id="topic-progress-label">Question 1 of 1</div>
                </div>

                <div class="geometry-layout">
                    <div class="visual-board">
                        <div class="visual-title" id="visual-title">Visual</div>
                        <div class="visual-area" id="visual-area">
                            <!-- Shape goes here -->
                        </div>
                        <div class="visual-caption" id="visual-caption">Observe the figure carefully before answering.</div>
                    </div>

                    <div class="question-panel">
                        <div class="question-tag" id="question-tag">Concept: Line Segment</div>
                        <div class="question-text" id="question-text">
                            Which object represents a line segment?
                        </div>
                        <div class="concept-label" id="concept-label">
                            Remember: A line segment has two end points.
                        </div>
                        <div class="options-grid" id="options-grid">
                            <!-- Options go here -->
                        </div>
                        <div class="question-footer">
                            <span id="question-status">Choose the best answer.</span>
                            <span><strong id="overall-progress-small">0</strong> / <span id="overall-total-small">0</span> questions done</span>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="control-btn-game hint" id="hint-btn">
                        <i class="fas fa-lightbulb"></i>
                        <span data-translate="hint-btn">Use Hint</span>
                    </button>
                    <button class="control-btn-game" id="validate-btn">
                        <i class="fas fa-check-circle"></i>
                        <span data-translate="validate-btn">Check Answer</span>
                    </button>
                    <button class="control-btn-game reset" id="reset-btn">
                        <i class="fas fa-redo"></i>
                        <span data-translate="reset-btn">Reset Game</span>
                    </button>
                </div>
            </div>

            <div class="clues-container">
                <h3 class="clues-title">Missions</h3>
                <div id="topic-map">
                    <!-- Topic cards will be injected here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Fun Fact / Explanation Modal -->
    <div class="funfact-modal" id="funfact-modal">
        <div class="funfact-content">
            <div class="funfact-icon" id="funfact-icon">üéâ</div>
            <h2 class="funfact-title" id="funfact-title">Great Job!</h2>
            <p class="funfact-text" id="funfact-text"></p>
            <p class="funfact-subtext" id="funfact-subtext"></p>
            <button class="continue-btn" id="continue-btn">Next Question</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="success-modal">
        <div class="success-content">
            <div class="badge">
                <i class="fas fa-medal"></i>
            </div>
            <h2 class="success-title" data-translate="success-title">All Missions Complete!</h2>
            <p class="success-text" data-translate="success-text">You‚Äôve mastered <strong>Understanding Elementary Shapes</strong> and earned the <strong>Geometry Star</strong> badge!</p>
            <div class="did-you-know">
                <strong data-translate="did-you-know">Did you know?</strong>
                <p data-translate="crossword-fact">In everyday life, you see shapes everywhere‚Äîdoor frames (rectangles), traffic signs (triangles, octagons), tiles (squares), and even footballs (patterns of pentagons and hexagons). Geometry helps us describe this world using math!</p>
            </div>
            <button class="next-btn" id="success-next-btn" data-translate="play-again-btn">Play Again</button>
        </div>
    </div>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('user'));

            if (!user) {
                window.location.href = 'student-login.html';
                return;
            }

            loadUserData(user);
            initGamePage();
        });

        function loadUserData(user) {
            document.getElementById('headerUserName').textContent = user.fullName;
            document.getElementById('headerProfilePic').src = user.profilePicture ? ('uploads/' + user.profilePicture) : 'default-profile.png';
        }

        // Language / UI translations (basic)
        const translations = {
            en: {
                'dropdown-profile': 'Profile',
                'dropdown-settings': 'Settings',
                'dropdown-logout': 'Logout',
                'game-title': 'Geometry Adventure: Understanding Elementary Shapes',
                'game-desc': 'Travel through missions on line segments, angles, triangles, quadrilaterals, polygons and 3D shapes‚Äîand learn by playing!',
                'hint-btn': 'Use Hint',
                'validate-btn': 'Check Answer',
                'reset-btn': 'Reset Game',
                'success-title': 'All Missions Complete!',
                'success-text': 'You‚Äôve mastered <strong>Understanding Elementary Shapes</strong> and earned the <strong>Geometry Star</strong> badge!',
                'did-you-know': 'Did you know?',
                'crossword-fact': 'In everyday life, you see shapes everywhere‚Äîdoor frames (rectangles), traffic signs (triangles, octagons), tiles (squares), and even footballs (patterns of pentagons and hexagons). Geometry helps us describe this world using math!',
                'play-again-btn': 'Play Again'
            },
            or: {
                'dropdown-profile': '‡¨™‡≠ç‡¨∞‡≠ã‡¨´‡¨æ‡¨á‡¨≤‡≠ç',
                'dropdown-settings': '‡¨∏‡≠á‡¨ü‡¨ø‡¨Ç‡¨∏‡≠ç',
                'dropdown-logout': '‡¨≤‡¨ó‡¨Ü‡¨â‡¨ü‡≠ç',
                'game-title': '‡¨ú‡¨ø‡¨ì‡¨Æ‡≠á‡¨ü‡≠ç‡¨∞‡¨ø ‡¨Ü‡¨°‡¨≠‡≠á‡¨û‡≠ç‡¨ö‡¨∞‡≠ç: ‡¨Ö‡¨£‡≠ç‡¨°‡¨∞‡¨∑‡≠ç‡¨ü‡¨æ‡¨£‡≠ç‡¨°‡¨ø‡¨Ç ‡¨è‡¨≤‡¨ø‡¨Æ‡≠á‡¨£‡≠ç‡¨ü‡¨æ‡¨∞‡≠Ä ‡¨∂‡≠á‡¨™‡≠ç‡¨∏',
                'game-desc': '‡¨∞‡≠á‡¨ñ‡¨æ‡¨ñ‡¨£‡≠ç‡¨°, ‡¨ï‡≠ã‡¨£, ‡¨§‡≠ç‡¨∞‡¨ø‡¨≠‡≠Å‡¨ú, ‡¨ö‡¨§‡≠Å‡¨∞‡≠ç‡¨≠‡≠Å‡¨ú, ‡¨¨‡¨π‡≠Å‡¨≠‡≠Å‡¨ú ‡¨è‡¨¨‡¨Ç 3D ‡¨Ü‡¨ï‡≠É‡¨§‡¨ø ‡¨¨‡¨ø‡¨∑‡≠ü‡¨∞‡≠á ‡¨Æ‡¨ø‡¨∂‡¨®‡≠ç‚Äå‡¨ó‡≠Å‡¨°‡¨º‡¨ø‡¨ï ‡¨Æ‡¨æ‡¨ß‡≠ç‡≠ü‡¨Æ‡¨∞‡≠á ‡¨Ø‡¨æ‡¨§‡≠ç‡¨∞‡¨æ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨ñ‡≠á‡¨≥‡¨ø‡¨ñ‡≠á‡¨≥‡¨ø ‡¨∂‡¨ø‡¨ñ‡¨®‡≠ç‡¨§‡≠Å!',
                'hint-btn': '‡¨∏‡≠Ç‡¨ö‡¨®‡¨æ ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'validate-btn': '‡¨â‡¨§‡≠ç‡¨§‡¨∞ ‡¨Ø‡¨æ‡¨û‡≠ç‡¨ö ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'reset-btn': '‡¨ñ‡≠á‡¨≥ ‡¨™‡≠Å‡¨®‡¨∞‡¨æ‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'success-title': '‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨Æ‡¨ø‡¨∂‡¨®‡≠ç ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£!',
                'success-text': '‡¨Ü‡¨™‡¨£ <strong>Understanding Elementary Shapes</strong> ‡¨Ö‡¨ß‡≠ç‡≠ü‡¨æ‡≠ü‡¨ï‡≠Å ‡¨Æ‡¨æ‡¨∑‡≠ç‡¨ü‡¨∞‡≠ç ‡¨ï‡¨∞‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø ‡¨è‡¨¨‡¨Ç <strong>Geometry Star</strong> ‡¨¨‡≠ç‡≠ü‡¨æ‡¨ú‡≠ç ‡¨Ö‡¨∞‡≠ç‡¨ú‡¨® ‡¨ï‡¨∞‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø!',
                'did-you-know': '‡¨Ü‡¨™‡¨£ ‡¨ú‡¨æ‡¨£‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø ‡¨ï‡¨ø?',
                'crossword-fact': '‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨¶‡¨ø‡¨® ‡¨ú‡≠Ä‡¨¨‡¨®‡¨∞‡≠á ‡¨Ü‡¨™‡¨£ ‡¨∏‡¨¨‡≠Å‡¨†‡¨æ‡¨∞‡≠á ‡¨Ü‡¨ï‡≠É‡¨§‡¨ø ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡¨ø‚Äî‡¨¶‡≠Å‡¨Ü‡¨∞ ‡¨´‡≠ç‡¨∞‡≠á‡¨Æ‡≠ç (‡¨Ü‡≠ü‡¨§), ‡¨ü‡≠ç‡¨∞‡¨æ‡¨´‡¨ø‡¨ï‡≠ç ‡¨∏‡¨æ‡¨á‡¨®‡≠ç (‡¨§‡≠ç‡¨∞‡¨ø‡¨≠‡≠Å‡¨ú, ‡¨Ö‡¨∑‡≠ç‡¨ü‡¨≠‡≠Å‡¨ú), ‡¨ü‡¨æ‡¨á‡¨≤‡≠ç (‡¨¨‡¨∞‡≠ç‡¨ó) ‡¨è‡¨¨‡¨Ç ‡¨Æ‡¨æ‡¨®‡≠ç‡¨¶‡¨ø‡¨Ü ‡¨¨‡¨≤‡≠ç (‡¨™‡≠Å‡¨û‡≠ç‡¨ú‡¨ø ‡¨π‡≠ã‡¨á‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡≠á‡¨£‡≠ç‡¨ü‡¨æ‡¨ó‡¨®‡≠ç ‡¨è‡¨¨‡¨Ç ‡¨π‡≠á‡¨ï‡≠ç‡¨∏‡¨æ‡¨ó‡¨®‡≠ç)‡•§ ‡¨ú‡¨ø‡¨ì‡¨Æ‡≠á‡¨ü‡≠ç‡¨∞‡¨ø ‡¨Ü‡¨Æ‡¨ï‡≠Å ‡¨ó‡¨£‡¨ø‡¨§ ‡¨¶‡≠ç‡≠±‡¨æ‡¨∞‡¨æ ‡¨è‡¨π‡¨ø ‡¨ú‡¨ó‡¨§‡¨ï‡≠Å ‡¨¨‡¨∞‡≠ç‡¨£‡≠ç‡¨£‡¨®‡¨æ ‡¨ï‡¨∞‡¨ø‡¨¨‡¨æ‡¨∞‡≠á ‡¨∏‡¨æ‡¨π‡¨æ‡¨Ø‡≠ç‡≠ü ‡¨ï‡¨∞‡≠á!',
                'play-again-btn': '‡¨™‡≠Å‡¨®‡¨∞‡≠ç‡¨¨‡¨æ‡¨∞ ‡¨ñ‡≠á‡¨≥‡¨®‡≠ç‡¨§‡≠Å'
            },
            hi: {
                'dropdown-profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤',
                'dropdown-settings': '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
                'dropdown-logout': '‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
                'game-title': '‡§ú‡•ç‡§Ø‡•ã‡§Æ‡•á‡§ü‡•ç‡§∞‡•Ä ‡§è‡§°‡§µ‡•á‡§Ç‡§ö‡§∞: ‡§è‡§≤‡•Ä‡§Æ‡•á‡§Ç‡§ü‡§∞‡•Ä ‡§∂‡•á‡§™‡•ç‡§∏ ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡§®‡§æ',
                'game-desc': '‡§∞‡•á‡§ñ‡§æ‡§ñ‡§Ç‡§°, ‡§ï‡•ã‡§£, ‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú, ‡§ö‡§§‡•Å‡§∞‡•ç‡§≠‡•Å‡§ú, ‡§¨‡§π‡•Å‡§≠‡•Å‡§ú ‡§î‡§∞ 3D ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§Æ‡§ø‡§∂‡§®‡•ã‡§Ç ‡§∏‡•á ‡§π‡•ã‡§ï‡§∞ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ñ‡•á‡§≤‡§§‡•á-‡§ñ‡•á‡§≤‡§§‡•á ‡§∏‡•Ä‡§ñ‡•á‡§Ç!',
                'hint-btn': '‡§∏‡§Ç‡§ï‡•á‡§§ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç',
                'validate-btn': '‡§â‡§§‡•ç‡§§‡§∞ ‡§ú‡§æ‡§Å‡§ö‡•á‡§Ç',
                'reset-btn': '‡§ñ‡•á‡§≤ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                'success-title': '‡§∏‡§≠‡•Ä ‡§Æ‡§ø‡§∂‡§® ‡§™‡•Ç‡§∞‡•á!',
                'success-text': '‡§Ü‡§™‡§®‡•á <strong>Understanding Elementary Shapes</strong> ‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§Ø ‡§ï‡•ã ‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞ ‡§≤‡§ø‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ <strong>Geometry Star</strong> ‡§¨‡•à‡§ú ‡§Ö‡§∞‡•ç‡§ú‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à!',
                'did-you-know': '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç?',
                'crossword-fact': '‡§¶‡•à‡§®‡§ø‡§ï ‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§π‡§∞ ‡§ú‡§ó‡§π ‡§Ü‡§ï‡•É‡§§‡§ø‡§Ø‡§æ‡§Å ‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç‚Äî‡§¶‡§∞‡§µ‡§æ‡§ú‡§º‡•á ‡§ï‡•á ‡§´‡•ç‡§∞‡•á‡§Æ (‡§Ü‡§Ø‡§§), ‡§ü‡•ç‡§∞‡•à‡§´‡§ø‡§ï ‡§∏‡§æ‡§á‡§® (‡§§‡•ç‡§∞‡§ø‡§≠‡•Å‡§ú, ‡§Ö‡§∑‡•ç‡§ü‡§≠‡•Å‡§ú), ‡§ü‡§æ‡§á‡§≤‡•ç‡§∏ (‡§µ‡§∞‡•ç‡§ó) ‡§î‡§∞ ‡§´‡•Å‡§ü‡§¨‡•â‡§≤ (‡§™‡§Ç‡§ö‡§≠‡•Å‡§ú ‡§î‡§∞ ‡§∑‡§ü‡•ç‡§≠‡•Å‡§ú ‡§ï‡•á ‡§™‡•à‡§ü‡§∞‡•ç‡§®)‡•§ ‡§ú‡•ç‡§Ø‡•ã‡§Æ‡•á‡§ü‡•ç‡§∞‡•Ä ‡§π‡§Æ‡•á‡§Ç ‡§á‡§® ‡§∏‡§¨‡§ï‡•ã ‡§ó‡§£‡§ø‡§§ ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à!',
                'play-again-btn': '‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç'
            }
        };

        let currentGameLanguage = 'en';
        let currentInstructionsLanguage = 'en';

        // Geometry topics & questions
        const topics = [
            {
                id: 'line-segments',
                name: 'Measuring Line Segments',
                description: 'Measure, compare and draw line segments using a ruler.',
                icon: 'fa-ruler-horizontal',
                unlocked: true,
                questions: [
                    {
                        concept: 'Line Segment Basics',
                        tag: 'Line Segment',
                        text: 'Which of these is the best definition of a line segment?',
                        hint: 'Think about start and end points.',
                        explanation: 'A line segment is a part of a line that has two endpoints. It has a fixed length.',
                        more: 'A line extends forever, but a line segment stops at both ends.',
                        shape: { type: 'line' },
                        options: [
                            'A line that goes on forever in both directions.',
                            'A part of a line with two endpoints.',
                            'A shape with three sides.',
                            'A curve with no corners.'
                        ],
                        correctIndex: 1
                    },
                    {
                        concept: 'Using a Ruler',
                        tag: 'Measuring',
                        text: 'A line segment starts at 0 cm and ends at 5.4 cm on the ruler. What is its length?',
                        hint: 'Subtract the starting marking from the ending marking.',
                        explanation: 'Length = 5.4 cm - 0 cm = 5.4 cm.',
                        more: 'Always keep your eye directly above the mark to avoid parallax error.',
                        shape: { type: 'line' },
                        options: [
                            '4.5 cm',
                            '5.0 cm',
                            '5.4 cm',
                            '10.4 cm'
                        ],
                        correctIndex: 2
                    }
                ]
            },
            {
                id: 'angle-intro',
                name: 'Angles ‚Äì Introduction',
                description: 'What is an angle, its arms and vertex, and how to name it.',
                icon: 'fa-angle-right',
                unlocked: false,
                questions: [
                    {
                        concept: 'Angle Definition',
                        tag: 'Angle',
                        text: 'An angle is formed by',
                        hint: 'Look for two rays with a common starting point.',
                        explanation: 'An angle is formed by two rays having the same initial point (vertex).',
                        more: 'The common starting point is called the vertex and the rays are called arms of the angle.',
                        shape: { type: 'angle-acute' },
                        options: [
                            'Two line segments that never meet.',
                            'Two rays with a common end point.',
                            'A curve and a line.',
                            'Only one ray.'
                        ],
                        correctIndex: 1
                    },
                    {
                        concept: 'Naming an Angle',
                        tag: 'Naming Angle',
                        text: 'If point B is the vertex of angle, which is a correct way to name it?',
                        hint: 'Vertex letter comes in the middle.',
                        explanation: 'When naming an angle, the vertex is written in the middle: for example, ‚à†ABC or ‚à†CBD where B is the vertex.',
                        more: 'We can also use a single letter (like ‚à†B) if there is no confusion.',
                        shape: { type: 'angle-acute' },
                        options: [
                            '‚à†BAC where B is vertex',
                            '‚à†ABC where B is vertex',
                            '‚à†CBA where A is vertex',
                            '‚à†BC where B is vertex'
                        ],
                        correctIndex: 1
                    }
                ]
            },
            {
                id: 'angle-types',
                name: 'Types of Angles',
                description: 'Right, acute, obtuse, straight, reflex and complete angles.',
                icon: 'fa-circle-notch',
                unlocked: false,
                questions: [
                    {
                        concept: 'Right Angle',
                        tag: 'Right Angle',
                        text: 'A right angle measures',
                        hint: 'Think of the L-shape corner of a book.',
                        explanation: 'A right angle is exactly 90¬∞.',
                        more: 'It is often marked by a small square at the vertex.',
                        shape: { type: 'angle-right' },
                        options: [
                            'Less than 90¬∞',
                            'Exactly 90¬∞',
                            'More than 90¬∞ but less than 180¬∞',
                            'More than 180¬∞'
                        ],
                        correctIndex: 1
                    },
                    {
                        concept: 'Acute vs Obtuse',
                        tag: 'Acute / Obtuse',
                        text: 'Which of the following is an acute angle?',
                        hint: 'Acute angle is ‚Äúcute‚Äù (small) compared to a right angle.',
                        explanation: 'An acute angle is less than 90¬∞. Here 45¬∞ is acute.',
                        more: 'Any angle between 0¬∞ and 90¬∞ (not included) is acute.',
                        shape: { type: 'angle-acute' },
                        options: [
                            '45¬∞',
                            '90¬∞',
                            '135¬∞',
                            '180¬∞'
                        ],
                        correctIndex: 0
                    }
                ]
            },
            {
                id: 'measuring-angles',
                name: 'Measuring Angles',
                description: 'Using a protractor and reading inner/outer scales.',
                icon: 'fa-protractor',
                unlocked: false,
                questions: [
                    {
                        concept: 'Protractor Use',
                        tag: 'Protractor',
                        text: 'Where should you place the centre point of the protractor while measuring an angle?',
                        hint: 'Think of the vertex.',
                        explanation: 'The centre (small hole or mark) of the protractor must be placed exactly on the vertex of the angle.',
                        more: 'Also align one arm of the angle with the 0¬∞ line on the protractor.',
                        shape: { type: 'angle-acute' },
                        options: [
                            'Anywhere on one arm',
                            'At the middle of one arm',
                            'Exactly on the vertex',
                            'On the longer arm only'
                        ],
                        correctIndex: 2
                    },
                    {
                        concept: 'Inner/Outer Scale',
                        tag: 'Reading Scale',
                        text: 'You place the protractor and one arm starts at 0¬∞ on the inner scale. The other arm points to 60¬∞ on the inner scale. What is the angle?',
                        hint: 'If you start at 0¬∞, just read that same scale.',
                        explanation: 'The measure is 60¬∞ because we read along the same scale where the arm starts at 0¬∞.',
                        more: 'Always check whether you are using inner or outer scale depending on which side is aligned with 0¬∞.',
                        shape: { type: 'angle-acute' },
                        options: [
                            '30¬∞',
                            '45¬∞',
                            '60¬∞',
                            '120¬∞'
                        ],
                        correctIndex: 2
                    }
                ]
            },
            {
                id: 'perpendicular-lines',
                name: 'Perpendicular Lines',
                description: 'Lines meeting at right angles and using set-square.',
                icon: 'fa-arrows-alt',
                unlocked: false,
                questions: [
                    {
                        concept: 'Meaning of Perpendicular',
                        tag: 'Perpendicular',
                        text: 'Two lines are perpendicular if they',
                        hint: 'Think of the corner of a sheet of paper.',
                        explanation: 'Perpendicular lines meet at a right angle (90¬∞).',
                        more: 'For example, the edges of most books and tables are perpendicular.',
                        shape: { type: 'angle-right' },
                        options: [
                            'Never meet',
                            'Meet at any angle',
                            'Meet at 90¬∞ angle',
                            'Overlap each other'
                        ],
                        correctIndex: 2
                    },
                    {
                        concept: 'Set-square Use',
                        tag: 'Set-square',
                        text: 'Which instrument combination is commonly used to draw a perpendicular from a point on a line?',
                        hint: 'Think of your geometry box.',
                        explanation: 'We usually use a ruler and a set-square to draw perpendiculars easily.',
                        more: 'You can also use a compass method, but in this chapter set-square + ruler is highlighted.',
                        shape: { type: 'angle-right' },
                        options: [
                            'Ruler only',
                            'Compass only',
                            'Ruler and protractor',
                            'Ruler and set-square'
                        ],
                        correctIndex: 3
                    }
                ]
            },
            {
                id: 'triangles',
                name: 'Classification of Triangles',
                description: 'By sides (scalene, isosceles, equilateral) and by angles.',
                icon: 'fa-play',
                unlocked: false,
                questions: [
                    {
                        concept: 'By Sides',
                        tag: 'Triangle ‚Äì Sides',
                        text: 'A triangle with all three sides equal is called',
                        hint: 'Think of a perfectly equal triangle.',
                        explanation: 'A triangle with all three equal sides is called an equilateral triangle.',
                        more: 'In an equilateral triangle, all angles are also equal (each 60¬∞).',
                        shape: { type: 'triangle-equilateral' },
                        options: [
                            'Isosceles triangle',
                            'Scalene triangle',
                            'Equilateral triangle',
                            'Right-angled triangle'
                        ],
                        correctIndex: 2
                    },
                    {
                        concept: 'By Angles',
                        tag: 'Triangle ‚Äì Angles',
                        text: 'Which triangle has one angle equal to 90¬∞?',
                        hint: 'Think of a triangle with a right angle.',
                        explanation: 'A right-angled triangle has one right angle (90¬∞).',
                        more: 'The side opposite to the right angle is called the hypotenuse.',
                        shape: { type: 'triangle-right' },
                        options: [
                            'Acute-angled triangle',
                            'Right-angled triangle',
                            'Obtuse-angled triangle',
                            'Equilateral triangle'
                        ],
                        correctIndex: 1
                    }
                ]
            },
            {
                id: 'quadrilaterals',
                name: 'Quadrilaterals',
                description: 'Squares, rectangles, parallelograms, rhombus and trapezium.',
                icon: 'fa-square-full',
                unlocked: false,
                questions: [
                    {
                        concept: 'Square vs Rectangle',
                        tag: 'Square / Rectangle',
                        text: 'Which statement about a square is true?',
                        hint: 'Compare all sides and all angles.',
                        explanation: 'A square has all sides equal and all angles 90¬∞. It is a special rectangle.',
                        more: 'Every square is a rectangle, but not every rectangle is a square.',
                        shape: { type: 'quad-square' },
                        options: [
                            'All angles are 60¬∞.',
                            'Opposite sides are parallel and all angles 120¬∞.',
                            'All sides are equal and all angles 90¬∞.',
                            'Only one pair of sides is parallel.'
                        ],
                        correctIndex: 2
                    },
                    {
                        concept: 'Trapezium',
                        tag: 'Trapezium',
                        text: 'A trapezium is a quadrilateral in which',
                        hint: 'Look at number of parallel sides.',
                        explanation: 'A trapezium has exactly one pair of parallel sides.',
                        more: 'In some countries, this is called a trapezoid.',
                        shape: { type: 'quad-trapezium' },
                        options: [
                            'All four sides are equal.',
                            'Two pairs of opposite sides are parallel.',
                            'Exactly one pair of opposite sides is parallel.',
                            'No sides are parallel.'
                        ],
                        correctIndex: 2
                    }
                ]
            },
            {
                id: 'polygons',
                name: 'Polygons',
                description: 'Definition, regular vs irregular, and naming by sides.',
                icon: 'fa-draw-polygon',
                unlocked: false,
                questions: [
                    {
                        concept: 'Definition',
                        tag: 'Polygon',
                        text: 'Which of the following is a polygon?',
                        hint: 'Closed figure made of only line segments.',
                        explanation: 'A polygon is a closed figure made entirely of line segments.',
                        more: 'Circles are not polygons because they are curved.',
                        shape: { type: 'polygon-hexagon' },
                        options: [
                            'A closed curve with only straight line segments.',
                            'A circle.',
                            'Two rays starting from the same point.',
                            'A single line segment.'
                        ],
                        correctIndex: 0
                    },
                    {
                        concept: 'Naming Polygons',
                        tag: 'Number of Sides',
                        text: 'A polygon with 6 sides is called',
                        hint: 'Hexa means six.',
                        explanation: 'A 6-sided polygon is called a hexagon.',
                        more: 'Similarly, 5 sides ‚Äì pentagon, 8 sides ‚Äì octagon.',
                        shape: { type: 'polygon-hexagon' },
                        options: [
                            'Pentagon',
                            'Hexagon',
                            'Heptagon',
                            'Octagon'
                        ],
                        correctIndex: 1
                    }
                ]
            },
            {
                id: '3d-shapes',
                name: '3D Shapes ‚Äì Basic Idea',
                description: 'Faces, edges and vertices of common 3D shapes.',
                icon: 'fa-cube',
                unlocked: false,
                questions: [
                    {
                        concept: 'Cube & Cuboid',
                        tag: '3D ‚Äì Cube',
                        text: 'A cube has',
                        hint: 'Think of a dice.',
                        explanation: 'A cube has 6 faces, 12 edges and 8 vertices.',
                        more: 'All faces of a cube are squares.',
                        shape: { type: '3d-cube' },
                        options: [
                            '4 faces, 6 edges, 4 vertices',
                            '6 faces, 12 edges, 8 vertices',
                            '5 faces, 8 edges, 5 vertices',
                            '6 faces, 8 edges, 12 vertices'
                        ],
                        correctIndex: 1
                    },
                    {
                        concept: 'Cylinder / Cone / Sphere',
                        tag: '3D ‚Äì Curved Faces',
                        text: 'Which 3D shape has only one curved surface and no edges or vertices?',
                        hint: 'Think of a ball.',
                        explanation: 'A sphere has one curved surface and no edges or vertices.',
                        more: 'In contrast, a cylinder has 2 circular faces and 1 curved surface, and a cone has 1 circular face and 1 curved surface with a vertex.',
                        shape: { type: '3d-sphere' },
                        options: [
                            'Cylinder',
                            'Cone',
                            'Sphere',
                            'Cuboid'
                        ],
                        correctIndex: 2
                    }
                ]
            }
        ];

        // DOM references
        const instructionsModal = document.getElementById('instructions-modal');
        const startGameBtn = document.getElementById('start-game-btn');
        const gameHeader = document.getElementById('game-header');
        const gameStatsContainer = document.getElementById('game-stats-container');
        const gameStats = document.getElementById('game-stats');
        const gameArea = document.getElementById('game-area');

        const topicBadgeText = document.getElementById('topic-badge-text');
        const topicTitleMain = document.getElementById('topic-title-main');
        const topicSubtitle = document.getElementById('topic-subtitle');
        const topicProgressLabel = document.getElementById('topic-progress-label');

        const visualTitle = document.getElementById('visual-title');
        const visualArea = document.getElementById('visual-area');
        const visualCaption = document.getElementById('visual-caption');

        const questionTag = document.getElementById('question-tag');
        const questionText = document.getElementById('question-text');
        const conceptLabel = document.getElementById('concept-label');
        const optionsGrid = document.getElementById('options-grid');
        const questionStatus = document.getElementById('question-status');
        const overallProgressSmall = document.getElementById('overall-progress-small');
        const overallTotalSmall = document.getElementById('overall-total-small');

        const topicMapEl = document.getElementById('topic-map');

        const hintBtn = document.getElementById('hint-btn');
        const validateBtn = document.getElementById('validate-btn');
        const resetBtn = document.getElementById('reset-btn');

        const scoreEl = document.getElementById('score');
        const hintsLeftEl = document.getElementById('hints-left');
        const timeEl = document.getElementById('time');
        const progressEl = document.getElementById('progress');

        const funfactModal = document.getElementById('funfact-modal');
        const funfactIcon = document.getElementById('funfact-icon');
        const funfactTitle = document.getElementById('funfact-title');
        const funfactTextEl = document.getElementById('funfact-text');
        const funfactSubtext = document.getElementById('funfact-subtext');
        const continueBtn = document.getElementById('continue-btn');

        const successModal = document.getElementById('success-modal');
        const successNextBtn = document.getElementById('success-next-btn');

        let currentTopicIndex = 0;
        let currentQuestionIndex = 0;
        let selectedOptionIndex = null;
        let score = 0;
        let hintsLeft = 3;
        let timerInterval = null;
        let timeRemaining = 1200; // 20 minutes
        let totalQuestions = 0;
        let answeredQuestions = 0;
        let isGameStarted = false;

        // Init
        function initGamePage() {
            // Navigation, profile, header-language
            const profileToggle = document.getElementById('profileToggle');
            const profileDropdown = document.getElementById('profileDropdown');
            const languageToggle = document.getElementById('languageToggle');
            const languageOptions = document.getElementById('languageOptions');
            const dropdownProfile = document.getElementById('dropdownProfile');
            const dropdownSettings = document.getElementById('dropdownSettings');
            const dropdownLogout = document.getElementById('dropdownLogout');
            const navDashboard = document.getElementById('navDashboard');
            const navScience = document.getElementById('navScience');
            const navCurriculum = document.getElementById('navCurriculum');
            const navFood = document.getElementById('navFood');

            profileToggle.addEventListener('click', () => {
                profileDropdown.classList.toggle('show');
            });

            languageToggle.addEventListener('click', () => {
                languageOptions.classList.toggle('show');
            });

            dropdownProfile.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#profile';
            });

            dropdownSettings.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#settings';
            });

            dropdownLogout.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.removeItem('user');
                window.location.href = 'student-login.html';
            });

            navDashboard.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'student-dashboard.html';
            });

            navScience.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'science.html';
            });

            navCurriculum.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'scienceidx.html';
            });

            navFood.addEventListener('click', (e) => {
                e.preventDefault();
                window.location.href = 'food.html';
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('#languageToggle') && !e.target.closest('#languageOptions')) {
                    languageOptions.classList.remove('show');
                }
                if (!e.target.closest('#profileToggle') && !e.target.closest('#profileDropdown')) {
                    profileDropdown.classList.remove('show');
                }
            });

            // Header language options
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                    languageOptions.classList.remove('show');
                });
            });

            // Game language switcher
            document.querySelectorAll('#game-language-switcher .lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.dataset.lang;
                    switchGameLanguage(lang);
                });
            });

            // Instructions language switcher
            document.querySelectorAll('#instructions-language-switcher .lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.dataset.lang;
                    switchInstructionsLanguage(lang);
                });
            });

            // Count total questions
            totalQuestions = topics.reduce((sum, t) => sum + t.questions.length, 0);
            overallTotalSmall.textContent = totalQuestions;

            // Show instructions
            instructionsModal.style.display = 'flex';

            // Start game button
            startGameBtn.addEventListener('click', () => {
                instructionsModal.style.display = 'none';
                gameHeader.style.display = 'block';
                gameStatsContainer.style.display = 'block';
                gameStats.style.display = 'flex';
                gameArea.style.display = 'flex';
                isGameStarted = true;
                startGame();
            });

            hintBtn.addEventListener('click', onHintClick);
            validateBtn.addEventListener('click', onValidateClick);
            resetBtn.addEventListener('click', resetGame);
            continueBtn.addEventListener('click', onContinueFromExplanation);
            successNextBtn.addEventListener('click', resetGame);

            switchLanguage('en');
            switchGameLanguage('en');
            switchInstructionsLanguage('en');
        }

        function switchLanguage(lang) {
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    if (key === 'success-text' || key === 'crossword-fact') {
                        el.innerHTML = translations[lang][key];
                    } else {
                        el.textContent = translations[lang][key];
                    }
                }
            });
        }

        function switchGameLanguage(lang) {
            currentGameLanguage = lang;
            document.querySelectorAll('#game-language-switcher .lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            switchLanguage(lang);

            document.body.classList.remove('odia-text', 'hindi-text');
            if (lang === 'or') document.body.classList.add('odia-text');
            if (lang === 'hi') document.body.classList.add('hindi-text');

            updateScoreDisplay();
            updateHintsDisplay();
        }

        function switchInstructionsLanguage(lang) {
            currentInstructionsLanguage = lang;
            document.querySelectorAll('#instructions-language-switcher .lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            // (For now we keep instructions text only in English to keep code small)
        }

        function startGame() {
            score = 0;
            hintsLeft = 3;
            answeredQuestions = 0;
            timeRemaining = 1200;

            updateScoreDisplay();
            updateHintsDisplay();
            updateProgress();

            buildTopicMap();
            loadTopic(0);
            startTimer();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (timeRemaining > 0) {
                    timeRemaining--;
                    const minutes = Math.floor(timeRemaining / 60);
                    const seconds = timeRemaining % 60;
                    timeEl.textContent = minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
                } else {
                    clearInterval(timerInterval);
                    alert('Time is up! Game Over.');
                }
            }, 1000);
        }

        function buildTopicMap() {
            topicMapEl.innerHTML = '';
            topics.forEach((topic, index) => {
                const completedCount = topic.questions.filter(q => q._completed).length;
                const total = topic.questions.length;
                const percent = (completedCount / total) * 100;

                const card = document.createElement('div');
                card.classList.add('topic-card');
                if (index === currentTopicIndex) card.classList.add('active');
                if (topic.unlocked) {
                    // ok
                } else {
                    card.classList.add('locked');
                }
                if (completedCount === total) {
                    card.classList.add('completed');
                }

                card.dataset.index = index;

                card.innerHTML = `
                    <div class="topic-card-header">
                        <div class="topic-card-title"><i class="fas ${topic.icon}" style="margin-right:6px;"></i>${topic.name}</div>
                        <div class="topic-card-badge">${topic.unlocked ? (completedCount === total ? 'Done' : 'Unlocked') : 'Locked'}</div>
                    </div>
                    <div class="topic-card-body">${topic.description}</div>
                    <div class="topic-card-progress">
                        <div class="topic-card-progress-bar">
                            <div class="topic-card-progress-fill" style="width:${percent}%;"></div>
                        </div>
                        <span>${completedCount}/${total}</span>
                    </div>
                `;

                if (topic.unlocked) {
                    card.addEventListener('click', () => {
                        currentTopicIndex = index;
                        currentQuestionIndex = 0;
                        buildTopicMap();
                        loadTopic(index);
                    });
                }

                topicMapEl.appendChild(card);
            });
        }

        function loadTopic(index) {
            const topic = topics[index];
            topicBadgeText.textContent = 'Mission ' + (index + 1);
            topicTitleMain.textContent = topic.name;
            topicSubtitle.textContent = topic.description;

            loadQuestion(index, currentQuestionIndex);
        }

        function loadQuestion(topicIndex, questionIndex) {
            const topic = topics[topicIndex];
            const question = topic.questions[questionIndex];

            selectedOptionIndex = null;
            optionsGrid.innerHTML = '';

            const topicCompletedCount = topic.questions.filter(q => q._completed).length;
            topicProgressLabel.textContent = 'Question ' + (questionIndex + 1) + ' of ' + topic.questions.length;
            questionTag.textContent = 'Concept: ' + question.tag;
            questionText.textContent = question.text;
            conceptLabel.textContent = 'Remember: ' + question.hint;
            questionStatus.textContent = 'Choose the best answer.';
            questionStatus.style.color = '#718096';

            overallProgressSmall.textContent = answeredQuestions;

            renderShape(question.shape);

            question.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.classList.add('option-btn');
                btn.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + idx)}</span>
                    <span>${opt}</span>
                `;
                btn.addEventListener('click', () => {
                    selectOption(idx);
                });
                optionsGrid.appendChild(btn);
            });
        }

        function renderShape(shape) {
            visualArea.innerHTML = '';
            if (!shape) {
                visualArea.textContent = 'No visual for this question.';
                return;
            }

            let shapeEl = document.createElement('div');
            let caption = '';

            switch (shape.type) {
                case 'line':
                    shapeEl.className = 'shape-line';
                    caption = 'This represents a straight line segment.';
                    break;
                case 'angle-right':
                    shapeEl.className = 'shape-angle-right';
                    const sq = document.createElement('span');
                    shapeEl.appendChild(sq);
                    caption = 'A right angle has a square marking at the corner.';
                    break;
                case 'angle-acute':
                    shapeEl.className = 'shape-angle-acute';
                    caption = 'An acute angle is smaller than a right angle.';
                    break;
                case 'angle-obtuse':
                    shapeEl.className = 'shape-angle-obtuse';
                    caption = 'An obtuse angle is larger than a right angle but less than 180¬∞.';
                    break;
                case 'triangle-equilateral':
                    shapeEl.className = 'shape-triangle-equilateral';
                    caption = 'All sides and angles are equal in an equilateral triangle.';
                    break;
                case 'triangle-right':
                    shapeEl.className = 'shape-triangle-right';
                    caption = 'A right-angled triangle has one 90¬∞ angle.';
                    break;
                case 'quad-square':
                    shapeEl.className = 'shape-quad-square';
                    caption = 'A square has all sides equal and all angles 90¬∞.';
                    break;
                case 'quad-rectangle':
                    shapeEl.className = 'shape-quad-rectangle';
                    caption = 'A rectangle has opposite sides equal and all angles 90¬∞.';
                    break;
                case 'quad-rhombus':
                    shapeEl.className = 'shape-quad-rhombus';
                    caption = 'A rhombus has all sides equal but angles are not necessarily 90¬∞.';
                    break;
                case 'quad-trapezium':
                    shapeEl.className = 'shape-quad-trapezium';
                    caption = 'A trapezium has exactly one pair of parallel sides.';
                    break;
                case 'polygon-hexagon':
                    shapeEl.className = 'shape-polygon-hexagon';
                    caption = 'A hexagon is a polygon with 6 sides.';
                    break;
                case '3d-cube':
                    shapeEl.className = 'shape-3d-cube';
                    caption = 'A cube has 6 equal square faces.';
                    break;
                case '3d-cylinder':
                    shapeEl.className = 'shape-3d-cylinder';
                    caption = 'A cylinder has 2 circular faces and 1 curved surface.';
                    break;
                case '3d-cone':
                    shapeEl.className = 'shape-3d-cone';
                    caption = 'A cone has 1 circular face, 1 curved surface and one vertex.';
                    break;
                case '3d-sphere':
                    shapeEl.className = 'shape-3d-sphere';
                    caption = 'A sphere has only one curved surface and no edges or vertices.';
                    break;
                default:
                    shapeEl.textContent = 'Shape';
                    caption = 'Observe the concept carefully.';
            }

            visualArea.appendChild(shapeEl);
            visualCaption.textContent = caption;
        }

        function selectOption(index) {
            selectedOptionIndex = index;
            const buttons = optionsGrid.querySelectorAll('.option-btn');
            buttons.forEach((btn, idx) => {
                btn.classList.remove('correct', 'incorrect');
                btn.style.boxShadow = 'none';
                if (idx === index) {
                    btn.style.boxShadow = '0 0 0 2px rgba(49,130,206,0.3)';
                }
            });
            questionStatus.textContent = 'Now click "Check Answer".';
            questionStatus.style.color = '#3182ce';
        }

        function onHintClick() {
            if (!isGameStarted) return;
            if (hintsLeft <= 0) return;

            const topic = topics[currentTopicIndex];
            const question = topic.questions[currentQuestionIndex];

            hintsLeft--;
            updateHintsDisplay();
            questionStatus.textContent = 'Hint: ' + question.hint;
            questionStatus.style.color = '#d69e2e';

            updateScore(-5);
        }

        function onValidateClick() {
            if (!isGameStarted) return;
            const topic = topics[currentTopicIndex];
            const question = topic.questions[currentQuestionIndex];

            if (selectedOptionIndex === null) {
                questionStatus.textContent = 'Please select an option first.';
                questionStatus.style.color = '#e53e3e';
                return;
            }

            const buttons = optionsGrid.querySelectorAll('.option-btn');
            buttons.forEach((btn, idx) => {
                if (idx === question.correctIndex) {
                    btn.classList.add('correct');
                } else if (idx === selectedOptionIndex && selectedOptionIndex !== question.correctIndex) {
                    btn.classList.add('incorrect');
                }
                btn.style.boxShadow = 'none';
            });

            const isCorrect = (selectedOptionIndex === question.correctIndex);

            if (!question._completed) {
                answeredQuestions++;
            }
            question._completed = true;

            if (isCorrect) {
                questionStatus.textContent = 'Correct! üéâ';
                questionStatus.style.color = '#38a169';
                updateScore(20);
                showExplanationModal(true, question);
            } else {
                questionStatus.textContent = 'Not correct. Review the explanation.';
                questionStatus.style.color = '#e53e3e';
                updateScore(-5);
                showExplanationModal(false, question);
            }

            updateProgress();
            buildTopicMap();
        }

        function showExplanationModal(isCorrect, question) {
            funfactIcon.textContent = isCorrect ? 'üåü' : 'üîç';
            funfactTitle.textContent = isCorrect ? 'Great Job!' : 'Let‚Äôs Understand It';
            funfactTextEl.textContent = question.explanation;
            funfactSubtext.textContent = question.more || '';
            funfactModal.style.display = 'flex';
        }

        function onContinueFromExplanation() {
            funfactModal.style.display = 'none';

            const topic = topics[currentTopicIndex];
            if (currentQuestionIndex < topic.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentTopicIndex, currentQuestionIndex);
            } else {
                // topic finished, unlock next
                const completedCount = topic.questions.filter(q => q._completed).length;
                if (completedCount === topic.questions.length && currentTopicIndex < topics.length - 1) {
                    topics[currentTopicIndex + 1].unlocked = true;
                }
                buildTopicMap();
                moveToNextAvailableTopicOrFinish();
            }
        }

        function moveToNextAvailableTopicOrFinish() {
            const nextIndex = topics.findIndex((t, idx) => idx > currentTopicIndex && t.unlocked && t.questions.some(q => !q._completed));
            if (nextIndex !== -1) {
                currentTopicIndex = nextIndex;
                currentQuestionIndex = 0;
                loadTopic(currentTopicIndex);
            } else {
                // check if all questions done
                const allDone = topics.every(t => t.questions.every(q => q._completed));
                if (allDone) {
                    clearInterval(timerInterval);
                    successModal.style.display = 'flex';
                }
            }
        }

        function updateScore(points) {
            score += points;
            if (score < 0) score = 0;
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            let label = 'Score: ';
            if (currentGameLanguage === 'or') label = '‡¨∏‡≠ç‡¨ï‡≠ã‡¨∞: ';
            if (currentGameLanguage === 'hi') label = '‡§∏‡•ç‡§ï‡•ã‡§∞: ';
            scoreEl.textContent = label + score;
        }

        function updateHintsDisplay() {
            let label = 'Hints: ';
            if (currentGameLanguage === 'or') label = '‡¨∏‡≠Ç‡¨ö‡¨®‡¨æ: ';
            if (currentGameLanguage === 'hi') label = '‡§∏‡§Ç‡§ï‡•á‡§§: ';
            hintsLeftEl.textContent = label + hintsLeft;
        }

        function updateProgress() {
            const percent = (answeredQuestions / totalQuestions) * 100;
            progressEl.style.width = percent + '%';
            overallProgressSmall.textContent = answeredQuestions;
        }

        function resetGame() {
            if (!confirm('Are you sure you want to reset the game? All progress will be lost.')) return;

            clearInterval(timerInterval);
            score = 0;
            hintsLeft = 3;
            timeRemaining = 1200;
            answeredQuestions = 0;

            topics.forEach((t, idx) => {
                t.questions.forEach(q => q._completed = false);
                t.unlocked = (idx === 0);
            });

            currentTopicIndex = 0;
            currentQuestionIndex = 0;
            successModal.style.display = 'none';

            updateScoreDisplay();
            updateHintsDisplay();
            updateProgress();

            buildTopicMap();
            loadTopic(0);
            startTimer();
        }
    </script>
</body>
</html>