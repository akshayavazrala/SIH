<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Number Trail - STEM Learn Odisha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles with Profile Controls */
        header {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo i {
            font-size: 1.8rem;
            color: #2a69ac;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-text h1 span {
            color: #38b2ac;
            font-weight: 800;
        }

        .logo-text p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 6px;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1rem;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .profile-container {
            position: relative;
        }

        .profile-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 30px;
            padding: 8px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .profile-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        .profile-dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 180px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .profile-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #f5f7fa;
        }

        .dropdown-item i {
            color: #3182ce;
            width: 20px;
        }

        /* Language Options */
        .language-options {
            position: absolute;
            top: 60px;
            right: 120px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 120px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .language-options.show {
            display: block;
        }

        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: #f5f7fa;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(rgba(14, 42, 71, 0.85), rgba(26, 54, 93, 0.9)), url('https://images.unsplash.com/photo-1555949963-aa79dcee981c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 0;
            text-align: center;
            position: relative;
        }

        .page-header h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .page-header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.95;
            font-weight: 300;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .breadcrumb-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .breadcrumb a {
            color: #64748b;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #3182ce;
        }

        .breadcrumb span {
            color: #64748b;
        }

        /* Game Container */
        .game-container {
            padding: 50px 0;
            min-height: 70vh;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        /* Game Info Panel */
        .game-info {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        .game-title {
            font-size: 1.8rem;
            color: #1a365d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .game-description {
            color: #64748b;
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-box {
            background: #f8fafc;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #3182ce;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #64748b;
        }

        .game-instructions {
            background: #f0f9ff;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #3182ce;
        }

        .instructions-title {
            font-weight: 600;
            color: #1a365d;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions-list {
            list-style: none;
            padding-left: 0;
        }

        .instructions-list li {
            margin-bottom: 8px;
            color: #4a5568;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .instructions-list li i {
            color: #3182ce;
            margin-top: 2px;
        }

        /* Game Play Area */
        .game-play-area {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Trail Display */
        .trail-display {
            position: relative;
            height: 400px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: linear-gradient(to top, #8b7355, #a89178);
            z-index: 1;
        }

        .water {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to top, #3182ce, #2b6cb0);
            z-index: 0;
        }

        .stone {
            position: absolute;
            width: 80px;
            height: 50px;
            background: linear-gradient(135deg, #a8a8a8, #8c8c8c);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            z-index: 2;
            border: 2px solid transparent;
        }

        .stone:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .stone.natural {
            background: linear-gradient(135deg, #48bb78, #38a169);
            border-color: #2f855a;
        }

        .stone.non-natural {
            background: linear-gradient(135deg, #f56565, #e53e3e);
            border-color: #c53030;
        }

        .stone.selected {
            animation: pulse 1s infinite;
            box-shadow: 0 0 20px rgba(56, 178, 172, 0.7);
        }

        .stone-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Character */
        .character {
            position: absolute;
            width: 60px;
            height: 80px;
            bottom: 80px;
            left: 50px;
            transition: all 0.5s ease;
            z-index: 3;
        }

        .character-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3182ce, #2b6cb0);
            border-radius: 50% 50% 40% 40%;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .character-face {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .character-eyes {
            display: flex;
            gap: 8px;
        }

        .character-eye {
            width: 8px;
            height: 8px;
            background: #3182ce;
            border-radius: 50%;
        }

        .character-legs {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 20px;
            display: flex;
            justify-content: space-around;
        }

        .character-leg {
            width: 8px;
            height: 20px;
            background: #2b6cb0;
            border-radius: 4px;
        }

        .character.falling {
            animation: fall 1s ease-in forwards;
        }

        .character.walking {
            animation: walk 0.5s infinite alternate;
        }

        @keyframes walk {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(300px) rotate(90deg); opacity: 0; }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(56, 178, 172, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(56, 178, 172, 0); }
            100% { box-shadow: 0 0 0 0 rgba(56, 178, 172, 0); }
        }

        /* Level Indicator */
        .level-display {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #38b2ac 0%, #2c9a94 100%);
            border-radius: 10px;
            color: white;
            margin-bottom: 20px;
        }

        .level-label {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .level-value {
            font-size: 2rem;
            font-weight: 700;
        }

        /* Number Information */
        .number-info {
            background: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }

        .info-title {
            font-weight: 600;
            color: #1a365d;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-text {
            color: #4a5568;
            line-height: 1.6;
        }

        .natural-numbers-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .natural-number {
            padding: 5px 10px;
            background: #c6f6d5;
            border: 1px solid #9ae6b4;
            border-radius: 5px;
            font-weight: 600;
            color: #22543d;
        }

        .non-natural-number {
            padding: 5px 10px;
            background: #fed7d7;
            border: 1px solid #fc8181;
            border-radius: 5px;
            font-weight: 600;
            color: #742a2a;
        }

        /* Game Controls */
        .game-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #3182ce;
            color: white;
        }

        .btn-primary:hover {
            background: #2b6cb0;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #38b2ac;
            color: white;
        }

        .btn-success:hover {
            background: #2c9a94;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #e53e3e;
            color: white;
        }

        .btn-danger:hover {
            background: #c53030;
            transform: translateY(-2px);
        }

        /* Timer Display */
        .timer-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e53e3e;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Feedback Messages */
        .feedback-message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 600;
            display: none;
        }

        .feedback-success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
            display: block;
        }

        .feedback-error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
            display: block;
        }

        /* Score System */
        .score-system {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #4a5568;
        }

        .score-value {
            font-weight: 700;
            color: #3182ce;
            font-size: 1.2rem;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 20px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .progress-bar-container {
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38b2ac);
            border-radius: 5px;
            transition: width 0.5s ease;
            width: 0%;
        }

        /* Resources Section */
        .resources-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .resource-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .resource-icon {
            font-size: 2.5rem;
            color: #3182ce;
            margin-bottom: 15px;
        }

        .resource-title {
            font-size: 1.1rem;
            color: #1a365d;
            margin-bottom: 10px;
        }

        .resource-desc {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #38b2ac;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .download-btn:hover {
            background: #2c9a94;
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 50px 0 20px;
            margin-top: 50px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-about {
            padding-right: 20px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .footer-logo-icon {
            font-size: 1.8rem;
            background: #38b2ac;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-logo-text {
            font-size: 1.6rem;
            font-weight: 700;
        }

        .footer-about p {
            color: #cbd5e1;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .footer-links h3 {
            margin-bottom: 20px;
            color: #38b2ac;
            font-size: 1.2rem;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #2d3748;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .social-links a:hover {
            background: #38b2ac;
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #2d3748;
            color: #a0aec0;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
           
            nav ul {
                gap: 15px;
            }
            
            .page-header h1 {
                font-size: 2.2rem;
            }
            
            .game-stats {
                grid-template-columns: 1fr;
            }
            
            .control-buttons {
                flex-wrap: wrap;
            }
            
            .trail-display {
                height: 300px;
            }
            
            .stone {
                width: 60px;
                height: 40px;
            }
            
            .stone-number {
                font-size: 1.2rem;
            }
        }

        /* Odia font support */
        .odia-text {
            font-family: 'Kalinga', 'Nirmala UI', 'Segoe UI', sans-serif;
        }

        /* Splash Animation */
        .splash {
            position: absolute;
            width: 50px;
            height: 50px;
            background: rgba(56, 178, 172, 0.7);
            border-radius: 50%;
            animation: splash 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 4;
        }

        @keyframes splash {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-atom"></i>
            </div>
            <div class="logo-text">
                <h1>STEM Learn Odisha</h1>
                <p>Gamified Learning Platform</p>
            </div>
        </div>
       
        <nav>
            <ul>
                <li><a href="student-dashboard.html" id="navDashboard">Dashboard</a></li>
                <li><a href="mathematics.html" id="navMathematics">Mathematics</a></li>
                <li><a href="scienceidx.html" id="navCurriculum">Curriculum</a></li>
                <li><a href="fractions.html" id="navFractions">Fractions</a></li>
            </ul>
        </nav>
       
        <div class="header-controls">
            <button class="control-btn" id="languageToggle">
                <i class="fas fa-globe"></i>
            </button>
           
            <div class="profile-container">
                <button class="profile-btn" id="profileToggle">
                    <img src="" alt="Profile" class="profile-pic" id="headerProfilePic">
                    <span id="headerUserName">Student</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
               
                <div class="profile-dropdown" id="profileDropdown">
                    <a href="#" class="dropdown-item" id="dropdownProfile">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </a>
                    <a href="#" class="dropdown-item" id="dropdownSettings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                    <a href="#" class="dropdown-item" id="dropdownLogout">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Language Options -->
    <div class="language-options" id="languageOptions">
        <div class="language-option" data-lang="en">English</div>
        <div class="language-option" data-lang="or">ଓଡ଼ିଆ</div>
    </div>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 data-translate="page-title">Natural Number Trail</h1>
            <p data-translate="page-desc">Help the character cross the river by stepping only on natural number stones! Avoid zeros and negative numbers.</p>
        </div>
    </section>

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="container">
            <div class="breadcrumb-content">
                <a href="student-dashboard.html" data-translate="breadcrumb-home">Home</a>
                <span>/</span>
                <a href="mathematics.html" data-translate="breadcrumb-math">Mathematics</a>
                <span>/</span>
                <span data-translate="breadcrumb-topic">Natural Number Trail</span>
            </div>
        </div>
    </section>

    <!-- Game Container -->
    <section class="game-container">
        <div class="container">
            <div class="game-area">
                <!-- Game Information Panel -->
                <div class="game-info">
                    <h2 class="game-title">
                        <i class="fas fa-hiking"></i>
                        <span data-translate="game-title">Natural Number Trail</span>
                    </h2>
                    
                    <div class="game-description" data-translate="game-description">
                        Help your character cross the river safely! Step only on stones with natural numbers (1, 2, 3, ...).
                        Avoid stones with zeros or negative numbers, or your character will fall into the water!
                    </div>
                    
                    <div class="game-stats">
                        <div class="stat-box">
                            <div class="stat-value" id="scoreValue">0</div>
                            <div class="stat-label" data-translate="stat-score">Score</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="levelValue">1</div>
                            <div class="stat-label" data-translate="stat-level">Level</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="correctValue">0</div>
                            <div class="stat-label" data-translate="stat-correct">Safe Steps</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="timeValue">60</div>
                            <div class="stat-label" data-translate="stat-time">Time (s)</div>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span data-translate="progress-label">Trail Progress</span>
                            <span id="progressValue">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="trailProgress"></div>
                        </div>
                    </div>
                    
                    <div class="game-instructions">
                        <h3 class="instructions-title">
                            <i class="fas fa-info-circle"></i>
                            <span data-translate="instructions-title">How to Play:</span>
                        </h3>
                        <ul class="instructions-list">
                            <li>
                                <i class="fas fa-shoe-prints"></i>
                                <span data-translate="instruction1">Click on stones to make your character step on them</span>
                            </li>
                            <li>
                                <i class="fas fa-check-circle"></i>
                                <span data-translate="instruction2">Only step on natural numbers (1, 2, 3, 4, ...)</span>
                            </li>
                            <li>
                                <i class="fas fa-times-circle"></i>
                                <span data-translate="instruction3">Avoid zeros (0) and negative numbers (-1, -2, ...)</span>
                            </li>
                            <li>
                                <i class="fas fa-trophy"></i>
                                <span data-translate="instruction4">Reach the end of the trail to complete the level</span>
                            </li>
                            <li>
                                <i class="fas fa-clock"></i>
                                <span data-translate="instruction5">Complete quickly for bonus points!</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="number-info">
                        <h3 class="info-title">
                            <i class="fas fa-lightbulb"></i>
                            <span data-translate="what-are-natural">What are Natural Numbers?</span>
                        </h3>
                        <p class="info-text" data-translate="natural-definition">
                            Natural numbers are counting numbers starting from 1: 1, 2, 3, 4, 5, ...
                            They do NOT include zero or negative numbers.
                        </p>
                        <div class="natural-numbers-list">
                            <span class="natural-number" data-translate="example-natural">1, 2, 3, 4, 5</span>
                            <span class="non-natural-number" data-translate="example-non-natural">0, -1, -2, -3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Game Play Area -->
                <div class="game-play-area">
                    <!-- Level Display -->
                    <div class="level-display">
                        <div class="level-label" data-translate="level-label">Current Level</div>
                        <div class="level-value" id="currentLevel">1</div>
                    </div>
                    
                    <!-- Trail Display -->
                    <div class="trail-display" id="trailDisplay">
                        <div class="water"></div>
                        <div class="ground"></div>
                        <div class="character" id="character">
                            <div class="character-body">
                                <div class="character-face">
                                    <div class="character-eyes">
                                        <div class="character-eye"></div>
                                        <div class="character-eye"></div>
                                    </div>
                                </div>
                                <div class="character-legs">
                                    <div class="character-leg"></div>
                                    <div class="character-leg"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Stones will be generated by JavaScript -->
                    </div>
                    
                    <!-- Feedback Message -->
                    <div class="feedback-message" id="feedbackMessage"></div>
                    
                    <!-- Game Controls -->
                    <div class="game-controls">
                        <div class="control-buttons">
                            <button class="btn btn-primary" id="startBtn">
                                <i class="fas fa-play"></i>
                                <span data-translate="start-btn">Start Game</span>
                            </button>
                            <button class="btn btn-secondary" id="resetBtn">
                                <i class="fas fa-redo"></i>
                                <span data-translate="reset-btn">Reset Level</span>
                            </button>
                            <button class="btn btn-success" id="nextBtn" disabled>
                                <i class="fas fa-forward"></i>
                                <span data-translate="next-btn">Next Level</span>
                            </button>
                        </div>
                        
                        <div class="timer-display">
                            <i class="fas fa-clock"></i>
                            <span id="timerDisplay">60</span>
                        </div>
                    </div>
                    
                    <div class="score-system">
                        <i class="fas fa-star"></i>
                        <span data-translate="score-label">Current Score:</span>
                        <span class="score-value" id="currentScore">0</span>
                    </div>
                </div>
            </div>
            
            <!-- Resources Section -->
            <div class="resources-section">
                <h2 class="learning-title">
                    <i class="fas fa-download"></i>
                    <span data-translate="resources-title">Learning Resources</span>
                </h2>

                <div class="resources-grid">
                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3 class="resource-title" data-translate="resource1-title">Natural Numbers Guide</h3>
                        <p class="resource-desc" data-translate="resource1-desc">Complete guide to understanding natural numbers</p>
                        <a href="#" class="download-btn">
                            <i class="fas fa-download"></i>
                            <span data-translate="download-english">Download (English)</span>
                        </a>
                    </div>

                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3 class="resource-title" data-translate="resource2-title">ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଗାଇଡ୍</h3>
                        <p class="resource-desc" data-translate="resource2-desc">ପ୍ରାକୃତିକ ସଂଖ୍ୟା ବୁଝିବା ପାଇଁ ସମ୍ପୂର୍ଣ୍ଣ ଗାଇଡ୍</p>
                        <a href="#" class="download-btn">
                            <i class="fas fa-download"></i>
                            <span data-translate="download-odia">Download (ଓଡ଼ିଆ)</span>
                        </a>
                    </div>

                    <div class="resource-card">
                        <div class="resource-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h3 class="resource-title" data-translate="resource3-title">Practice Worksheets</h3>
                        <p class="resource-desc" data-translate="resource3-desc">Interactive worksheets for natural numbers practice</p>
                        <a href="#" class="download-btn">
                            <i class="fas fa-download"></i>
                            <span data-translate="download-worksheets">Download Worksheets</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">
                        <div class="footer-logo-icon">
                            <i class="fas fa-atom"></i>
                        </div>
                        <div class="footer-logo-text">STEM Learn Odisha</div>
                    </div>
                    <p data-translate="footer-desc">Making Science and Mathematics education engaging and relevant for Class 6 students in Odisha through localized content and interactive learning.</p>
                </div>

                <div class="footer-links">
                    <h3 data-translate="quick-links">Quick Links</h3>
                    <ul>
                        <li><a href="student-dashboard.html"><i class="fas fa-tachometer-alt"></i> <span data-translate="nav-dashboard">Dashboard</span></a></li>
                        <li><a href="mathematics.html"><i class="fas fa-calculator"></i> <span data-translate="nav-mathematics">Mathematics</span></a></li>
                        <li><a href="fractions.html"><i class="fas fa-divide"></i> <span data-translate="nav-fractions">Fractions</span></a></li>
                        <li><a href="scienceidx.html"><i class="fas fa-book"></i> <span data-translate="nav-curriculum">Curriculum</span></a></li>
                    </ul>
                </div>

                <div class="footer-links">
                    <h3 data-translate="contact-us">Contact Us</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> <span data-translate="footer-address">Department of Education, Bhubaneswar</span></a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> +91 674 123 4567</a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> info@stemlearnodisha.com</a></li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p data-translate="copyright">© 2023 STEM Learn Odisha. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('user'));
           
            if (!user) {
                // Redirect to login if not authenticated
                window.location.href = 'student-login.html';
                return;
            }
           
            // Load user data
            loadUserData(user);
            
            // Initialize the game
            initGame();
        });

        // Load user data into the page
        function loadUserData(user) {
            document.getElementById('headerUserName').textContent = user.fullName;
            document.getElementById('headerProfilePic').src = user.profilePicture ? `uploads/${user.profilePicture}` : 'default-profile.png';
        }

        // Game Variables
        let score = 0;
        let level = 1;
        let correctSteps = 0;
        let timer = 60;
        let timerInterval;
        let isGameActive = false;
        let currentStoneIndex = 0;
        let stones = [];
        let totalStones = 8;
        let characterPosition = 50;

        // Game Configuration
        const gameConfig = {
            maxLevel: 5,
            timePerLevel: 60,
            scoreCorrectStep: 50,
            scoreLevelComplete: 500,
            scoreTimeBonus: 100,
            timeBonusThreshold: 30
        };

        // Level configurations
        const levelConfig = {
            1: { naturalRatio: 0.8, maxNumber: 10, negativeChance: 0.1 },
            2: { naturalRatio: 0.7, maxNumber: 20, negativeChance: 0.2 },
            3: { naturalRatio: 0.6, maxNumber: 30, negativeChance: 0.3 },
            4: { naturalRatio: 0.5, maxNumber: 50, negativeChance: 0.4 },
            5: { naturalRatio: 0.4, maxNumber: 100, negativeChance: 0.5 }
        };

        // Translations
        const translations = {
            en: {
                'nav-dashboard': 'Dashboard',
                'nav-mathematics': 'Mathematics',
                'nav-curriculum': 'Curriculum',
                'nav-fractions': 'Fractions',
                'page-title': 'Natural Number Trail',
                'page-desc': 'Help the character cross the river by stepping only on natural number stones! Avoid zeros and negative numbers.',
                'breadcrumb-home': 'Home',
                'breadcrumb-math': 'Mathematics',
                'breadcrumb-topic': 'Natural Number Trail',
                'game-title': 'Natural Number Trail',
                'game-description': 'Help your character cross the river safely! Step only on stones with natural numbers (1, 2, 3, ...). Avoid stones with zeros or negative numbers, or your character will fall into the water!',
                'stat-score': 'Score',
                'stat-level': 'Level',
                'stat-correct': 'Safe Steps',
                'stat-time': 'Time (s)',
                'progress-label': 'Trail Progress',
                'instructions-title': 'How to Play:',
                'instruction1': 'Click on stones to make your character step on them',
                'instruction2': 'Only step on natural numbers (1, 2, 3, 4, ...)',
                'instruction3': 'Avoid zeros (0) and negative numbers (-1, -2, ...)',
                'instruction4': 'Reach the end of the trail to complete the level',
                'instruction5': 'Complete quickly for bonus points!',
                'what-are-natural': 'What are Natural Numbers?',
                'natural-definition': 'Natural numbers are counting numbers starting from 1: 1, 2, 3, 4, 5, ... They do NOT include zero or negative numbers.',
                'example-natural': '1, 2, 3, 4, 5',
                'example-non-natural': '0, -1, -2, -3',
                'level-label': 'Current Level',
                'start-btn': 'Start Game',
                'reset-btn': 'Reset Level',
                'next-btn': 'Next Level',
                'score-label': 'Current Score:',
                'resources-title': 'Learning Resources',
                'resource1-title': 'Natural Numbers Guide',
                'resource1-desc': 'Complete guide to understanding natural numbers',
                'download-english': 'Download (English)',
                'resource2-title': 'Natural Numbers Guide',
                'resource2-desc': 'Complete guide to understanding natural numbers',
                'download-odia': 'Download (Odia)',
                'resource3-title': 'Practice Worksheets',
                'resource3-desc': 'Interactive worksheets for natural numbers practice',
                'download-worksheets': 'Download Worksheets',
                'footer-desc': 'Making Science and Mathematics education engaging and relevant for Class 6 students in Odisha through localized content and interactive learning.',
                'quick-links': 'Quick Links',
                'contact-us': 'Contact Us',
                'footer-address': 'Department of Education, Bhubaneswar',
                'copyright': '© 2023 STEM Learn Odisha. All rights reserved.'
            },
            or: {
                'nav-dashboard': 'ଡ୍ୟାସବୋର୍ଡ',
                'nav-mathematics': 'ଗଣିତ',
                'nav-curriculum': 'ପାଠ୍ୟକ୍ରମ',
                'nav-fractions': 'ଭଗ୍ନାଂଶ',
                'page-title': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଟ୍ରେଲ୍',
                'page-desc': 'କେବଳ ପ୍ରାକୃତିକ ସଂଖ୍ୟା ପଥର ଉପରେ ପଦକ୍ଷେପ କରି ଚରିତ୍ରକୁ ନଦୀ ପାର କରାଇବାରେ ସାହାଯ୍ୟ କରନ୍ତୁ! ଶୂନ୍ୟ ଏବଂ ନକାରାତ୍ମକ ସଂଖ୍ୟାଗୁଡିକୁ ଏଡାନ୍ତୁ।',
                'breadcrumb-home': 'ମୁଖ୍ୟ ପୃଷ୍ଠା',
                'breadcrumb-math': 'ଗଣିତ',
                'breadcrumb-topic': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଟ୍ରେଲ୍',
                'game-title': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଟ୍ରେଲ୍',
                'game-description': 'ଆପଣଙ୍କର ଚରିତ୍ରକୁ ସୁରକ୍ଷିତ ଭାବରେ ନଦୀ ପାର କରାଇବାରେ ସାହାଯ୍ୟ କରନ୍ତୁ! କେବଳ ପ୍ରାକୃତିକ ସଂଖ୍ୟା (1, 2, 3, ...) ଥିବା ପଥର ଉପରେ ପଦକ୍ଷେପ କରନ୍ତୁ। ଶୂନ୍ୟ (0) କିମ୍ବା ନକାରାତ୍ମକ ସଂଖ୍ୟା (-1, -2, ...) ଥିବା ପଥରକୁ ଏଡାନ୍ତୁ, ନଚେତ୍ ଆପଣଙ୍କର ଚରିତ୍ର ପାଣିରେ ପଡିବ!',
                'stat-score': 'ସ୍କୋର',
                'stat-level': 'ସ୍ତର',
                'stat-correct': 'ସୁରକ୍ଷିତ ପଦକ୍ଷେପ',
                'stat-time': 'ସମୟ (ସେ.)',
                'progress-label': 'ଟ୍ରେଲ୍ ପ୍ରଗତି',
                'instructions-title': 'କିପରି ଖେଳିବେ:',
                'instruction1': 'ଆପଣଙ୍କର ଚରିତ୍ରକୁ ସେଗୁଡିକ ଉପରେ ପଦକ୍ଷେପ କରିବା ପାଇଁ ପଥର ଉପରେ କ୍ଲିକ୍ କରନ୍ତୁ',
                'instruction2': 'କେବଳ ପ୍ରାକୃତିକ ସଂଖ୍ୟା (1, 2, 3, 4, ...) ଉପରେ ପଦକ୍ଷେପ କରନ୍ତୁ',
                'instruction3': 'ଶୂନ୍ୟ (0) ଏବଂ ନକାରାତ୍ମକ ସଂଖ୍ୟା (-1, -2, ...) ଏଡାନ୍ତୁ',
                'instruction4': 'ସ୍ତର ସମାପ୍ତ କରିବା ପାଇଁ ଟ୍ରେଲ୍ ଶେଷରେ ପହଞ୍ଚନ୍ତୁ',
                'instruction5': 'ବୋନସ୍ ପଏଣ୍ଟ୍ ପାଇଁ ଶୀଘ୍ର ଶେଷ କରନ୍ତୁ!',
                'what-are-natural': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା କଣ?',
                'natural-definition': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟାଗୁଡିକ ହେଉଛି ଗଣନା ସଂଖ୍ୟା ଯାହା 1 ରୁ ଆରମ୍ଭ ହୋଇଥାଏ: 1, 2, 3, 4, 5, ... ସେଗୁଡ଼ିକରେ ଶୂନ୍ୟ କିମ୍ବା ନକାରାତ୍ମକ ସଂଖ୍ୟା ଅନ୍ତର୍ଭୁକ୍ତ ନୁହେଁ।',
                'example-natural': '1, 2, 3, 4, 5',
                'example-non-natural': '0, -1, -2, -3',
                'level-label': 'ବର୍ତ୍ତମାନର ସ୍ତର',
                'start-btn': 'ଖେଳ ଆରମ୍ଭ କରନ୍ତୁ',
                'reset-btn': 'ସ୍ତର ପୁନଃସ୍ଥାପନ କରନ୍ତୁ',
                'next-btn': 'ପରବର୍ତ୍ତୀ ସ୍ତର',
                'score-label': 'ବର୍ତ୍ତମାନର ସ୍କୋର:',
                'resources-title': 'ଶିକ୍ଷଣ ସମ୍ବଳ',
                'resource1-title': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଗାଇଡ୍',
                'resource1-desc': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ବୁଝିବା ପାଇଁ ସମ୍ପୂର୍ଣ୍ଣ ଗାଇଡ୍',
                'download-english': 'ଡାଉନଲୋଡ୍ (ଇଂରାଜୀ)',
                'resource2-title': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଗାଇଡ୍',
                'resource2-desc': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ବୁଝିବା ପାଇଁ ସମ୍ପୂର୍ଣ୍ଣ ଗାଇଡ୍',
                'download-odia': 'ଡାଉନଲୋଡ୍ (ଓଡ଼ିଆ)',
                'resource3-title': 'ଅଭ୍ୟାସ କାର୍ଯ୍ୟପତ୍ର',
                'resource3-desc': 'ପ୍ରାକୃତିକ ସଂଖ୍ୟା ଅଭ୍ୟାସ ପାଇଁ ଇଣ୍ଟରାକ୍ଟିଭ୍ କାର୍ଯ୍ୟପତ୍ର',
                'download-worksheets': 'କାର୍ଯ୍ୟପତ୍ର ଡାଉନଲୋଡ୍ କରନ୍ତୁ',
                'footer-desc': 'ଓଡ଼ିଶାର ଷଷ୍ଠ ଶ୍ରେଣୀର ଛାତ୍ରଛାତ୍ରୀମାନଙ୍କ ପାଇଁ ସ୍ଥାନୀୟ ବିଷୟବସ୍ତୁ ଏବଂ ଇଣ୍ଟରାକ୍ଟିଭ୍ ଶିକ୍ଷଣ ମାଧ୍ୟମରେ ବିଜ୍ଞାନ ଏବଂ ଗଣିତ ଶିକ୍ଷାକୁ ଆକର୍ଷଣୀୟ ଏବଂ ପ୍ରାସଙ୍ଗିକ କରିବା',
                'quick-links': 'ଶୀଘ୍ର ଲିଙ୍କ୍',
                'contact-us': 'ଆମ ସହିତ ଯୋଗାଯୋଗ କରନ୍ତୁ',
                'footer-address': 'ଶିକ୍ଷା ବିଭାଗ, ଭୁବନେଶ୍ୱର',
                'copyright': '© 2023 STEM ଲର୍ନ ଓଡ଼ିଶା। ସମସ୍ତ ଅଧିକାର ସଂରକ୍ଷିତ।'
            }
        };

        let currentLanguage = 'en';

        // Initialize the game
        function initGame() {
            // Reset game state
            score = 0;
            level = 1;
            correctSteps = 0;
            timer = gameConfig.timePerLevel;
            isGameActive = false;
            currentStoneIndex = 0;
            stones = [];
            characterPosition = 50;

            // Generate trail
            generateTrail();
            
            // Update UI
            updateGameUI();
            
            // Initialize buttons
            initButtons();
            
            // Initialize navigation
            initNavigation();
            
            // Set up language options
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                    document.getElementById('languageOptions').classList.remove('show');
                });
            });

            // Initialize with default language
            switchLanguage('en');
        }

        // Generate trail stones
        function generateTrail() {
            const trailDisplay = document.getElementById('trailDisplay');
            
            // Clear existing stones
            trailDisplay.querySelectorAll('.stone').forEach(stone => stone.remove());
            stones = [];
            
            // Get level configuration
            const config = levelConfig[level] || levelConfig[1];
            
            // Generate stones
            for (let i = 0; i < totalStones; i++) {
                // Determine if this should be a natural number
                const isNatural = Math.random() < config.naturalRatio;
                
                let number;
                if (isNatural) {
                    // Generate natural number (1 to maxNumber)
                    number = Math.floor(Math.random() * config.maxNumber) + 1;
                } else {
                    // Generate non-natural number (0 or negative)
                    if (Math.random() < 0.5) {
                        number = 0; // Zero
                    } else {
                        // Negative number
                        number = -Math.floor(Math.random() * config.maxNumber) - 1;
                    }
                }
                
                // Calculate stone position
                const xPosition = 100 + (i * 100); // Horizontal spacing
                const yPosition = 150 + (Math.random() * 100 - 50); // Some vertical variation
                
                // Create stone
                const stone = createStone(number, isNatural, xPosition, yPosition, i);
                trailDisplay.appendChild(stone);
                
                stones.push({
                    element: stone,
                    number: number,
                    isNatural: isNatural,
                    index: i,
                    x: xPosition,
                    y: yPosition
                });
            }
        }

        // Create a stone element
        function createStone(number, isNatural, x, y, index) {
            const stone = document.createElement('div');
            stone.className = `stone ${isNatural ? 'natural' : 'non-natural'}`;
            stone.style.left = `${x}px`;
            stone.style.bottom = `${y}px`;
            stone.setAttribute('data-index', index);
            
            const numberSpan = document.createElement('div');
            numberSpan.className = 'stone-number';
            numberSpan.textContent = number;
            
            stone.appendChild(numberSpan);
            
            // Add click event
            stone.addEventListener('click', function() {
                handleStoneClick(index);
            });
            
            return stone;
        }

        // Handle stone click
        function handleStoneClick(index) {
            if (!isGameActive) return;
            
            const stone = stones[index];
            const character = document.getElementById('character');
            const feedbackMessage = document.getElementById('feedbackMessage');
            
            // Check if this is the next stone in sequence
            if (index !== currentStoneIndex) {
                feedbackMessage.className = 'feedback-message feedback-error';
                feedbackMessage.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    ${currentLanguage === 'or' ? 
                        'ପ୍ରଥମେ ପରବର୍ତ୍ତୀ ପଥର ଉପରେ ପଦକ୍ଷେପ କରନ୍ତୁ!' : 
                        'Step on the next stone in sequence first!'}
                `;
                feedbackMessage.style.display = 'block';
                return;
            }
            
            // Move character to stone
            character.style.left = `${stone.x + 10}px`;
            character.classList.add('walking');
            
            // Check if stone is natural
            if (stone.isNatural) {
                // Correct step - natural number
                correctSteps++;
                score += gameConfig.scoreCorrectStep;
                
                // Visual feedback
                stone.classList.add('selected');
                
                // Show success message
                feedbackMessage.className = 'feedback-message feedback-success';
                feedbackMessage.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    ${currentLanguage === 'or' ? 
                        `ବହୁତ ଭଲ! ${stone.number} ହେଉଛି ଏକ ପ୍ରାକୃତିକ ସଂଖ୍ୟା। +${gameConfig.scoreCorrectStep} ପଏଣ୍ଟ୍` : 
                        `Excellent! ${stone.number} is a natural number. +${gameConfig.scoreCorrectStep} points`}
                `;
                feedbackMessage.style.display = 'block';
                
                // Move to next stone
                currentStoneIndex++;
                
                // Update progress
                updateProgress();
                
                // Check if level is complete
                if (currentStoneIndex === totalStones) {
                    completeLevel();
                }
                
            } else {
                // Wrong step - non-natural number
                stone.classList.add('selected');
                
                // Show splash effect
                createSplash(stone.x + 40, stone.y + 25);
                
                // Character falls
                character.classList.remove('walking');
                character.classList.add('falling');
                
                // Show error message
                feedbackMessage.className = 'feedback-message feedback-error';
                feedbackMessage.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    ${currentLanguage === 'or' ? 
                        `ଓହୋ! ${stone.number} ହେଉଛି ଏକ ପ୍ରାକୃତିକ ସଂଖ୍ୟା ନୁହେଁ। ଆପଣଙ୍କ ଚରିତ୍ର ପଡିଗଲା!` : 
                        `Oops! ${stone.number} is not a natural number. Your character fell!`}
                `;
                feedbackMessage.style.display = 'block';
                
                // End game
                endGame();
            }
            
            // Update game UI
            updateGameUI();
        }

        // Create splash effect
        function createSplash(x, y) {
            const splash = document.createElement('div');
            splash.className = 'splash';
            splash.style.left = `${x}px`;
            splash.style.bottom = `${y}px`;
            
            document.getElementById('trailDisplay').appendChild(splash);
            
            // Remove splash after animation
            setTimeout(() => {
                splash.remove();
            }, 500);
        }

        // Update progress bar
        function updateProgress() {
            const progress = (currentStoneIndex / totalStones) * 100;
            document.getElementById('trailProgress').style.width = `${progress}%`;
            document.getElementById('progressValue').textContent = `${Math.round(progress)}%`;
        }

        // Complete level
        function completeLevel() {
            isGameActive = false;
            clearInterval(timerInterval);
            
            // Level completion bonus
            let pointsEarned = gameConfig.scoreLevelComplete;
            
            // Time bonus
            if (timer > gameConfig.timeBonusThreshold) {
                pointsEarned += gameConfig.scoreTimeBonus;
            }
            
            score += pointsEarned;
            
            const feedbackMessage = document.getElementById('feedbackMessage');
            feedbackMessage.className = 'feedback-message feedback-success';
            feedbackMessage.innerHTML = `
                <i class="fas fa-trophy"></i>
                ${currentLanguage === 'or' ? 
                    `ଅଭିନନ୍ଦନ! ଆପଣ ସ୍ତର ${level} ସଫଳତାର ସହ ଶେଷ କରିଛନ୍ତି। +${pointsEarned} ପଏଣ୍ଟ୍` : 
                    `Congratulations! You completed Level ${level} successfully. +${pointsEarned} points`}
            `;
            feedbackMessage.style.display = 'block';
            
            // Enable next level button
            document.getElementById('nextBtn').disabled = false;
            
            // Update game UI
            updateGameUI();
            
            // Save progress
            saveProgress();
        }

        // End game (character fell)
        function endGame() {
            isGameActive = false;
            clearInterval(timerInterval);
            
            // Disable buttons
            document.getElementById('startBtn').disabled = true;
            document.getElementById('nextBtn').disabled = true;
            
            // Save progress
            saveProgress();
        }

        // Start game
        function startGame() {
            if (isGameActive) return;
            
            isGameActive = true;
            currentStoneIndex = 0;
            correctSteps = 0;
            timer = gameConfig.timePerLevel;
            
            // Reset character
            const character = document.getElementById('character');
            character.classList.remove('falling');
            character.classList.add('walking');
            character.style.left = '50px';
            
            // Reset stones
            stones.forEach(stone => {
                stone.element.classList.remove('selected');
            });
            
            // Reset feedback
            document.getElementById('feedbackMessage').style.display = 'none';
            
            // Update progress
            updateProgress();
            
            // Update UI
            updateGameUI();
            
            // Start timer
            startTimer();
            
            // Enable/disable buttons
            document.getElementById('startBtn').disabled = true;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
        }

        // Reset level
        function resetLevel() {
            isGameActive = false;
            clearInterval(timerInterval);
            currentStoneIndex = 0;
            correctSteps = 0;
            timer = gameConfig.timePerLevel;
            
            // Reset character
            const character = document.getElementById('character');
            character.classList.remove('falling', 'walking');
            character.style.left = '50px';
            
            // Reset stones
            stones.forEach(stone => {
                stone.element.classList.remove('selected');
            });
            
            // Reset feedback
            document.getElementById('feedbackMessage').style.display = 'none';
            
            // Update progress
            updateProgress();
            
            // Update UI
            updateGameUI();
            
            // Enable/disable buttons
            document.getElementById('startBtn').disabled = false;
            document.getElementById('resetBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
        }

        // Go to next level
        function nextLevel() {
            if (level < gameConfig.maxLevel) {
                level++;
                
                // Generate new trail
                generateTrail();
                
                // Reset game state
                resetLevel();
                
                // Update level display
                document.getElementById('currentLevel').textContent = level;
                document.getElementById('levelValue').textContent = level;
                
                // Show level up message
                const feedbackMessage = document.getElementById('feedbackMessage');
                feedbackMessage.className = 'feedback-message feedback-success';
                feedbackMessage.innerHTML = `
                    <i class="fas fa-level-up-alt"></i>
                    ${currentLanguage === 'or' ? 
                        `ଅଭିନନ୍ଦନ! ଆପଣ ସ୍ତର ${level} କୁ ଉନ୍ନତି ପାଇଲେ!` : 
                        `Congratulations! You advanced to Level ${level}!`}
                `;
                feedbackMessage.style.display = 'block';
            } else {
                // Game completed
                const feedbackMessage = document.getElementById('feedbackMessage');
                feedbackMessage.className = 'feedback-message feedback-success';
                feedbackMessage.innerHTML = `
                    <i class="fas fa-crown"></i>
                    ${currentLanguage === 'or' ? 
                        'ବହୁତ ଭଲ! ଆପଣ ସମସ୍ତ ସ୍ତର ଶେଷ କରିଛନ୍ତି! ଆପଣ ପ୍ରାକୃତିକ ସଂଖ୍ୟାର ମାଷ୍ଟର ହୋଇଛନ୍ତି!' : 
                        'Amazing! You completed all levels! You are now a master of natural numbers!'}
                `;
                feedbackMessage.style.display = 'block';
                
                document.getElementById('nextBtn').disabled = true;
            }
        }

        // Timer functions
        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (timer > 0 && isGameActive) {
                    timer--;
                    updateTimerDisplay();
                } else if (timer === 0) {
                    timeUp();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            document.getElementById('timerDisplay').textContent = timer;
            document.getElementById('timeValue').textContent = timer;
            
            // Change color when time is running low
            if (timer <= 10) {
                document.getElementById('timerDisplay').style.color = '#e53e3e';
            } else if (timer <= 30) {
                document.getElementById('timerDisplay').style.color = '#d69e2e';
            } else {
                document.getElementById('timerDisplay').style.color = '#3182ce';
            }
        }

        function timeUp() {
            isGameActive = false;
            clearInterval(timerInterval);
            
            const feedbackMessage = document.getElementById('feedbackMessage');
            feedbackMessage.className = 'feedback-message feedback-error';
            feedbackMessage.innerHTML = `
                <i class="fas fa-clock"></i>
                ${currentLanguage === 'or' ? 
                    'ସମୟ ଶେଷ! ପୁନର୍ବାର ଚେଷ୍ଟା କରିବା ପାଇଁ "ସ୍ତର ପୁନଃସ୍ଥାପନ କରନ୍ତୁ" କ୍ଲିକ୍ କରନ୍ତୁ।' : 
                    'Time\'s up! Click "Reset Level" to try again.'}
            `;
            feedbackMessage.style.display = 'block';
        }

        // Update game UI
        function updateGameUI() {
            document.getElementById('scoreValue').textContent = score;
            document.getElementById('levelValue').textContent = level;
            document.getElementById('correctValue').textContent = correctSteps;
            document.getElementById('currentScore').textContent = score;
            document.getElementById('timerDisplay').textContent = timer;
            document.getElementById('timeValue').textContent = timer;
        }

        // Initialize buttons
        function initButtons() {
            // Start Button
            document.getElementById('startBtn').addEventListener('click', startGame);
            
            // Reset Button
            document.getElementById('resetBtn').addEventListener('click', resetLevel);
            
            // Next Button
            document.getElementById('nextBtn').addEventListener('click', nextLevel);
        }

        // Save progress to localStorage
        function saveProgress() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (user) {
                // Initialize game progress if not exists
                if (!user.gameProgress) {
                    user.gameProgress = {};
                }
                
                // Update natural numbers game progress
                if (!user.gameProgress.naturalNumbers) {
                    user.gameProgress.naturalNumbers = {
                        highScore: 0,
                        maxLevel: 0,
                        totalCorrect: 0
                    };
                }
                
                // Update values
                user.gameProgress.naturalNumbers.highScore = Math.max(user.gameProgress.naturalNumbers.highScore || 0, score);
                user.gameProgress.naturalNumbers.maxLevel = Math.max(user.gameProgress.naturalNumbers.maxLevel || 0, level);
                user.gameProgress.naturalNumbers.totalCorrect = (user.gameProgress.naturalNumbers.totalCorrect || 0) + correctSteps;
                
                // Save back to localStorage
                localStorage.setItem('user', JSON.stringify(user));
            }
        }

        // Initialize navigation
        function initNavigation() {
            const profileToggle = document.getElementById('profileToggle');
            const profileDropdown = document.getElementById('profileDropdown');
            const languageToggle = document.getElementById('languageToggle');
            const languageOptions = document.getElementById('languageOptions');
            const dropdownProfile = document.getElementById('dropdownProfile');
            const dropdownSettings = document.getElementById('dropdownSettings');
            const dropdownLogout = document.getElementById('dropdownLogout');
            const navDashboard = document.getElementById('navDashboard');
            const navMathematics = document.getElementById('navMathematics');
            const navCurriculum = document.getElementById('navCurriculum');
            const navFractions = document.getElementById('navFractions');

            // Profile dropdown toggle
            profileToggle.addEventListener('click', function() {
                profileDropdown.classList.toggle('show');
            });

            // Language toggle
            languageToggle.addEventListener('click', function() {
                languageOptions.classList.toggle('show');
            });

            // Navigation between pages
            dropdownProfile.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#profile';
            });

            dropdownSettings.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#settings';
            });

            dropdownLogout.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('user');
                window.location.href = 'student-login.html';
            });

            // Navigation menu items
            navDashboard.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html';
            });

            navMathematics.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'mathematics.html';
            });

            navCurriculum.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'scienceidx.html';
            });

            navFractions.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'fractions.html';
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#languageToggle') && !e.target.closest('#languageOptions')) {
                    languageOptions.classList.remove('show');
                }
               
                if (!e.target.closest('#profileToggle') && !e.target.closest('#profileDropdown')) {
                    profileDropdown.classList.remove('show');
                }
            });
        }

        // Switch language function
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            const map = translations[lang] || translations.en;
            
            // Update all text content
            Object.keys(map).forEach(key => {
                const elements = document.querySelectorAll(`[data-translate="${key}"]`);
                elements.forEach(element => {
                    element.textContent = map[key];
                });
            });
            
            // Add Odia font class for Odia text
            if (lang === 'or') {
                document.body.classList.add('odia-text');
            } else {
                document.body.classList.remove('odia-text');
            }
        }
    </script>
</body>
</html>