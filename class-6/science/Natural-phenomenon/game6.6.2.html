<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Lab ‚Äì Intermediate - STEM Learn Odisha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f0f7ff;
            color: #1e293b;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Language Switcher */
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(15, 23, 42, 0.85);
            border-radius: 25px;
            padding: 6px;
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
            white-space: nowrap;
        }

        .lang-btn.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .lang-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.12);
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            gap: 16px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 2.2rem;
            background: white;
            color: #2a69ac;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo-text span {
            color: #38b2ac;
            font-weight: 800;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 24px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 10px;
            border-radius: 8px;
            font-size: 0.98rem;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .mobile-menu-btn {
            display: none;
            font-size: 1.6rem;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(rgba(14, 42, 71, 0.85), rgba(26, 54, 93, 0.9)),
                        url('https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 60px 0;
            text-align: center;
        }

        .page-header h1 {
            font-size: 2.4rem;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .page-header p {
            font-size: 1.05rem;
            max-width: 700px;
            margin: 0 auto;
            opacity: 0.95;
            font-weight: 300;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: white;
            padding: 12px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.04);
        }

        .breadcrumb-content {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .breadcrumb a {
            color: #64748b;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #3182ce;
        }

        .breadcrumb span {
            color: #64748b;
        }

        /* Instructions Modal (from Code 1 style) */
        .instructions-modal {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
        }

        .instructions-content {
            background: white;
            border-radius: 18px;
            padding: 24px 22px 26px;
            max-width: 650px;
            width: 92%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.35);
        }

        .instructions-title {
            font-size: 1.6rem;
            color: #1a365d;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .instructions-subtitle {
            font-size: 0.95rem;
            color: #64748b;
            margin-bottom: 14px;
        }

        .instructions-list {
            margin-left: 18px;
            margin-bottom: 14px;
            font-size: 0.93rem;
            color: #4b5563;
        }

        .instructions-list li {
            margin-bottom: 6px;
        }

        .instructions-highlight {
            background: #eff6ff;
            border-radius: 10px;
            padding: 10px 10px;
            font-size: 0.9rem;
            color: #1d4ed8;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 10px;
        }

        .instructions-highlight i {
            margin-top: 2px;
        }

        .start-btn {
            margin-top: 6px;
            padding: 10px 22px;
            border-radius: 999px;
            border: none;
            background: #2563eb;
            color: white;
            font-size: 0.98rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .start-btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        /* GAME SECTION (Shadow Lab) ‚Äì wrapped in quiz-section like Code 1 */
        .shadow-game-section {
            padding: 32px 0 50px;
        }

        .quiz-section {
            padding: 32px 0 50px;
            display: none; /* shown after instructions start */
        }

        /* Stats bar from Code 1 */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: #4b5563;
        }

        .timer-box {
            padding: 6px 10px;
            border-radius: 999px;
            background: #fee2e2;
            color: #b91c1c;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .hints-box {
            padding: 6px 10px;
            border-radius: 999px;
            background: #fef3c7;
            color: #92400e;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .game-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .game-title-block {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .game-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1a365d;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge-level {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 10px;
            border-radius: 999px;
            font-size: 0.8rem;
            background: #fef2f2;
            color: #b91c1c;
            font-weight: 600;
        }

        .game-subtitle {
            font-size: 0.9rem;
            color: #64748b;
        }

        .game-card {
            background: white;
            border-radius: 16px;
            padding: 18px 16px 20px;
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
            border: 1px solid #e2e8f0;
        }

        .game-layout {
            display: grid;
            grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
            gap: 14px;
            align-items: stretch;
        }

        /* SIMULATOR AREA */
        #gameContainer {
            width: 100%;
            height: 420px;
            display: flex;
            flex-direction: column;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(15,23,42,0.15);
            background: #87CEEB;
        }

        /* Give more height to ground so object is not cut by sky */
        #skySection {
            flex: 2.2;
            position: relative;
            background: linear-gradient(to bottom, #87CEEB, #6BB6FF);
            transition: background 0.3s ease;
        }

        #groundSection {
            flex: 2.8;
            background:
                linear-gradient(to top, rgba(0,0,0,0.25), transparent 35%),
                linear-gradient(to bottom, #2e7d32, #1b5e20);
            position: relative;
            overflow: visible; /* allow full tree to show */
            border-top: 4px solid #14532d;
        }

        /* Sun */
        #sun {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            cursor: move;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.8);
            z-index: 30;
            transition: left 0.1s ease, top 0.1s ease;
        }

        #sun::before {
            content: '';
            position: absolute;
            inset: -20px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3), transparent);
            border-radius: 50%;
            z-index: -1;
        }

        /* ===================== OBJECT TREE DESIGN ===================== */
        .object-tree {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 160px;
            z-index: 5;
        }

        .object-tree .trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 26px;
            height: 70px;
            background: linear-gradient(to right, #5b3412, #7a4a1f);
            border-radius: 10px;
            transform: translateX(-50%);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .object-tree .canopy {
            position: absolute;
            background: radial-gradient(circle at 30% 20%, #76d87a, #2f7d32);
            border-radius: 50%;
            box-shadow: 0 8px 10px rgba(0,0,0,0.25);
        }

        .object-tree .canopy.main {
            width: 120px;
            height: 100px;
            bottom: 50px;
            left: 0;
        }

        .object-tree .canopy.left {
            width: 70px;
            height: 70px;
            bottom: 80px;
            left: -10px;
        }

        .object-tree .canopy.right {
            width: 70px;
            height: 70px;
            bottom: 80px;
            right: -10px;
        }

        .object-tree .canopy.top {
            width: 90px;
            height: 70px;
            bottom: 110px;
            left: 15px;
        }

        /* Shadow of object */
        #objectShadow {
            position:absolute;
            bottom:40px;
            left:50%;
            width:170px;
            height:80px;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.88), rgba(0,0,0,0.45), transparent);
            transform-origin:center bottom;
            z-index:5;
            filter:blur(4px);
            opacity:0.95;
            transition: transform 0.12s ease, opacity 0.12s ease;
        }

        /* Clock */
        #clockDisplay {
            position: absolute;
            top: 14px;
            right: 14px;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
            z-index: 20;
        }

        .analog-clock {
            width: 78px;
            height: 78px;
            border: 4px solid #333;
            border-radius: 50%;
            position: relative;
            margin-bottom: 8px;
        }

        .clock-marker {
            position: absolute;
            width: 2px;
            height: 8px;
            background: #666;
            left: 50%;
            top: 4px;
            transform-origin: center 35px;
        }

        .hour-hand {
            position: absolute;
            width: 4px;
            height: 24px;
            background: #333;
            left: 50%;
            top: 50%;
            transform-origin: center bottom;
            border-radius: 2px;
        }

        .minute-hand {
            position: absolute;
            width: 3px;
            height: 32px;
            background: #1e90ff;
            left: 50%;
            top: 50%;
            transform-origin: center bottom;
            border-radius: 2px;
        }

        .clock-center {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #333;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        #digitalTime {
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
        }

        /* HUD (numeric info) */
        .hud-bar {
            position: absolute;
            left: 14px;
            top: 14px;
            background: rgba(15,23,42,0.85);
            color: #e5e7eb;
            padding: 6px 10px;
            border-radius: 999px;
            font-size: 0.78rem;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 25;
        }

        .hud-pill {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .hud-label {
            opacity: 0.8;
        }

        .hud-value {
            font-weight: 600;
        }

        /* Info / Challenge Panel */
        .info-panel {
            background: #f8fafc;
            border-radius: 14px;
            border: 1px solid #e2e8f0;
            padding: 14px 14px 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-panel h2 {
            font-size: 1.1rem;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .info-panel p {
            color: #64748b;
            font-size: 0.92rem;
        }

        .stat-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 8px;
        }

        .stat-pill {
            background: #eff6ff;
            border-radius: 999px;
            padding: 4px 10px;
            font-size: 0.78rem;
            color: #1f2933;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .stat-pill span.emoji {
            font-size: 0.9rem;
        }

        #questionText {
            font-weight: 600;
            margin-bottom: 6px;
            color: #111827;
            font-size: 0.95rem;
        }

        #hintText {
            font-size: 0.86rem;
            color: #92400e;
            background: #fffbeb;
            border-radius: 10px;
            padding: 7px 9px;
            display: none;
            margin-top: 6px;
        }

        .panel-buttons {
            margin-top: 6px;
        }

        .btn {
            border: none;
            border-radius: 999px;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #2563eb;
            color: white;
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-hint {
            background: #fef3c7;
            color: #92400e;
        }

        .btn-hint:hover:not(:disabled) {
            background: #fde68a;
        }

        .btn-hint:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Success Popup */
        #successPopup {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        #successPopup.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .success-content {
            background: white;
            padding: 32px 28px;
            border-radius: 26px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: bounceIn 0.5s ease;
            max-width: 360px;
        }

        .success-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .success-content h3 {
            font-size: 1.45rem;
            color: #22c55e;
            margin-bottom: 4px;
        }

        .success-content p {
            color: #374151;
            font-size: 0.92rem;
            margin-bottom: 4px;
        }

        .success-fact {
            margin-top: 6px;
            font-size: 0.88rem;
            color: #0f172a;
            background:#eff6ff;
            border-radius:12px;
            padding:6px 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.5); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 40px 0 18px;
            margin-top: 40px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 30px;
            margin-bottom: 25px;
        }

        .footer-about {
            padding-right: 10px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .footer-logo-icon {
            font-size: 1.6rem;
            background: #38b2ac;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-logo-text {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .footer-about p {
            color: #cbd5e1;
            font-size: 0.9rem;
        }

        .footer-links h3 {
            margin-bottom: 12px;
            color: #38b2ac;
            font-size: 1rem;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
        }

        .copyright {
            text-align: center;
            padding-top: 10px;
            border-top: 1px solid #2d3748;
            color: #a0aec0;
            font-size: 0.8rem;
        }

        /* Indic font helper */
        .indic-text {
            font-family: 'Nirmala UI', 'Kalinga', 'Segoe UI', sans-serif;
        }

        @media (max-width: 900px) {
            .header-content {
                flex-wrap: wrap;
            }
            .game-layout {
                grid-template-columns: 1fr;
            }
            #gameContainer {
                height: 380px;
            }
        }

        @media (max-width: 768px) {
            nav ul {
                display: none;
                flex-direction: column;
                gap: 10px;
                background: #0f172a;
                position: absolute;
                top: 55px;
                right: 10px;
                padding: 10px 12px;
                border-radius: 10px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.3);
                min-width: 150px;
            }

            nav ul.show {
                display: flex;
            }

            .mobile-menu-btn {
                display: block;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .language-switcher {
                top: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</button>
        <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <div class="logo-text">STEM <span>Learn</span> Odisha</div>
                </div>

                <nav>
                    <ul>
                        <li><a href="student-dashboard.html" data-i18n="nav-dashboard">Dashboard</a></li>
                        <li><a href="about.html" data-i18n="nav-about">About</a></li>
                        <li><a href="contact.html" data-i18n="nav-contact">Contact</a></li>
                    </ul>
                </nav>

                <button class="mobile-menu-btn" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 data-i18n="page-title">Shadow Lab ‚Äì Sun, Shadow & Time</h1>
            <p data-i18n="page-desc">
                Drag the Sun and watch how the object‚Äôs shadow and the time on the clock change. Then explore scenario-based and numeric shadow challenges.
            </p>
        </div>
    </section>

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="container">
            <div class="breadcrumb-content">
                <a href="student-dashboard.html" data-i18n="breadcrumb-dashboard">Dashboard</a>
                <span>/</span>
                <span data-i18n="breadcrumb-natural">Natural Phenomena</span>
                <span>/</span>
                <span data-i18n="breadcrumb-shadow">Shadow Lab ‚Äì Intermediate</span>
            </div>
        </div>
    </section>

    <!-- Instructions Modal in Code 1 style -->
    <div class="instructions-modal" id="instructions-modal">
        <div class="instructions-content">
            <h2 class="instructions-title" data-i18n="instr-title">How to Play ‚Äì Shadow Lab</h2>
            <p class="instructions-subtitle" data-i18n="instr-subtitle">
                This is an interactive sun‚Äìshadow simulator with scene-based challenges. Read these steps before you start.
            </p>
            <ul class="instructions-list">
                <li data-i18n="instr-1">Drag the Sun left and right in the sky to see how the shadow changes in length and direction.</li>
                <li data-i18n="instr-2">Notice how the clock time changes from early morning to evening as you move the Sun.</li>
                <li data-i18n="instr-3">Tap ‚ÄúStart Scenes‚Äù to begin the game. You will match real-life scenes and numeric shadow challenges.</li>
                <li data-i18n="instr-4">You have limited time and limited hints. Use hints only when you are stuck.</li>
                <li data-i18n="instr-5">After every correct match, you will see a short science fact about shadows and the Sun.</li>
            </ul>
            <div class="instructions-highlight">
                <i class="fas fa-lightbulb"></i>
                <span data-i18n="instr-tip">
                    Tip: First explore freely by moving the Sun. When you feel confident, start the scenes and try to solve them without hints!
                </span>
            </div>
            <button class="start-btn" id="intro-start-btn">
                <i class="fas fa-play-circle"></i>
                <span data-i18n="instr-start-btn">Start Shadow Lab</span>
            </button>
        </div>
    </div>

    <!-- GAME SECTION now in Code 1 "quiz-section" style -->
    <section class="shadow-game-section quiz-section" id="quiz-section">
        <div class="container">
            <!-- Top stats bar like Code 1 -->
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="timer-box">
                        <i class="fas fa-clock"></i>
                        <span data-i18n="time-label">Time left:</span>
                        <span id="time-remaining">15:00</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="hints-box">
                        <i class="fas fa-lightbulb"></i>
                        <span data-i18n="hints-label">Hints left:</span>
                        <span id="hints-remaining">3</span>
                    </div>
                </div>
                <div class="stat-item">
                    <span data-i18n="score-label">Scenes solved:</span>
                    <span id="score-value">0</span> / <span id="score-total">6</span>
                </div>
            </div>

            <div class="game-header-row">
                <div class="game-title-block">
                    <div class="game-title">
                        <i class="fas fa-sun"></i>
                        <span data-i18n="game-title">Shadow Lab ‚Äì Intermediate Level</span>
                    </div>
                    <div class="game-subtitle" data-i18n="game-subtitle">
                        Move the Sun, observe the object‚Äôs shadow, and match real-life scenes plus length/angle questions.
                    </div>
                </div>
                <div class="badge-level">
                    <i class="fas fa-signal"></i>
                    <span data-i18n="level-intermediate">Intermediate</span>
                </div>
            </div>

            <div class="game-card">
                <div class="game-layout">
                    <!-- Left: Simulation -->
                    <div>
                        <div id="gameContainer">
                            <!-- Sky Section -->
                            <div id="skySection">
                                <!-- HUD -->
                                <div class="hud-bar">
                                    <div class="hud-pill">
                                        <span class="hud-label">‚òÄ %</span>
                                        <span class="hud-value" id="hudPos">50</span>
                                    </div>
                                    <div class="hud-pill">
                                        <span class="hud-label">‚è±</span>
                                        <span class="hud-value" id="hudTimeShort">12:00</span>
                                    </div>
                                    <div class="hud-pill">
                                        <span class="hud-label">üìè</span>
                                        <span class="hud-value" id="hudLen">1.0</span>
                                    </div>
                                    <div class="hud-pill">
                                        <span class="hud-label">‚Üó</span>
                                        <span class="hud-value" id="hudAngle">0¬∞</span>
                                    </div>
                                </div>

                                <!-- Sun -->
                                <div id="sun"></div>

                                <!-- Clock Display -->
                                <div id="clockDisplay">
                                    <div class="analog-clock" id="analogClock">
                                        <!-- markers by JS -->
                                        <div class="hour-hand" id="hourHand"></div>
                                        <div class="minute-hand" id="minuteHand"></div>
                                        <div class="clock-center"></div>
                                    </div>
                                    <div id="digitalTime">12:00 PM</div>
                                </div>
                            </div>

                            <!-- Ground Section -->
                            <div id="groundSection">
                                <!-- Object shadow + tree-shaped object -->
                                <div id="objectShadow"></div>
                                <div class="object-tree">
                                    <div class="trunk"></div>
                                    <div class="canopy main"></div>
                                    <div class="canopy left"></div>
                                    <div class="canopy right"></div>
                                    <div class="canopy top"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Info / Challenge -->
                    <div>
                        <div class="info-panel">
                            <!-- Intro -->
                            <div id="introContent">
                                <h2 data-i18n="intro-title">How this works</h2>
                                <p data-i18n="intro-text">
                                    Drag the Sun left and right in the sky. Watch how the object‚Äôs shadow changes in length and direction, and how the clock shows the time.
                                </p>
                                <p data-i18n="intro-tip">
                                    First explore freely. Then tap ‚ÄúStart Scenes‚Äù to match everyday scenes and solve length/angle shadow questions. After each correct answer, you‚Äôll see a science fact.
                                </p>
                                <div class="panel-buttons">
                                    <button class="btn btn-primary" id="startBtn">
                                        <i class="fas fa-play-circle"></i>
                                        <span data-i18n="btn-start">Start Scenes</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Challenge -->
                            <div id="challengeContent" style="display:none;">
                                <div class="stat-row" style="display:none;">
                                    <span class="stat-pill">
                                        <span class="emoji">üìå</span>
                                        <span data-i18n="label-question">Scene</span>
                                        <span id="qIndex">1</span>/<span id="qTotal">6</span>
                                    </span>
                                    <span class="stat-pill">
                                        <span class="emoji">‚è±</span>
                                        <span id="timerText">15:00</span>
                                    </span>
                                    <span class="stat-pill">
                                        <span class="emoji">üí°</span>
                                        <span id="hintsLeft">3</span>
                                        <span data-i18n="label-hints">hints</span>
                                    </span>
                                    <span class="stat-pill">
                                        <span class="emoji">‚≠ê</span>
                                        <span data-i18n="label-score">Score:</span>
                                        <span id="scoreText">0</span>
                                    </span>
                                </div>

                                <p style="font-weight:600; font-size:0.95rem; margin-bottom:4px;" data-i18n="challenge-heading">
                                    Scene to match:
                                </p>
                                <p id="questionText"></p>

                                <div class="panel-buttons">
                                    <button class="btn btn-hint" id="hintBtn">
                                        <i class="fas fa-lightbulb"></i>
                                        <span data-i18n="btn-hint">Use Hint</span>
                                    </button>
                                </div>
                                <div id="hintText"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Popup -->
    <div id="successPopup">
        <div class="success-content">
            <div class="success-icon" id="successIcon">üèÜ</div>
            <h3 id="successTitle">Correct!</h3>
            <p id="successMessage">Scene matched.</p>
            <div id="successFact" class="success-fact"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <div class="footer-logo">
                        <div class="footer-logo-icon">
                            <i class="fas fa-atom"></i>
                        </div>
                        <div class="footer-logo-text">STEM Learn Odisha</div>
                    </div>
                    <p data-i18n="footer-desc">
                        Making Science and Mathematics education engaging and relevant for students in Odisha through localized content and interactive learning.
                    </p>
                </div>

                <div class="footer-links">
                    <h3 data-i18n="quick-links">Quick Links</h3>
                    <ul>
                        <li><a href="student-dashboard.html"><i class="fas fa-home"></i> <span data-i18n="nav-dashboard">Dashboard</span></a></li>
                        <li><a href="about.html"><i class="fas fa-info-circle"></i> <span data-i18n="nav-about">About</span></a></li>
                        <li><a href="contact.html"><i class="fas fa-envelope"></i> <span data-i18n="nav-contact">Contact</span></a></li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p data-i18n="copyright">¬© 2023 STEM Learn Odisha. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --------- LANGUAGE + TRANSLATIONS ----------
        let currentLanguage = 'en';

        const translations = {
            en: {
                'nav-dashboard': 'Dashboard',
                'nav-about': 'About',
                'nav-contact': 'Contact',
                'page-title': 'Shadow Lab ‚Äì Sun, Shadow & Time',
                'page-desc': 'Drag the Sun and watch how the object‚Äôs shadow and the time on the clock change. Then explore scenario-based and numeric shadow challenges.',
                'breadcrumb-dashboard': 'Dashboard',
                'breadcrumb-natural': 'Natural Phenomena',
                'breadcrumb-shadow': 'Shadow Lab ‚Äì Intermediate',
                'game-title': 'Shadow Lab ‚Äì Intermediate Level',
                'game-subtitle': 'Move the Sun, observe the object‚Äôs shadow, and match real-life scenes plus length/angle questions.',
                'level-intermediate': 'Intermediate',

                'intro-title': 'How this works',
                'intro-text': 'Drag the Sun left and right in the sky. Watch how the object‚Äôs shadow changes in length and direction, and how the clock shows the time.',
                'intro-tip': 'First explore freely. Then tap ‚ÄúStart Scenes‚Äù to match everyday scenes and solve length/angle shadow questions. After each correct answer, you‚Äôll see a science fact.',
                'btn-start': 'Start Scenes',
                'label-question': 'Scene',
                'label-hints': 'hints',
                'label-score': 'Score:',
                'challenge-heading': 'Scene to match:',
                'btn-hint': 'Use Hint',

                /* New: instructions modal text (Code 1 style) */
                'instr-title': 'How to Play ‚Äì Shadow Lab',
                'instr-subtitle': 'This is an interactive sun‚Äìshadow simulator with scene-based challenges. Read these steps before you start.',
                'instr-1': 'Drag the Sun left and right in the sky to see how the shadow changes in length and direction.',
                'instr-2': 'Observe how the clock time moves from early morning to evening as you move the Sun.',
                'instr-3': 'Tap ‚ÄúStart Scenes‚Äù in the side panel to begin matching real-life scenes and numeric shadow challenges.',
                'instr-4': 'You have limited time and a limited number of hints. Use hints only when you are stuck.',
                'instr-5': 'After every correct answer, you will see a quick science fact about shadows and the Sun.',
                'instr-tip': 'Tip: First play freely. When you feel confident, start the scenes and try to solve as many as you can without hints!',
                'instr-start-btn': 'Start Shadow Lab',

                /* Top stats bar labels */
                'time-label': 'Time left:',
                'hints-label': 'Hints left:',
                'score-label': 'Scenes solved:',

                'footer-desc': 'Making Science and Mathematics education engaging and relevant for students in Odisha through localized content and interactive learning.',
                'quick-links': 'Quick Links',
                'copyright': '¬© 2023 STEM Learn Odisha. All rights reserved.'
            },
            or: {
                'nav-dashboard': '‡¨°‡≠ç‡≠ü‡¨æ‡¨∂‡¨¨‡≠ã‡¨∞‡≠ç‡¨°',
                'nav-about': '‡¨Ü‡¨Æ ‡¨¨‡¨ø‡¨∑‡≠ü‡¨∞‡≠á',
                'nav-contact': '‡¨Ø‡≠ã‡¨ó‡¨æ‡¨Ø‡≠ã‡¨ó',
                'page-title': '‡¨∂‡≠ç‡≠ü‡¨æ‡¨°‡≠ã ‡¨≤‡≠ç‡≠ü‡¨æ‡¨¨‡≠ç ‚Äì ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü, ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨∏‡¨Æ‡≠ü',
                'page-desc': '‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ‚Äì‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨ò‡¨°‡¨º‡¨ø‡¨∞ ‡¨∏‡¨Æ‡≠ü ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨¨‡¨¶‡¨≥‡≠Å‡¨õ‡¨ø ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨™‡¨∞‡≠á ‡¨¶‡≠É‡¨∂‡≠ç‡≠ü ‡¨Ü‡¨ß‡¨æ‡¨∞‡¨ø‡¨§ ‡¨∏‡¨ø‡¨®‡≠ç ‡¨ì ‡¨≤‡¨Æ‡≠ç‡¨¨/‡¨ï‡≠ã‡¨£ ‡¨Ü‡¨ß‡¨æ‡¨∞‡¨ø‡¨§ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨Æ‡¨ø‡¨≥‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'breadcrumb-dashboard': '‡¨°‡≠ç‡≠ü‡¨æ‡¨∂‡¨¨‡≠ã‡¨∞‡≠ç‡¨°',
                'breadcrumb-natural': '‡¨™‡≠ç‡¨∞‡¨æ‡¨ï‡≠É‡¨§‡¨ø‡¨ï ‡¨ò‡¨ü‡¨£‡¨æ',
                'breadcrumb-shadow': '‡¨∂‡≠ç‡≠ü‡¨æ‡¨°‡≠ã ‡¨≤‡≠ç‡≠ü‡¨æ‡¨¨‡≠ç ‚Äì ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨Æ ‡¨∏‡≠ç‡¨§‡¨∞',
                'game-title': '‡¨∂‡≠ç‡≠ü‡¨æ‡¨°‡≠ã ‡¨≤‡≠ç‡≠ü‡¨æ‡¨¨‡≠ç ‚Äì ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨Æ ‡¨∏‡≠ç‡¨§‡¨∞',
                'game-subtitle': '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨°‡≠ç‡¨∞‡¨æ‡¨ó‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å, ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨≤‡¨ï‡≠ç‡¨∑‡≠ç‡≠ü ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨∏‡¨ï‡¨æ‡¨≥, ‡¨¶‡≠Å‡¨™‡≠Å‡¨∞, ‡¨∏‡¨®‡≠ç‡¨ß‡≠ç‡≠ü‡¨æ ‡¨∏‡¨π ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨≤‡¨Æ‡≠ç‡¨¨/‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨Æ‡¨ø‡¨≥‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'level-intermediate': '‡¨Æ‡¨ß‡≠ç‡≠ü‡¨Æ ‡¨∏‡≠ç‡¨§‡¨∞',

                'intro-title': '‡¨è‡¨π‡¨æ ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨ï‡¨æ‡¨Æ ‡¨ï‡¨∞‡≠á',
                'intro-text': '‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ ‡¨ì ‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨°‡≠ç‡¨∞‡¨æ‡¨ó‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨≤‡¨Æ‡≠ç‡¨¨ ‡¨ì ‡¨¶‡¨ø‡¨ó ‡¨è‡¨¨‡¨Ç ‡¨ò‡¨°‡¨º‡¨ø‡¨∞ ‡¨∏‡¨Æ‡≠ü ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨¨‡¨¶‡¨≥‡≠Å‡¨õ‡¨ø ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'intro-tip': '‡¨™‡≠ç‡¨∞‡¨•‡¨Æ‡≠á ‡¨Ö‡¨≠‡≠ç‡≠ü‡¨æ‡¨∏ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨§‡¨æ‡¨™‡¨∞‡≠á ‚ÄúStart Scenes‚Äù ‡¨â‡¨™‡¨∞‡≠á ‡¨¶‡¨¨‡¨æ‡¨á ‡¨¶‡≠à‡¨®‡¨ø‡¨ï ‡¨∏‡¨ø‡¨®‡≠ç ‡¨ì ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨≤‡¨Æ‡≠ç‡¨¨/‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨Æ‡¨ø‡¨≥‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨™‡≠ç‡¨∞‡¨§‡≠ç‡≠ü‡≠á‡¨ï ‡¨†‡¨ø‡¨ï‡≠ç ‡¨â‡¨§‡≠ç‡¨§‡¨∞ ‡¨™‡¨∞‡≠á ‡¨è‡¨ï ‡¨¨‡≠à‡¨ú‡≠ç‡¨û‡¨æ‡¨®‡¨ø‡¨ï ‡¨§‡¨•‡≠ç‡≠ü ‡¨¶‡≠á‡¨ñ‡¨æ‡¨Ø‡¨ø‡¨¨‡•§',
                'btn-start': 'Scenes ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'label-question': '‡¨∏‡¨ø‡¨®‡≠ç',
                'label-hints': '‡¨π‡¨ø‡¨£‡≠ç‡¨ü',
                'label-score': '‡¨∏‡≠ç‡¨ï‡≠ã‡¨∞:',
                'challenge-heading': '‡¨Ø‡≠á‡¨â‡¨Å ‡¨∏‡¨ø‡¨®‡≠ç ‡¨Æ‡¨ø‡¨≥‡¨æ‡¨® ‡¨ï‡¨∞‡¨ø‡¨¨‡≠á:',
                'btn-hint': '‡¨π‡¨ø‡¨£‡≠ç‡¨ü ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',

                /* Instructions modal */
                'instr-title': '‡¨∂‡≠ç‡≠ü‡¨æ‡¨°‡≠ã ‡¨≤‡≠ç‡≠ü‡¨æ‡¨¨‡≠ç ‚Äì ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨ñ‡≠á‡¨≥‡¨ø‡¨¨‡≠á',
                'instr-subtitle': '‡¨è‡¨π‡¨æ ‡¨è‡¨ï ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‚Äì‡¨õ‡¨æ‡≠ü‡¨æ ‡¨∏‡¨ø‡¨Æ‡≠ç‡≠ü‡≠Å‡¨≤‡≠á‡¨ü‡¨∞‡≠ç ‡¨∏‡¨π ‡¨¶‡≠É‡¨∂‡≠ç‡≠ü ‡¨Ü‡¨ß‡¨æ‡¨∞‡¨ø‡¨§ ‡¨ö‡≠ç‡≠ü‡¨æ‡¨≤‡≠á‡¨û‡≠ç‡¨ú ‡¨Ü‡¨õ‡¨ø‡•§ ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨™‡≠Ç‡¨∞‡≠ç‡¨¨‡¨∞‡≠Å ‡¨è‡¨π‡¨ø ‡¨™‡¨¶‡¨ï‡≠ç‡¨∞‡¨Æ ‡¨™‡¨¢‡¨º‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-1': '‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ‚Äì‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨°‡≠ç‡¨∞‡¨æ‡¨ó‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨≤‡¨Æ‡≠ç‡¨¨ ‡¨ì ‡¨¶‡¨ø‡¨ó ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨¨‡¨¶‡¨≥‡≠Å‡¨õ‡¨ø ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-2': '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨ò‡≠Å‡¨û‡≠ç‡¨ö‡¨ø‡¨¨‡¨æ ‡¨∏‡¨π ‡¨ò‡¨°‡¨º‡¨ø‡¨∞ ‡¨∏‡¨Æ‡≠ü ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨∏‡¨ï‡¨æ‡¨≥‡¨∞‡≠Å ‡¨∏‡¨®‡≠ç‡¨ß‡≠ç‡≠ü‡¨æ ‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨®‡≠ç‡¨§ ‡¨Ø‡¨æ‡¨â‡¨õ‡¨ø ‡¨≤‡¨ï‡≠ç‡¨∑‡≠ç‡≠ü ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-3': '‡¨™‡¨æ‡¨∞‡≠ç‡¨∂‡≠ç‡≠± ‡¨™‡≠ç‡≠ü‡¨æ‡¨®‡≠á‡¨≤‡≠ç‚Äå‡¨∞‡≠á ‚ÄúStart Scenes‚Äù ‡¨â‡¨™‡¨∞‡≠á ‡¨ï‡≠ç‡¨≤‡¨ø‡¨ï‡≠ç ‡¨ï‡¨∞‡¨ø ‡¨∏‡¨ø‡¨®‡≠ç ‡¨ì ‡¨∏‡¨Ç‡¨ñ‡≠ç‡≠ü‡¨æ‡¨§‡≠ç‡¨Æ‡¨ï ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨Æ‡¨ø‡¨≥‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-4': '‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï ‡¨™‡¨æ‡¨ñ‡¨∞‡≠á ‡¨∏‡¨Æ‡≠ü ‡¨è‡¨¨‡¨Ç ‡¨π‡¨ø‡¨£‡≠ç‡¨ü ‡¨∏‡¨ø‡¨Æ‡¨ø‡¨§‡•§ ‡¨Ö‡¨ß‡¨ø‡¨ï ‡¨ò‡≠ã‡¨≥‡¨æ‡¨≥‡¨ø ‡¨π‡≠á‡¨≤‡≠á ‡¨Æ‡¨æ‡¨§‡≠ç‡¨∞ ‡¨π‡¨ø‡¨£‡≠ç‡¨ü ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-5': '‡¨™‡≠ç‡¨∞‡¨§‡≠ç‡≠ü‡≠á‡¨ï ‡¨†‡¨ø‡¨ï‡≠ç ‡¨â‡¨§‡≠ç‡¨§‡¨∞ ‡¨™‡¨∞‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨ì ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¨‡¨ø‡¨∑‡≠ü‡¨∞‡≠á ‡¨è‡¨ï ‡¨õ‡≠ã‡¨ü ‡¨¨‡≠à‡¨ú‡≠ç‡¨û‡¨æ‡¨®‡¨ø‡¨ï ‡¨§‡¨•‡≠ç‡≠ü ‡¨¶‡≠á‡¨ñ‡¨ø‡¨¨‡≠á‡•§',
                'instr-tip': '‡¨∏‡≠Å‡¨™‡¨æ‡¨∞‡¨ø‡¨∂: ‡¨™‡≠ç‡¨∞‡¨•‡¨Æ‡≠á ‡¨ï‡≠á‡¨¨‡¨≥ ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨ò‡≠Å‡¨û‡≠ç‡¨ö‡¨æ‡¨á ‡¨Ö‡¨≠‡≠ç‡≠ü‡¨æ‡¨∏ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨™‡¨∞‡≠á ‡¨∏‡¨ø‡¨®‡≠ç ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨ï‡¨∞‡¨ø ‡¨π‡¨ø‡¨£‡≠ç‡¨ü ‡¨¨‡¨ø‡¨®‡¨æ ‡¨è‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨®‡≠ç‡¨§ ‡¨∏‡¨Æ‡¨æ‡¨ß‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                'instr-start-btn': 'Shadow Lab ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',

                'time-label': '‡¨Ö‡¨¨‡¨∂‡¨ø‡¨∑‡≠ç‡¨ü ‡¨∏‡¨Æ‡≠ü:',
                'hints-label': '‡¨Ö‡¨¨‡¨∂‡¨ø‡¨∑‡≠ç‡¨ü ‡¨π‡¨ø‡¨£‡≠ç‡¨ü:',
                'score-label': '‡¨∏‡¨Æ‡¨æ‡¨ß‡¨æ‡¨® ‡¨π‡≠ã‡¨á‡¨•‡¨ø‡¨¨‡¨æ ‡¨∏‡¨ø‡¨®‡≠ç:',

                'footer-desc': '‡¨∏‡≠ç‡¨•‡¨æ‡¨®‡≠Ä‡≠ü ‡¨¨‡¨ø‡¨∑‡≠ü‡¨¨‡¨∏‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨á‡¨£‡≠ç‡¨ü‡¨∞‡¨æ‡¨ï‡≠ç‡¨ü‡¨ø‡¨≠‡≠ç ‡¨∂‡¨ø‡¨ï‡≠ç‡¨∑‡¨£ ‡¨Æ‡¨æ‡¨ß‡≠ç‡≠ü‡¨Æ‡¨∞‡≠á ‡¨ì‡¨°‡¨º‡¨ø‡¨∂‡¨æ‡¨∞ ‡¨õ‡¨æ‡¨§‡≠ç‡¨∞‡¨õ‡¨æ‡¨§‡≠ç‡¨∞‡≠Ä‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï ‡¨™‡¨æ‡¨á‡¨Å ‡¨¨‡¨ø‡¨ú‡≠ç‡¨û‡¨æ‡¨® ‡¨è‡¨¨‡¨Ç ‡¨ó‡¨£‡¨ø‡¨§ ‡¨∂‡¨ø‡¨ï‡≠ç‡¨∑‡¨æ‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨∞‡≠ç‡¨∑‡¨£‡≠Ä‡≠ü ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡¨æ‡¨∏‡¨ô‡≠ç‡¨ó‡¨ø‡¨ï ‡¨ï‡¨∞‡¨ø‡¨¨‡¨æ‡•§',
                'quick-links': '‡¨∂‡≠Ä‡¨ò‡≠ç‡¨∞ ‡¨≤‡¨ø‡¨ô‡≠ç‡¨ï‡≠ç',
                'copyright': '¬© 2023 STEM ‡¨≤‡¨∞‡≠ç‡¨® ‡¨ì‡¨°‡¨º‡¨ø‡¨∂‡¨æ‡•§ ‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨Ö‡¨ß‡¨ø‡¨ï‡¨æ‡¨∞ ‡¨∏‡¨Ç‡¨∞‡¨ï‡≠ç‡¨∑‡¨ø‡¨§‡•§'
            },
            hi: {
                'nav-dashboard': '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                'nav-about': '‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç',
                'nav-contact': '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï',
                'page-title': '‡§∂‡•à‡§°‡•ã ‡§≤‡•à‡§¨ ‚Äì ‡§∏‡•Ç‡§∞‡•ç‡§Ø, ‡§õ‡§æ‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡§Æ‡§Ø',
                'page-desc': '‡§Ü‡§ï‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¨‡§æ‡§è‡§Å‚Äì‡§¶‡§æ‡§è‡§Å ‡§ñ‡•Ä‡§Ç‡§ö‡§ø‡§è‡•§ ‡§¶‡•á‡§ñ‡§ø‡§è ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§î‡§∞ ‡§ò‡§°‡§º‡•Ä ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤‡§§‡§æ ‡§π‡•à, ‡§´‡§ø‡§∞ ‡§∏‡•Ä‡§® ‡§î‡§∞ ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à/‡§ï‡•ã‡§£ ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡§≤ ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§',
                'breadcrumb-dashboard': '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                'breadcrumb-natural': '‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§ò‡§ü‡§®‡§æ‡§è‡§Å',
                'breadcrumb-shadow': '‡§∂‡•à‡§°‡•ã ‡§≤‡•à‡§¨ ‚Äì ‡§á‡§Ç‡§ü‡§∞‡§Æ‡•Ä‡§°‡§ø‡§è‡§ü',
                'game-title': '‡§∂‡•à‡§°‡•ã ‡§≤‡•à‡§¨ ‚Äì ‡§á‡§Ç‡§ü‡§∞‡§Æ‡•Ä‡§°‡§ø‡§è‡§ü ‡§∏‡•ç‡§§‡§∞',
                'game-subtitle': '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§ò‡•Å‡§Æ‡§æ‡§á‡§è, ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•ã ‡§¶‡•á‡§ñ‡§ø‡§è ‡§î‡§∞ ‡§∏‡•Å‡§¨‡§π‚Äì‡§¶‡•ã‡§™‡§π‡§∞‚Äì‡§∂‡§æ‡§Æ ‡§ï‡•á ‡§∏‡•Ä‡§® ‡§µ ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à/‡§ï‡•ã‡§£ ‡§∏‡•á ‡§ú‡•Å‡•ú‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Æ‡§ø‡§≤‡§æ‡§á‡§è‡•§',
                'level-intermediate': '‡§á‡§Ç‡§ü‡§∞‡§Æ‡•Ä‡§°‡§ø‡§è‡§ü',

                'intro-title': '‡§Ø‡§π ‡§ï‡•à‡§∏‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à',
                'intro-text': '‡§Ü‡§ï‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¨‡§æ‡§è‡§Å‚Äì‡§¶‡§æ‡§è‡§Å ‡§°‡•ç‡§∞‡•à‡§ó ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§ ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§î‡§∞ ‡§¶‡§ø‡§∂‡§æ ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§ò‡§°‡§º‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§Ø ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤‡§§‡§æ ‡§π‡•à, ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡•á ‡§¶‡•á‡§ñ‡§ø‡§è‡•§',
                'intro-tip': '‡§™‡§π‡§≤‡•á ‡§•‡•ã‡§°‡§º‡§æ ‡§´‡•ç‡§∞‡•Ä-‡§™‡•ç‡§≤‡•á ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§ ‡§´‡§ø‡§∞ ‚ÄúStart Scenes‚Äù ‡§™‡§∞ ‡§ü‡•à‡§™ ‡§ï‡§∞‡§ï‡•á ‡§Ö‡§≤‡§ó‚Äì‡§Ö‡§≤‡§ó ‡§∏‡•Ä‡§® ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à/‡§ï‡•ã‡§£ ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•á ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§ ‡§π‡§∞ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§è‡§ï ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§§‡§•‡•ç‡§Ø ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ‡•§',
                'btn-start': '‡§∏‡•Ä‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç',
                'label-question': '‡§∏‡•Ä‡§®',
                'label-hints': '‡§π‡§ø‡§Ç‡§ü',
                'label-score': '‡§∏‡•ç‡§ï‡•ã‡§∞:',
                'challenge-heading': '‡§ú‡§ø‡§∏ ‡§∏‡•Ä‡§® ‡§∏‡•á ‡§Æ‡§ø‡§≤‡§æ‡§® ‡§ï‡§∞‡§®‡§æ ‡§π‡•à:',
                'btn-hint': '‡§π‡§ø‡§Ç‡§ü ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç',

                'instr-title': '‡§∂‡•à‡§°‡•ã ‡§≤‡•à‡§¨ ‚Äì ‡§ï‡•à‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç',
                'instr-subtitle': '‡§Ø‡§π ‡§∏‡•Ç‡§∞‡•ç‡§Ø‚Äì‡§õ‡§æ‡§Ø‡§æ ‡§∏‡§ø‡§Æ‡•ç‡§Ø‡•Å‡§≤‡•á‡§ü‡§∞ ‡§π‡•à ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§∏‡•Ä‡§®-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ö‡•Å‡§®‡•å‡§§‡§ø‡§Ø‡§æ‡§Å ‡§π‡•à‡§Ç‡•§ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§á‡§® ‡§ö‡§∞‡§£‡•ã‡§Ç ‡§ï‡•ã ‡§™‡§¢‡§º‡•á‡§Ç‡•§',
                'instr-1': '‡§Ü‡§ï‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¨‡§æ‡§è‡§Å‚Äì‡§¶‡§æ‡§è‡§Å ‡§ñ‡•Ä‡§Ç‡§ö‡§ø‡§è ‡§î‡§∞ ‡§¶‡•á‡§ñ‡§ø‡§è ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§î‡§∞ ‡§¶‡§ø‡§∂‡§æ ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤‡§§‡•Ä ‡§π‡•à‡•§',
                'instr-2': '‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•Ä‡§ú‡§ø‡§è ‡§ï‡§ø ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ò‡§°‡§º‡•Ä ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§∏‡•Å‡§¨‡§π ‡§∏‡•á ‡§∂‡§æ‡§Æ ‡§§‡§ï ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤‡§§‡§æ ‡§π‡•à‡•§',
                'instr-3': '‡§∏‡§æ‡§á‡§° ‡§™‡•à‡§®‡§≤ ‡§Æ‡•á‡§Ç ‚ÄúStart Scenes‚Äù ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§∏‡•Ä‡§® ‡§î‡§∞ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ï ‡§õ‡§æ‡§Ø‡§æ-‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡§≤ ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§',
                'instr-4': '‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§∏‡§Æ‡§Ø ‡§î‡§∞ ‡§π‡§ø‡§Ç‡§ü ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§π‡•à‡§Ç‡•§ ‡§π‡§ø‡§Ç‡§ü ‡§§‡§≠‡•Ä ‡§≤‡•á‡§Ç ‡§ú‡§¨ ‡§Ü‡§™ ‡§´‡§Å‡§∏ ‡§ú‡§æ‡§è‡§Å‡•§',
                'instr-5': '‡§π‡§∞ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§§‡§•‡•ç‡§Ø ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ‡•§',
                'instr-tip': '‡§∏‡•Å‡§ù‡§æ‡§µ: ‡§™‡§π‡§≤‡•á ‡§∏‡§ø‡§∞‡•ç‡§´‡§º ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§ò‡•Å‡§Æ‡§æ‡§ï‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•Ä‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§π‡§ø‡§Ç‡§ü ‡§ï‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§',
                'instr-start-btn': '‡§∂‡•à‡§°‡•ã ‡§≤‡•à‡§¨ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç',

                'time-label': '‡§∂‡•á‡§∑ ‡§∏‡§Æ‡§Ø:',
                'hints-label': '‡§∂‡•á‡§∑ ‡§π‡§ø‡§Ç‡§ü:',
                'score-label': '‡§∏‡•Å‡§≤‡§ù‡•á ‡§π‡•Å‡§è ‡§∏‡•Ä‡§®:',

                'footer-desc': '‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§î‡§∞ ‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§ü‡§ø‡§µ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§ì‡§°‡§ø‡§∂‡§æ ‡§ï‡•á ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§ó‡§£‡§ø‡§§ ‡§ï‡•Ä ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡•ã ‡§∞‡•ã‡§ö‡§ï ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§¨‡§®‡§æ‡§®‡§æ‡•§',
                'quick-links': '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§≤‡§ø‡§Ç‡§ï',
                'copyright': '¬© 2023 STEM Learn Odisha. ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§'
            }
        };

        const langButtons = document.querySelectorAll('.lang-btn');
        const i18nElements = document.querySelectorAll('[data-i18n]');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navList = document.querySelector('header nav ul');

        function t(key) {
            const pack = translations[currentLanguage] || translations.en;
            return pack[key] || translations.en[key] || key;
        }

        function applyTranslations() {
            i18nElements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (!key) return;
                el.textContent = t(key);
            });

            const startBtnSpan = document.getElementById('startBtn')?.querySelector('span');
            if (startBtnSpan) startBtnSpan.textContent = t('btn-start');

            const hintBtnSpan = document.getElementById('hintBtn')?.querySelector('span');
            if (hintBtnSpan) hintBtnSpan.textContent = t('btn-hint');

            const introStartSpan = document.getElementById('intro-start-btn')?.querySelector('span');
            if (introStartSpan) introStartSpan.textContent = t('instr-start-btn');

            if (gameMode === 'challenge' && currentQuestion) {
                loadCurrentQuestion(true);
            }
        }

        langButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                if (lang === currentLanguage) return;
                currentLanguage = lang;

                langButtons.forEach(b => b.classList.toggle('active', b === btn));

                if (lang === 'or' || lang === 'hi') {
                    document.body.classList.add('indic-text');
                } else {
                    document.body.classList.remove('indic-text');
                }

                applyTranslations();
            });
        });

        if (mobileMenuBtn && navList) {
            mobileMenuBtn.addEventListener('click', () => {
                navList.classList.toggle('show');
            });
        }

        // --------- SHADOW GAME LOGIC ----------
        let sunPosition = 50; // 0‚Äì100
        let currentTime = { hours: 12, minutes: 0 };
        let gameMode = 'intro';
        let currentQuestion = null;
        let isDragging = false;

        const TOTAL_QUESTIONS = 6;           // show only 6 per game
        const MAX_HINTS = 3;
        const TOTAL_TIME_SECONDS = 15 * 60;  // 15 minutes
        const POINTS_PER_QUESTION = 100 / TOTAL_QUESTIONS;

        let questionSequence = [];
        let questionIndex = 0;
        let hintsLeft = MAX_HINTS;
        let score = 0;           // 0-100
        let correctCount = 0;    // number of correctly matched questions
        let timeLeft = TOTAL_TIME_SECONDS;
        let timerInterval = null;

        const sun = document.getElementById('sun');
        const skySection = document.getElementById('skySection');
        const objectShadow = document.getElementById('objectShadow');
        const digitalTime = document.getElementById('digitalTime');
        const hourHand = document.getElementById('hourHand');
        const minuteHand = document.getElementById('minuteHand');
        const successPopup = document.getElementById('successPopup');
        const successTitle = document.getElementById('successTitle');
        const successMessage = document.getElementById('successMessage');
        const successIcon = document.getElementById('successIcon');
        const successFact = document.getElementById('successFact');

        const introContent = document.getElementById('introContent');
        const challengeContent = document.getElementById('challengeContent');
        const questionText = document.getElementById('questionText');
        const hintText = document.getElementById('hintText');
        const hintBtn = document.getElementById('hintBtn');
        const qIndexEl = document.getElementById('qIndex');
        const qTotalEl = document.getElementById('qTotal');
        const hintsLeftEl = document.getElementById('hintsLeft');
        const timerText = document.getElementById('timerText');
        const scoreText = document.getElementById('scoreText');
        const startBtn = document.getElementById('startBtn');
        const analogClock = document.getElementById('analogClock');

        const hudPosEl = document.getElementById('hudPos');
        const hudTimeShortEl = document.getElementById('hudTimeShort');
        const hudLenEl = document.getElementById('hudLen');
        const hudAngleEl = document.getElementById('hudAngle');

        // NEW: Code 1 style elements
        const instructionsModal = document.getElementById('instructions-modal');
        const introStartBtn = document.getElementById('intro-start-btn');
        const quizSection = document.getElementById('quiz-section');
        const topTimeRemainingEl = document.getElementById('time-remaining');
        const topHintsRemainingEl = document.getElementById('hints-remaining');
        const topScoreValueEl = document.getElementById('score-value');
        const topScoreTotalEl = document.getElementById('score-total');

        // QUESTION BANK: scenario + numeric (length & angle), ~10 total per language
        const QUESTION_BANK = {
            en: [
                // Scenario-based (5)
                {
                    id: 'early_morning_long_right',
                    type: 'scenario',
                    conditions: { time: 'early-morning', lengthCat: 'long', side: 'right', minAngle: 55 },
                    text: 'Early morning: make the object‚Äôs shadow long and strongly slanting towards the right side of the screen.',
                    hint: 'Keep the Sun low on the left side near the horizon so the shadow tilts a lot to the right.',
                    fact: 'In early morning, the Sun is low in the sky, so objects cast long shadows that can tilt by about 60¬∞ or more.'
                },
                {
                    id: 'late_morning_medium_right',
                    type: 'scenario',
                    conditions: { time: 'morning', lengthCat: 'medium', side: 'right' },
                    text: 'Late-morning playtime: the object‚Äôs shadow should still fall to the right, but not very long or very short.',
                    hint: 'Place the Sun slightly left of the middle of the sky so the shadow is medium in size to the right.',
                    fact: 'As the Sun climbs higher between early morning and noon, shadows become shorter and less tilted.'
                },
                {
                    id: 'noon_short',
                    type: 'scenario',
                    conditions: { time: 'noon', lengthCat: 'short' },
                    text: 'Midday noon: make the object‚Äôs shadow very short, almost under the object itself.',
                    hint: 'Move the Sun to the centre of the sky above the object so the shadow shrinks.',
                    fact: 'Around noon, the Sun is almost overhead, so vertical objects produce the shortest shadows of the day.'
                },
                {
                    id: 'afternoon_medium_left',
                    type: 'scenario',
                    conditions: { time: 'afternoon', lengthCat: 'medium', side: 'left' },
                    text: 'Afternoon rest: the object‚Äôs shadow should point to the left side with a medium length.',
                    hint: 'Shift the Sun to the right side of the sky but not too low, so the shadow is medium and falls to the left.',
                    fact: 'In afternoon, the Sun moves to the west side of the sky, so shadows swing around to the east side.'
                },
                {
                    id: 'evening_long_left_steep',
                    type: 'scenario',
                    conditions: { time: 'evening', lengthCat: 'long', side: 'left', minAngle: 55 },
                    text: 'Evening sunset: make the object‚Äôs shadow long and strongly slanting towards the left side.',
                    hint: 'Place the Sun very low on the right side near the horizon so the shadow leans sharply to the left.',
                    fact: 'Near sunset, shadows stretch out and can make a steep angle, close to 60¬∞, on the opposite side of the Sun.'
                },
                // Numeric ‚Äì shadow length (2)
                {
                    id: 'numeric_short_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 0.7, max: 1.0, targetDisplay: '0.8' },
                    text: 'Length challenge: adjust the Sun until the shadow length meter is close to 0.8 (a short shadow).',
                    hint: 'Keep the Sun fairly high in the sky near the middle so the shadow becomes short.',
                    fact: 'When the Sun is higher in the sky, light hits objects from above, so the same object makes a smaller shadow.'
                },
                {
                    id: 'numeric_long_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 1.7, max: 2.1, targetDisplay: '2.0' },
                    text: 'Length challenge: make the shadow length meter show about 2.0 (a very long shadow).',
                    hint: 'Move the Sun close to sunrise or sunset on either side so the object makes a long shadow.',
                    fact: 'When the Sun is low near the horizon, light travels almost sideways and stretches shadows to be very long.'
                },
                // Numeric ‚Äì shadow angle (3)
                {
                    id: 'numeric_angle_right_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'right', targetDisplay: '60¬∞ right' },
                    text: 'Angle challenge: make the shadow tilt at about 60¬∞ towards the right side. Watch the angle in the HUD.',
                    hint: 'Place the Sun low on the left side so the angle in the HUD becomes close to +60¬∞ and the shadow leans strongly right.',
                    fact: 'The angle of a shadow on the ground depends on the sideways position of the Sun, not just how high it is.'
                },
                {
                    id: 'numeric_angle_left_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'left', targetDisplay: '60¬∞ left' },
                    text: 'Angle challenge: make the shadow tilt at about 60¬∞ towards the left side.',
                    hint: 'Slide the Sun low on the right so the HUD shows an angle close to -60¬∞ and the shadow leans left.',
                    fact: 'Shadows always point away from the Sun: if the Sun is to the right, the shadow leans to the left, and vice versa.'
                },
                {
                    id: 'numeric_angle_small',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: -15, max: 15, side: null, targetDisplay: '0¬∞' },
                    text: 'Angle challenge: adjust the Sun until the shadow angle in the HUD is close to 0¬∞ (almost straight behind the object).',
                    hint: 'Keep the Sun near the middle of the sky so the shadow points almost straight away from the object.',
                    fact: 'When the Sun is almost directly in front or behind an object, the shadow lines up nearly straight with it.'
                }
            ],
            or: [
                {
                    id: 'early_morning_long_right',
                    type: 'scenario',
                    conditions: { time: 'early-morning', lengthCat: 'long', side: 'right', minAngle: 55 },
                    text: '‡¨∏‡¨ï‡¨æ‡¨≥ ‡¨∏‡¨ï‡¨æ‡¨≥: ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨≠‡¨≤ ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨™‡¨æ‡¨ñ‡¨ï‡≠Å ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ü‡¨ø‡¨∞‡≠á ‡¨ñ‡≠Å‡¨¨ ‡¨§‡¨≥‡¨ï‡≠Å, ‡¨π‡¨∞‡¨ø‡¨ú‡¨®‡≠ç‚Äå ‡¨™‡¨æ‡¨ñ‡¨∞‡≠á ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨Ö‡¨ß‡¨ø‡¨ï ‡¨ï‡≠ã‡¨£‡¨∞‡≠á ‡¨™‡¨°‡¨º‡¨ø‡¨¨‡•§',
                    fact: '‡¨∏‡¨ï‡¨æ‡¨≥‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞‡≠á ‡¨ñ‡≠Å‡¨¨ ‡¨§‡¨≥‡≠á ‡¨•‡¨æ‡¨è, ‡¨§‡≠á‡¨£‡≠Å ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨Æ‡¨æ‡¨®‡≠á ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 60¬∞ ‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨®‡≠ç‡¨§ ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¶‡≠á‡¨á‡¨•‡¨æ‡¨®‡≠ç‡¨§‡¨ø‡•§'
                },
                {
                    id: 'late_morning_medium_right',
                    type: 'scenario',
                    conditions: { time: 'morning', lengthCat: 'medium', side: 'right' },
                    text: '‡¨Ö‡¨™‡¨∞‡¨æ‡¨π‡≠ç‡¨® ‡¨™‡≠Ç‡¨∞‡≠ç‡¨¨ ‡¨∏‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® ‡¨ñ‡≠á‡¨≥: ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨™‡¨°‡¨º‡≠Å, ‡¨ï‡¨ø‡¨®‡≠ç‡¨§‡≠Å ‡¨≠‡¨≤ ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨®‡≠Å‡¨π‡≠á‡¨Å, ‡¨ñ‡≠Å‡¨¨ ‡¨õ‡≠ã‡¨ü ‡¨Æ‡¨ß‡≠ç‡≠ü ‡¨®‡≠Å‡¨π‡≠á‡¨Å‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨ü‡¨∞‡≠Å ‡¨Ö‡¨≥‡≠ç‡¨™ ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨≠‡¨æ‡¨ó ‡¨¶‡¨ø‡¨ó‡¨ï‡≠Å ‡¨®‡≠á‡¨á‡¨Ü‡¨∏‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨Æ ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨∞‡≠á ‡¨™‡¨°‡¨º‡¨ø‡¨¨‡•§',
                    fact: '‡¨∏‡¨ï‡¨æ‡¨≥‡¨∞‡≠Å ‡¨¶‡≠Å‡¨™‡≠Å‡¨∞ ‡¨¶‡¨ø‡¨ó‡¨ï‡≠Å ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨â‡¨™‡¨∞‡¨ï‡≠Å ‡¨Ø‡¨æ‡¨á‡¨¨‡¨æ ‡¨∏‡¨π ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨ß‡≠Ä‡¨∞‡≠á ‡¨ß‡≠Ä‡¨∞‡≠á ‡¨õ‡≠ã‡¨ü ‡¨π‡≠Å‡¨è ‡¨è‡¨¨‡¨Ç ‡¨ï‡≠ã‡¨£ ‡¨ï‡¨Æ‡¨ø‡¨Ø‡¨æ‡¨è‡•§'
                },
                {
                    id: 'noon_short',
                    type: 'scenario',
                    conditions: { time: 'noon', lengthCat: 'short' },
                    text: '‡¨¶‡≠Å‡¨™‡≠Å‡¨∞ ‡¨∏‡¨Æ‡≠ü: ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨ñ‡≠Å‡¨¨ ‡¨õ‡≠ã‡¨ü ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å, ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü ‡¨§‡¨≥‡≠á ‡¨π‡¨ø‡¨Å ‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨Æ‡¨ß‡≠ç‡≠ü ‡¨â‡¨™‡¨∞‡≠á, ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü ‡¨â‡¨™‡¨∞‡≠á ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨õ‡≠ã‡¨ü ‡¨π‡≠á‡¨¨‡•§',
                    fact: '‡¨¶‡≠Å‡¨™‡≠Å‡¨∞ ‡¨¨‡≠á‡¨≥‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨Æ‡≠Å‡¨£‡≠ç‡¨° ‡¨â‡¨™‡¨∞‡≠á ‡¨•‡¨æ‡¨è, ‡¨§‡≠á‡¨£‡≠Å ‡¨∏‡¨Æ ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¶‡¨ø‡¨®‡¨∞ ‡¨∏‡¨¨‡≠Å‡¨†‡¨æ‡¨∞‡≠Å ‡¨õ‡≠ã‡¨ü ‡¨•‡¨æ‡¨è‡•§'
                },
                {
                    id: 'afternoon_medium_left',
                    type: 'scenario',
                    conditions: { time: 'afternoon', lengthCat: 'medium', side: 'left' },
                    text: '‡¨Ö‡¨™‡¨∞‡¨æ‡¨π‡≠ç‡¨® ‡¨¨‡¨ø‡¨∂‡≠ç‡¨∞‡¨æ‡¨Æ: ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ñ‡¨ï‡≠Å ‡¨™‡¨°‡¨º‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å, ‡¨Ø‡¨æ‡¨π‡¨æ ‡¨®‡¨æ ‡¨ñ‡≠Å‡¨¨ ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ, ‡¨®‡¨æ ‡¨ñ‡≠Å‡¨¨ ‡¨õ‡≠ã‡¨ü‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨™‡¨ü‡¨ï‡≠Å, ‡¨ï‡¨ø‡¨®‡≠ç‡¨§‡≠Å ‡¨ñ‡≠Å‡¨¨ ‡¨§‡¨≥‡¨ï‡≠Å ‡¨®‡≠Å‡¨π‡≠á‡¨Å, ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¨‡¨æ‡¨Æ‡¨ï‡≠Å ‡¨∏‡¨Æ‡¨æ‡¨û‡≠ç‡¨ú‡¨∏‡≠ç‡≠ü ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨∞‡≠á ‡¨™‡¨°‡¨º‡¨ø‡¨¨‡•§',
                    fact: '‡¨Ö‡¨™‡¨∞‡¨æ‡¨π‡≠ç‡¨® ‡¨∏‡¨Æ‡≠ü‡¨∞‡≠á ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨™‡¨∂‡≠ç‡¨ö‡¨ø‡¨Æ ‡¨¶‡¨ø‡¨ó‡¨ï‡≠Å ‡¨Ø‡¨æ‡¨è, ‡¨§‡≠á‡¨£‡≠Å ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨™‡≠Ç‡¨∞‡≠ç‡¨¨ ‡¨™‡¨æ‡¨∞‡≠ç‡¨∂‡≠ç‡≠± (‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ü‡¨ø) ‡¨¶‡¨ø‡¨ó‡¨ï‡≠Å ‡¨∏‡¨∞‡¨ø‡¨Ø‡¨æ‡¨è‡•§'
                },
                {
                    id: 'evening_long_left_steep',
                    type: 'scenario',
                    conditions: { time: 'evening', lengthCat: 'long', side: 'left', minAngle: 55 },
                    text: '‡¨∏‡¨®‡≠ç‡¨ß‡≠ç‡≠ü‡¨æ ‡¨∏‡¨Æ‡≠ü: ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨≠‡¨≤ ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ñ‡¨ï‡≠Å ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨ï‡≠ã‡¨£‡¨∞‡≠á ‡¨§‡¨≥‡¨ï‡≠Å, ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨æ‡¨∏‡≠ç‡¨§ ‡¨®‡¨ø‡¨ï‡¨ü‡¨∞‡≠á ‡¨®‡≠á‡¨á‡¨Ø‡¨æ‡¨Ü‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨ü‡¨ï‡≠Å ‡¨Ö‡¨ß‡¨ø‡¨ï ‡¨ï‡≠ã‡¨£‡¨∞‡≠á ‡¨™‡¨°‡¨º‡¨ø‡¨¨‡•§',
                    fact: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨æ‡¨∏‡≠ç‡¨§ ‡¨∏‡¨Æ‡≠ü‡¨∞‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨ñ‡≠Å‡¨¨ ‡¨¶‡≠Ç‡¨∞ ‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨®‡≠ç‡¨§ ‡¨Ø‡¨æ‡¨è ‡¨è‡¨¨‡¨Ç ‡¨≠‡¨≤ ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨æ‡¨è‡•§'
                },
                {
                    id: 'numeric_short_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 0.7, max: 1.0, targetDisplay: '0.8' },
                    text: '‡¨≤‡¨Æ‡≠ç‡¨¨ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: ‡¨è‡¨Æ‡¨ø‡¨§‡¨ø ‡¨∏‡≠ç‡¨•‡¨æ‡¨® ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å ‡¨Ø‡≠á‡¨â‡¨Å‡¨†‡¨æ‡¨∞‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨Æ‡¨æ‡¨™ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 0.8 ‡¨π‡≠Å‡¨è (‡¨õ‡≠ã‡¨ü ‡¨õ‡¨æ‡≠ü‡¨æ)‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨Æ‡¨ß‡≠ç‡≠ü ‡¨â‡¨™‡¨∞‡≠á ‡¨≤‡¨æ‡¨ó‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å, ‡¨§‡¨æ‡¨π‡≠á‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨õ‡≠ã‡¨ü ‡¨π‡≠á‡¨¨‡•§',
                    fact: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨Ø‡≠á‡¨§‡≠á ‡¨â‡¨™‡¨∞‡≠á ‡¨Ø‡¨æ‡¨è, ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨∏‡≠á‡¨§‡≠á ‡¨õ‡≠ã‡¨ü ‡¨π‡≠Å‡¨è, ‡¨ï‡¨æ‡¨∞‡¨£ ‡¨Ü‡¨≤‡≠ã‡¨ï ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨∏‡¨ø‡¨ß‡¨æ ‡¨â‡¨™‡¨∞‡≠Å ‡¨™‡¨°‡¨º‡¨ø‡¨•‡¨æ‡¨è‡•§'
                },
                {
                    id: 'numeric_long_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 1.7, max: 2.1, targetDisplay: '2.0' },
                    text: '‡¨≤‡¨Æ‡≠ç‡¨¨ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: ‡¨è‡¨Æ‡¨ø‡¨§‡¨ø ‡¨∏‡≠ç‡¨•‡¨æ‡¨® ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å ‡¨Ø‡≠á‡¨â‡¨Å‡¨†‡¨æ‡¨∞‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨Æ‡¨æ‡¨™ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 2.0 ‡¨π‡≠Å‡¨è (‡¨ñ‡≠Å‡¨¨ ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨õ‡¨æ‡≠ü‡¨æ)‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨â‡¨¶‡≠ü ‡¨ï‡¨ø‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨Ö‡¨∏‡≠ç‡¨§ ‡¨®‡¨ø‡¨ï‡¨ü‡¨∞‡≠á, ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨ï‡¨£‡¨æ ‡¨®‡¨ø‡¨ï‡¨ü‡¨ï‡≠Å ‡¨®‡≠á‡¨á‡¨Ø‡¨æ‡¨Ü‡¨®‡≠ç‡¨§‡≠Å‡•§',
                    fact: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨Ø‡≠á‡¨§‡≠á ‡¨§‡¨≥‡¨ï‡≠Å ‡¨•‡¨æ‡¨è, ‡¨Ü‡¨≤‡≠ã‡¨ï ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨∏‡¨æ‡¨á‡¨°‡≠ç‚Äå‡¨∞‡≠Å ‡¨Ü‡¨∏‡¨ø‡¨•‡¨æ‡¨è, ‡¨§‡≠á‡¨£‡≠Å ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨≤‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨¶‡≠Ç‡¨∞ ‡¨™‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨®‡≠ç‡¨§ ‡¨Ø‡¨æ‡¨è‡•§'
                },
                {
                    id: 'numeric_angle_right_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'right', targetDisplay: '60¬∞ ‡¨°‡¨æ‡¨π‡¨æ‡¨£' },
                    text: '‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 60¬∞ ‡¨ï‡≠ã‡¨£‡¨∞‡≠á ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨™‡¨æ‡¨ü‡¨ø‡¨ï‡≠Å ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§ HUD ‡¨∞‡≠á ‡¨ï‡≠ã‡¨£‡¨ï‡≠Å ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ü‡¨ø‡¨∞‡≠á ‡¨§‡¨≥‡¨ï‡≠Å ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å ‡¨Ø‡¨æ‡¨π‡¨æ‡¨∞‡≠á HUD ‡¨∞‡≠á ‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 60¬∞ ‡¨π‡≠Å‡¨è ‡¨è‡¨¨‡¨Ç ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨°‡¨æ‡¨π‡¨æ‡¨£‡¨ï‡≠Å ‡¨≠‡¨≤ ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨ù‡≠Å‡¨ï‡¨ø‡¨Ø‡¨æ‡¨è‡•§',
                    fact: '‡¨õ‡¨æ‡≠ü‡¨æ‡¨∞ ‡¨ï‡≠ã‡¨£ ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨ï‡≠á‡¨â‡¨Å ‡¨™‡¨æ‡¨ü‡¨ø‡¨∞‡≠á ‡¨∞‡¨π‡¨ø‡¨õ‡¨ø ‡¨§‡¨æ‡¨π‡¨æ‡¨∞‡≠Å ‡¨™‡≠ç‡¨∞‡¨≠‡¨æ‡¨¨‡¨ø‡¨§ ‡¨π‡≠Å‡¨è, ‡¨Æ‡¨æ‡¨§‡≠ç‡¨∞ ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨â‡¨ö‡≠ç‡¨ö‡¨§‡¨æ‡¨∞‡≠Å ‡¨®‡≠Å‡¨π‡≠á‡¨Å‡•§'
                },
                {
                    id: 'numeric_angle_left_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'left', targetDisplay: '60¬∞ ‡¨¨‡¨æ‡¨Æ' },
                    text: '‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: ‡¨õ‡¨æ‡≠ü‡¨æ‡¨ï‡≠Å ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 60¬∞ ‡¨ï‡≠ã‡¨£‡¨∞‡≠á ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ü‡¨ø‡¨ï‡≠Å ‡¨ù‡≠Å‡¨ï‡¨ø‡¨•‡¨ø‡¨¨‡¨æ ‡¨™‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨™‡¨æ‡¨ü‡¨ø‡¨∞‡≠á ‡¨§‡¨≥‡¨ï‡≠Å ‡¨∞‡¨ñ‡¨ø ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å, HUD ‡¨∞‡≠á ‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü -60¬∞ ‡¨®‡¨ø‡¨ï‡¨ü‡¨ï‡≠Å ‡¨Ü‡¨∏‡≠Å‡¨•‡¨æ‡¨è ‡¨ï‡¨ø ‡¨®‡¨æ‡•§',
                    fact: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨°‡¨æ‡¨π‡¨æ‡¨£ ‡¨™‡¨æ‡¨ü‡¨ø‡¨∞‡≠á ‡¨•‡¨ø‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨¨‡¨æ‡¨Æ ‡¨™‡¨æ‡¨ü‡¨ø‡¨ï‡≠Å ‡¨™‡¨°‡¨º‡≠á ‡¨è‡¨¨‡¨Ç ‡¨¨‡¨ø‡¨™‡¨∞‡≠Ä‡¨§‡≠ç‡•§'
                },
                {
                    id: 'numeric_angle_small',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: -15, max: 15, side: null, targetDisplay: '0¬∞' },
                    text: '‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨®: HUD ‡¨∞‡≠á ‡¨ï‡≠ã‡¨£ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü 0¬∞ ‡¨π‡≠á‡¨â‡¨Ö ‡¨Ø‡¨æ‡¨è‡¨Å ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨∏‡¨Æ‡¨®‡≠ç‡≠±‡≠ü ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å (‡¨õ‡¨æ‡≠ü‡¨æ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨∏‡¨ø‡¨ß‡¨æ ‡¨™‡¨õ‡¨ï‡≠Å)‡•§',
                    hint: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ï‡≠Å ‡¨Ü‡¨ï‡¨æ‡¨∂‡¨∞ ‡¨Æ‡¨ß‡≠ç‡≠ü ‡¨™‡¨æ‡¨ñ‡¨∞‡≠á ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å ‡¨Ø‡¨æ‡¨π‡¨æ‡¨∞‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨∏‡¨ø‡¨ß‡¨æ ‡¨™‡¨õ ‡¨¶‡¨ø‡¨ó‡¨ï‡≠Å ‡¨•‡¨æ‡¨è‡•§',
                    fact: '‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨Ö‡¨¨‡¨ú‡≠á‡¨ï‡≠ç‡¨ü‡¨∞ ‡¨∏‡¨Æ‡≠ç‡¨Æ‡≠Å‡¨ñ ‡¨ï‡¨ø‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨™‡¨õ ‡¨™‡¨ü‡¨ï‡≠Å ‡¨®‡¨ø‡¨ï‡¨ü‡¨ï‡≠Å ‡¨•‡¨ø‡¨≤‡≠á ‡¨õ‡¨æ‡≠ü‡¨æ ‡¨™‡≠ç‡¨∞‡¨æ‡≠ü ‡¨∏‡¨ø‡¨ß‡¨æ ‡¨∞‡≠á‡¨ñ‡¨æ‡¨∞‡≠á ‡¨™‡¨°‡¨º‡¨ø‡¨•‡¨æ‡¨è‡•§'
                }
            ],
            hi: [
                {
                    id: 'early_morning_long_right',
                    type: 'scenario',
                    conditions: { time: 'early-morning', lengthCat: 'long', side: 'right', minAngle: 55 },
                    text: '‡§∏‡•Å‡§¨‡§π‚Äì‡§∏‡•Å‡§¨‡§π: ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•ã ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§î‡§∞ ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§ù‡•Å‡§ï‡•Ä ‡§π‡•Å‡§à ‡§¨‡§®‡§æ‡§á‡§è, ‡§ú‡•ã ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§™‡§°‡§º‡•á‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§ï‡§Æ ‡§ä‡§Å‡§ö‡§æ‡§à ‡§™‡§∞, ‡§ï‡•ç‡§∑‡§ø‡§§‡§ø‡§ú ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§≤‡§ó‡§≠‡§ó 60¬∞ ‡§ï‡•á ‡§¨‡§°‡§º‡•á ‡§ï‡•ã‡§£ ‡§™‡§∞ ‡§ù‡•Å‡§ï‡•á‡•§',
                    fact: '‡§∏‡•Å‡§¨‡§π ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§®‡•Ä‡§ö‡•á ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§î‡§∞ ‡§§‡•á‡§ú‡§º ‡§ï‡•ã‡§£ ‡§µ‡§æ‡§≤‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§≤‡§ó‡§≠‡§ó 60¬∞ ‡§§‡§ï ‡§ù‡•Å‡§ï ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'late_morning_medium_right',
                    type: 'scenario',
                    conditions: { time: 'morning', lengthCat: 'medium', side: 'right' },
                    text: '‡§≤‡•á‡§ü‚Äì‡§Æ‡•â‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§ñ‡•á‡§≤ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø: ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§π‡•ã, ‡§≤‡•á‡§ï‡§ø‡§® ‡§® ‡§¨‡§π‡•Å‡§§ ‡§≤‡§Æ‡•ç‡§¨‡•Ä, ‡§® ‡§¨‡§π‡•Å‡§§ ‡§õ‡•ã‡§ü‡•Ä‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§¨‡•Ä‡§ö ‡§ï‡•Ä ‡§ì‡§∞, ‡§™‡§∞ ‡§•‡•ã‡§°‡§º‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§ï‡•Ä ‡§π‡•ã‡•§',
                    fact: '‡§∏‡•Å‡§¨‡§π ‡§∏‡•á ‡§¶‡•ã‡§™‡§π‡§∞ ‡§§‡§ï ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ä‡§™‡§∞ ‡§ö‡§¢‡§º‡§§‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§õ‡§æ‡§Ø‡§æ ‡§ß‡•Ä‡§∞‡•á‚Äì‡§ß‡•Ä‡§∞‡•á ‡§õ‡•ã‡§ü‡•Ä ‡§î‡§∞ ‡§ï‡§Æ ‡§ù‡•Å‡§ï‡•Ä ‡§π‡•Å‡§à ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'noon_short',
                    type: 'scenario',
                    conditions: { time: 'noon', lengthCat: 'short' },
                    text: '‡§¶‡•ã‡§™‡§π‡§∞ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø: ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•ã ‡§¨‡§π‡•Å‡§§ ‡§õ‡•ã‡§ü‡•Ä ‡§¨‡§®‡§æ‡§á‡§è, ‡§≤‡§ó‡§≠‡§ó ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•á ‡§†‡•Ä‡§ï ‡§®‡•Ä‡§ö‡•á ‡§ú‡•à‡§∏‡•Ä‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§ï‡•á ‡§¨‡•Ä‡§ö, ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•á ‡§ä‡§™‡§∞ ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§∏‡§ø‡§ï‡•Å‡§°‡§º ‡§ï‡§∞ ‡§õ‡•ã‡§ü‡•Ä ‡§π‡•ã ‡§ú‡§æ‡§è‡•§',
                    fact: '‡§¶‡•ã‡§™‡§π‡§∞ ‡§ï‡•á ‡§Ü‡§∏‡§™‡§æ‡§∏ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§≤‡§ó‡§≠‡§ó ‡§∏‡§ø‡§∞ ‡§ï‡•á ‡§ä‡§™‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§≤‡§Æ‡•ç‡§¨‡§µ‡§§ ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§¶‡§ø‡§® ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§õ‡•ã‡§ü‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'afternoon_medium_left',
                    type: 'scenario',
                    conditions: { time: 'afternoon', lengthCat: 'medium', side: 'left' },
                    text: '‡§¶‡•ã‡§™‡§π‡§∞ ‡§¨‡§æ‡§¶ ‡§Ü‡§∞‡§æ‡§Æ: ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§™‡§°‡§º‡•á ‡§î‡§∞ ‡§â‡§∏‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§π‡•ã‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§∞‡§ñ‡•á‡§Ç ‡§≤‡•á‡§ï‡§ø‡§® ‡§¨‡§π‡•Å‡§§ ‡§®‡•Ä‡§ö‡•á ‡§®‡§π‡•Ä‡§Ç, ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡•á‡•§',
                    fact: '‡§¶‡•ã‡§™‡§π‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ ‡§ï‡•Ä ‡§ì‡§∞ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§õ‡§æ‡§Ø‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ ‡§¶‡§ø‡§∂‡§æ (‡§¨‡§æ‡§è‡§Å) ‡§ï‡•Ä ‡§ì‡§∞ ‡§ò‡•Ç‡§Æ‡§®‡•á ‡§≤‡§ó‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'evening_long_left_steep',
                    type: 'scenario',
                    conditions: { time: 'evening', lengthCat: 'long', side: 'left', minAngle: 55 },
                    text: '‡§∂‡§æ‡§Æ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø: ‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡•Ä ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•ã ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§î‡§∞ ‡§§‡•á‡§ú‡§º‡•Ä ‡§∏‡•á ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§ù‡•Å‡§ï‡•Ä ‡§π‡•Å‡§à ‡§¨‡§®‡§æ‡§á‡§è‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§®‡•Ä‡§ö‡•á, ‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§≤‡§æ‡§è‡§Å ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§§‡•á‡§ú‡§º ‡§ï‡•ã‡§£ (‡§≤‡§ó‡§≠‡§ó 60¬∞) ‡§∏‡•á ‡§´‡•à‡§≤‡•á‡•§',
                    fact: '‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§π‡•Å‡§§ ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§ú‡§º‡§Æ‡•Ä‡§® ‡§™‡§∞ ‡§¶‡•Ç‡§∞ ‡§§‡§ï ‡§´‡•à‡§≤ ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à, ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§≤‡§ó‡§≠‡§ó ‡§ï‡•ç‡§∑‡§ø‡§§‡§ø‡§ú ‡§™‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§'
                },
                {
                    id: 'numeric_short_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 0.7, max: 1.0, targetDisplay: '0.8' },
                    text: '‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§á‡§∏ ‡§§‡§∞‡§π ‡§∏‡§Æ‡§æ‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡•Ä‡§ú‡§ø‡§è ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡•Ä ‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§ï‡§æ ‡§Æ‡•Ä‡§ü‡§∞ ‡§≤‡§ó‡§≠‡§ó 0.8 ‡§¶‡§ø‡§ñ‡§æ‡§è (‡§õ‡•ã‡§ü‡•Ä ‡§õ‡§æ‡§Ø‡§æ)‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ï‡•Ä ‡§ì‡§∞ ‡§ï‡§æ‡§´‡§º‡•Ä ‡§ä‡§™‡§∞ ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§õ‡•ã‡§ü‡•Ä ‡§π‡•ã ‡§ú‡§æ‡§è‡•§',
                    fact: '‡§ú‡§¨ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ä‡§™‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§∞‡•ã‡§∂‡§®‡•Ä ‡§≤‡§ó‡§≠‡§ó ‡§ä‡§™‡§∞ ‡§∏‡•á ‡§Ü‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§õ‡•ã‡§ü‡•Ä ‡§¶‡§ø‡§ñ‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'numeric_long_length',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'length', min: 1.7, max: 2.1, targetDisplay: '2.0' },
                    text: '‡§≤‡§Æ‡•ç‡§¨‡§æ‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ‡§ê‡§∏‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ö‡•Å‡§®‡§ø‡§è ‡§ú‡§π‡§æ‡§Å ‡§Æ‡•Ä‡§ü‡§∞ ‡§≤‡§ó‡§≠‡§ó 2.0 ‡§¶‡§ø‡§ñ‡§æ‡§è (‡§¨‡§π‡•Å‡§§ ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§õ‡§æ‡§Ø‡§æ)‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø ‡§Ø‡§æ ‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§ ‡§ï‡•á ‡§™‡§æ‡§∏, ‡§Ø‡§æ‡§®‡•Ä ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§ï‡•á ‡§ï‡§ø‡§®‡§æ‡§∞‡•á ‡§ï‡•Ä ‡§ì‡§∞ ‡§≤‡•á ‡§ú‡§æ‡§á‡§è‡•§',
                    fact: '‡§ú‡§¨ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ç‡§∑‡§ø‡§§‡§ø‡§ú ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§â‡§∏‡§ï‡•Ä ‡§ï‡§ø‡§∞‡§£‡•á‡§Ç ‡§§‡§ø‡§∞‡§õ‡•Ä ‡§Ü‡§§‡•Ä ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§π‡•Å‡§§ ‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§'
                },
                {
                    id: 'numeric_angle_right_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'right', targetDisplay: '60¬∞ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞' },
                    text: '‡§ï‡•ã‡§£ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡§æ ‡§ï‡•ã‡§£ HUD ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§≠‡§ó 60¬∞ ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§¶‡§ø‡§ñ‡§®‡•á ‡§§‡§ï ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§∏‡§Æ‡§æ‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§®‡•Ä‡§ö‡•á ‡§ï‡•Ä ‡§ì‡§∞ ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø HUD ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§£ ‡§≤‡§ó‡§≠‡§ó +60¬∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§Ü ‡§ú‡§æ‡§è ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§§‡•á‡§ú‡§º‡•Ä ‡§∏‡•á ‡§ù‡•Å‡§ï‡•á‡•§',
                    fact: '‡§õ‡§æ‡§Ø‡§æ ‡§ï‡§æ ‡§ï‡•ã‡§£ ‡§∏‡§ø‡§∞‡•ç‡§´‡§º ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•Ä ‡§ä‡§Å‡§ö‡§æ‡§à ‡§∏‡•á ‡§®‡§π‡•Ä‡§Ç, ‡§¨‡§≤‡•ç‡§ï‡§ø ‡§µ‡§π ‡§¶‡§æ‡§è‡§Å ‡§Ø‡§æ ‡§¨‡§æ‡§è‡§Å ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¶‡•Ç‡§∞ ‡§π‡•à, ‡§á‡§∏ ‡§™‡§∞ ‡§≠‡•Ä ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§'
                },
                {
                    id: 'numeric_angle_left_60',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: 50, max: 70, side: 'left', targetDisplay: '60¬∞ ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞' },
                    text: '‡§ï‡•ã‡§£ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ‡§õ‡§æ‡§Ø‡§æ ‡§ï‡§æ ‡§ï‡•ã‡§£ ‡§≤‡§ó‡§≠‡§ó 60¬∞ ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§ï‡•Ä ‡§ì‡§∞ ‡§¨‡§®‡§æ‡§á‡§è‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§®‡•Ä‡§ö‡•á ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø HUD ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§£ ‡§≤‡§ó‡§≠‡§ó -60¬∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§Ü‡§è ‡§î‡§∞ ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§ù‡•Å‡§ï‡•á‡•§',
                    fact: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§Ö‡§ó‡§∞ ‡§¶‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã ‡§õ‡§æ‡§Ø‡§æ ‡§¨‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§ú‡§æ‡§è‡§ó‡•Ä ‡§î‡§∞ ‡§Ö‡§ó‡§∞ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§¨‡§æ‡§à‡§Ç ‡§§‡§∞‡§´‡§º ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã ‡§õ‡§æ‡§Ø‡§æ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§'
                },
                {
                    id: 'numeric_angle_small',
                    type: 'numeric',
                    conditions: {},
                    numeric: { kind: 'angle', min: -15, max: 15, side: null, targetDisplay: '0¬∞' },
                    text: '‡§ï‡•ã‡§£ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§§‡§¨ ‡§§‡§ï ‡§¨‡§¶‡§≤‡§ø‡§è ‡§ú‡§¨ ‡§§‡§ï HUD ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§£ ‡§≤‡§ó‡§≠‡§ó 0¬∞ ‡§® ‡§¶‡§ø‡§ñ‡•á (‡§õ‡§æ‡§Ø‡§æ ‡§≤‡§ó‡§≠‡§ó ‡§∏‡•Ä‡§ß‡•Ä ‡§™‡•Ä‡§õ‡•á ‡§ú‡§æ‡§è)‡•§',
                    hint: '‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§∞‡§ñ‡§ø‡§è ‡§§‡§æ‡§ï‡§ø ‡§õ‡§æ‡§Ø‡§æ ‡§≤‡§ó‡§≠‡§ó ‡§∏‡•Ä‡§ß‡•Ä ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡•á‡•§',
                    fact: '‡§ú‡§¨ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§≤‡§ó‡§≠‡§ó ‡§∏‡§æ‡§Æ‡§®‡•á ‡§Ø‡§æ ‡§™‡•Ä‡§õ‡•á ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§§‡•ã ‡§õ‡§æ‡§Ø‡§æ ‡§µ‡§∏‡•ç‡§§‡•Å ‡§ï‡•Ä ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§π‡•Ä ‡§≤‡§ó‡§≠‡§ó ‡§∏‡•Ä‡§ß‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§§‡•Ä ‡§π‡•à‡•§'
                }
            ]
        };

        function getQuestionById(id, lang) {
            const bank = QUESTION_BANK[lang] || QUESTION_BANK.en;
            return bank.find(q => q.id === id);
        }

        function shuffleArray(arr) {
            return arr
                .map(v => ({ v, sort: Math.random() }))
                .sort((a, b) => a.sort - b.sort)
                .map(({ v }) => v);
        }

        function initGame() {
            // clock markers
            for (let i = 0; i < 12; i++) {
                const marker = document.createElement('div');
                marker.className = 'clock-marker';
                marker.style.transform = `translateX(-50%) rotate(${i * 30}deg)`;
                analogClock.appendChild(marker);
            }

            updateSunPosition(50);
            topScoreTotalEl.textContent = TOTAL_QUESTIONS;

            sun.addEventListener('mousedown', startDrag);
            sun.addEventListener('touchstart', startDrag, { passive: false });

            startBtn.addEventListener('click', startGame);
            hintBtn.addEventListener('click', useHint);

            // Modal start -> show game
            introStartBtn.addEventListener('click', () => {
    // Hide the instructions overlay
    instructionsModal.style.display = 'none';

    // Show the main game section
    quizSection.style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Immediately start the game (this hides "How this works"
    // and shows the challenge panel)
    startGame();
});


            applyTranslations();
            updateStatsDisplay();
        }

        // DRAG
        function startDrag(e) {
            isDragging = true;
            e.preventDefault();

            document.addEventListener('mousemove', dragMove);
            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchmove', dragMove, { passive: false });
            document.addEventListener('touchend', stopDrag);
        }

        function dragMove(e) {
            if (!isDragging) return;
            e.preventDefault();

            const rect = skySection.getBoundingClientRect();
            const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const x = clientX - rect.left;
            const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));

            updateSunPosition(percentage);
        }

        function stopDrag() {
            if (!isDragging) return;
            isDragging = false;

            document.removeEventListener('mousemove', dragMove);
            document.removeEventListener('mouseup', stopDrag);
            document.removeEventListener('touchmove', dragMove);
            document.removeEventListener('touchend', stopDrag);

            if (gameMode === 'challenge' && currentQuestion) {
                checkAnswer();
            }
        }

        // VISUALS
        function updateSunPosition(percentage) {
            sunPosition = percentage;
            const verticalPos = 22 + Math.abs(percentage - 50) * 0.3;
            sun.style.left = percentage + '%';
            sun.style.top = verticalPos + '%';

            const totalMinutes = 6 * 60 + (sunPosition / 100) * 12 * 60;
            currentTime.hours = Math.floor(totalMinutes / 60);
            currentTime.minutes = Math.round(totalMinutes % 60);

            updateClock();
            updateShadow();
            updateSkyGradient();
            updateHud();
        }

        function updateClock() {
            const period = currentTime.hours >= 12 ? 'PM' : 'AM';
            const displayHours = currentTime.hours > 12 ? currentTime.hours - 12 :
                (currentTime.hours === 0 ? 12 : currentTime.hours);
            const displayMinutes = currentTime.minutes.toString().padStart(2, '0');
            digitalTime.textContent = `${displayHours}:${displayMinutes} ${period}`;

            const hourAngle = ((currentTime.hours % 12) + currentTime.minutes / 60) * 30;
            const minuteAngle = currentTime.minutes * 6;
            hourHand.style.transform = `translateX(-50%) translateY(-100%) rotate(${hourAngle}deg)`;
            minuteHand.style.transform = `translateX(-50%) translateY(-100%) rotate(${minuteAngle}deg)`;
        }

        function updateShadow() {
            const shadowAngle = (sunPosition - 50) * -1.8;
            const distanceFromCenter = Math.abs(sunPosition - 50);
            const shadowLength = 0.6 + (distanceFromCenter / 50) * 1.8;
            const shadowOpacity = 0.45 + (distanceFromCenter / 50) * 0.35;

            objectShadow.style.transform =
                `translateX(-50%) rotate(${shadowAngle}deg) scaleX(${shadowLength})`;
            objectShadow.style.opacity = shadowOpacity;
        }

        function updateSkyGradient() {
            let gradient;
            if (sunPosition < 20) {
                gradient = 'linear-gradient(to bottom, #FFA07A, #87CEEB, #6BB6FF)';
            } else if (sunPosition < 40) {
                gradient = 'linear-gradient(to bottom, #FFE4B5, #B0E0E6, #87CEEB)';
            } else if (sunPosition < 60) {
                gradient = 'linear-gradient(to bottom, #87CEEB, #6BB6FF, #4A9FD8)';
            } else if (sunPosition < 80) {
                gradient = 'linear-gradient(to bottom, #FFE4B5, #FFCBA4, #87CEEB)';
            } else {
                gradient = 'linear-gradient(to bottom, #FF8C42, #FFB6C1, #87CEEB)';
            }
            skySection.style.background = gradient;
        }

        // META + HUD
        function getShadowMeta() {
            const pos = sunPosition;
            const side = pos < 50 ? 'right' : 'left';
            const dist = Math.abs(pos - 50);

            const shadowLength = 0.6 + (dist / 50) * 1.8;
            let lengthCat;
            if (shadowLength < 0.9) lengthCat = 'short';
            else if (shadowLength < 1.7) lengthCat = 'medium';
            else lengthCat = 'long';

            const shadowAngle = (sunPosition - 50) * -1.8;

            let time;
            if (pos < 20) time = 'early-morning';
            else if (pos < 40) time = 'morning';
            else if (pos < 60) time = 'noon';
            else if (pos < 80) time = 'afternoon';
            else time = 'evening';

            return {
                side,
                lengthCat,
                time,
                pos,
                dist,
                shadowLength,
                shadowAngle
            };
        }

        function updateHud() {
            const meta = getShadowMeta();
            hudPosEl.textContent = Math.round(sunPosition);
            const displayHours = currentTime.hours > 12 ? currentTime.hours - 12 :
                (currentTime.hours === 0 ? 12 : currentTime.hours);
            const displayMinutes = currentTime.minutes.toString().padStart(2, '0');
            hudTimeShortEl.textContent = `${displayHours}:${displayMinutes}`;
            hudLenEl.textContent = meta.shadowLength.toFixed(1);
            hudAngleEl.textContent = `${Math.round(meta.shadowAngle)}¬∞`;
        }

        // GAME FLOW
        function startGame() {
            gameMode = 'challenge';

            const baseIds = QUESTION_BANK.en.map(q => q.id); // master list (~10)
            const shuffledIds = shuffleArray(baseIds);
            questionSequence = shuffledIds.slice(0, TOTAL_QUESTIONS); // pick 6 randomly

            questionIndex = 0;
            score = 0;
            correctCount = 0;
            hintsLeft = MAX_HINTS;
            timeLeft = TOTAL_TIME_SECONDS;

            introContent.style.display = 'none';
            challengeContent.style.display = 'block';

            qTotalEl.textContent = TOTAL_QUESTIONS;
            updateStatsDisplay();

            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(tickTimer, 1000);

            loadCurrentQuestion(false);
        }

        function loadCurrentQuestion(languageOnly) {
            const qid = questionSequence[questionIndex];
            const qObj = getQuestionById(qid, currentLanguage);
            currentQuestion = qObj;

            qIndexEl.textContent = questionIndex + 1;
            questionText.textContent = qObj.text;

            if (!languageOnly) {
                hintText.style.display = 'none';
                hintText.textContent = '';
                hintBtn.disabled = hintsLeft <= 0;
            } else {
                if (hintText.style.display === 'block') {
                    hintText.textContent = qObj.hint || '';
                }
            }
        }

        function updateStatsDisplay() {
            hintsLeftEl.textContent = hintsLeft;
            scoreText.textContent = Math.round(score);
            timerText.textContent = formatTime(timeLeft);

            // Update Code 1 style top stats bar
            if (topTimeRemainingEl) topTimeRemainingEl.textContent = formatTime(timeLeft);
            if (topHintsRemainingEl) topHintsRemainingEl.textContent = hintsLeft;
            if (topScoreValueEl && topScoreTotalEl) {
                topScoreValueEl.textContent = correctCount;
                topScoreTotalEl.textContent = TOTAL_QUESTIONS;
            }
        }

        function tickTimer() {
            if (timeLeft <= 0) {
                timeLeft = 0;
                updateStatsDisplay();
                clearInterval(timerInterval);
                endGame(false);
                return;
            }
            timeLeft--;
            updateStatsDisplay();
        }

        function formatTime(sec) {
            const m = Math.floor(sec / 60);
            const s = sec % 60;
            return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function useHint() {
            if (hintsLeft <= 0 || !currentQuestion) return;
            hintsLeft--;
            hintBtn.disabled = hintsLeft <= 0;
            hintsLeftEl.textContent = hintsLeft;

            const qid = questionSequence[questionIndex];
            const qObj = getQuestionById(qid, currentLanguage);
            hintText.textContent = qObj.hint || '';
            hintText.style.display = 'block';

            updateStatsDisplay();
        }

        function checkAnswer() {
            const meta = getShadowMeta();
            const q = currentQuestion;

            let ok = true;

            if (q.type === 'scenario') {
                const cond = q.conditions;
                if (cond.time && meta.time !== cond.time) ok = false;
                if (cond.lengthCat && meta.lengthCat !== cond.lengthCat) ok = false;
                if (cond.side && meta.side !== cond.side) ok = false;
                if (cond.minAngle !== undefined) {
                    const angleMag = Math.abs(meta.shadowAngle);
                    if (angleMag < cond.minAngle) ok = false;
                }
            }

            if (q.type === 'numeric' && q.numeric) {
                const num = q.numeric;
                if (num.kind === 'length') {
                    const len = meta.shadowLength;
                    if (!(len >= num.min && len <= num.max)) ok = false;
                } else if (num.kind === 'angle') {
                    const angleMag = Math.abs(meta.shadowAngle);
                    if (!(angleMag >= Math.abs(num.min) && angleMag <= Math.abs(num.max))) ok = false;
                    if (num.side === 'right' && meta.side !== 'right') ok = false;
                    if (num.side === 'left' && meta.side !== 'left') ok = false;
                }
            }

            if (ok) {
                correctCount++;
                score += POINTS_PER_QUESTION;
                if (score > 100) score = 100;
                updateStatsDisplay();

                const last = questionIndex === TOTAL_QUESTIONS - 1;
                const title = last
                    ? (currentLanguage === 'or' ? 'Level ‡¨∂‡≠á‡¨∑!' :
                       currentLanguage === 'hi' ? '‡§≤‡•á‡§µ‡§≤ ‡§™‡•Ç‡§∞‡§æ!' : 'All Challenges Complete!')
                    : (currentLanguage === 'or' ? '‡¨†‡¨ø‡¨ï‡≠ç ‡¨â‡¨§‡≠ç‡¨§‡¨∞!' :
                       currentLanguage === 'hi' ? '‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞!' : 'Correct!');

                const qid = questionSequence[questionIndex];
                const qObjLang = getQuestionById(qid, currentLanguage);
                const fact = qObjLang.fact || '';

                const displayScore = Math.round(score);

                const msg = last
                    ? (currentLanguage === 'or'
                        ? `‡¨Ü‡¨™‡¨£ ${TOTAL_QUESTIONS} ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∞‡≠Å ‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨†‡¨ø‡¨ï‡≠ç ‡¨≠‡¨æ‡¨¨‡≠á ‡¨ï‡¨∞‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø‡•§ ‡¨∏‡≠ç‡¨ï‡≠ã‡¨∞: ${displayScore}/100`
                        : currentLanguage === 'hi'
                            ? `‡§Ü‡§™‡§®‡•á ‡§∏‡§≠‡•Ä ${TOTAL_QUESTIONS} ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§π‡•Ä ‡§π‡§≤ ‡§ï‡§ø‡§è‡•§ ‡§∏‡•ç‡§ï‡•ã‡§∞: ${displayScore}/100`
                            : `You solved all ${TOTAL_QUESTIONS} challenges. Score: ${displayScore}/100`)
                    : (currentLanguage === 'or'
                        ? '‡¨¶‡≠Å‡¨∞‡≠ç‡¨¶‡≠ç‡¨¶‡¨æ‡¨®‡≠ç‡¨§! ‡¨è‡¨¨‡≠á ‡¨™‡¨∞‡¨¨‡¨∞‡≠ç‡¨§‡≠ç‡¨§‡≠Ä ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨™‡¨æ‡¨á‡¨Å ‡¨™‡≠ç‡¨∞‡¨∏‡≠ç‡¨§‡≠Å‡¨§ ‡¨π‡≠Å‡¨®‡≠ç‡¨§‡≠Å‡•§'
                        : currentLanguage === 'hi'
                            ? '‡§¨‡§π‡•Å‡§§ ‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ! ‡§Ö‡§¨ ‡§Ö‡§ó‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡§≤ ‡§ï‡•Ä‡§ú‡§ø‡§è‡•§'
                            : 'Great! Get ready for the next challenge.');

                showPopup(title, msg, fact, last);
            }
        }

        function showPopup(title, message, fact, isFinal) {
            successTitle.textContent = title;
            successMessage.textContent = message;
            successIcon.textContent = isFinal ? 'üéâ' : '‚úÖ';
            successFact.textContent = fact;
            successPopup.classList.add('show');

            setTimeout(() => {
                successPopup.classList.remove('show');
                if (isFinal) {
                    endGame(true);
                } else {
                    goToNextQuestion();
                }
            }, 2600);
        }

        function goToNextQuestion() {
            questionIndex++;
            if (questionIndex >= TOTAL_QUESTIONS) {
                endGame(true);
            } else {
                loadCurrentQuestion(false);
                updateStatsDisplay();
            }
        }

        function endGame(completed) {
            gameMode = 'intro';
            if (timerInterval) clearInterval(timerInterval);

            if (!completed) {
                const displayScore = Math.round(score);
                const msg = currentLanguage === 'or'
                    ? `‡¨Ü‡¨™‡¨£ ${TOTAL_QUESTIONS} ‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨Æ‡¨ß‡≠ç‡≠ü‡¨∞‡≠Å ${correctCount} ‡¨ü‡¨ø ‡¨†‡¨ø‡¨ï‡≠ç ‡¨ï‡¨∞‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø‡•§ ‡¨∏‡≠ç‡¨ï‡≠ã‡¨∞: ${displayScore}/100‡•§ ‡¨™‡≠Å‡¨®‡¨ø Scenes ‡¨ö‡≠á‡¨∑‡≠ç‡¨ü‡¨æ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å!`
                    : currentLanguage === 'hi'
                        ? `‡§Ü‡§™‡§®‡•á ${TOTAL_QUESTIONS} ‡§Æ‡•á‡§Ç ‡§∏‡•á ${correctCount} ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§π‡•Ä ‡§π‡§≤ ‡§ï‡§ø‡§è‡•§ ‡§∏‡•ç‡§ï‡•ã‡§∞: ${displayScore}/100‡•§ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§∏‡•Ä‡§® ‡§ü‡•ç‡§∞‡§æ‡§à ‡§ï‡•Ä‡§ú‡§ø‡§è!`
                        : `You solved ${correctCount} out of ${TOTAL_QUESTIONS} challenges. Score: ${displayScore}/100. Try the scenes again!`;

                successTitle.textContent = currentLanguage === 'or'
                    ? '‡¨∏‡¨Æ‡≠ü ‡¨∂‡≠á‡¨∑!'
                    : currentLanguage === 'hi'
                        ? '‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!'
                        : 'Time Up!';
                successMessage.textContent = msg;
                successIcon.textContent = '‚è∞';
                successFact.textContent = '';
                successPopup.classList.add('show');

                setTimeout(() => {
                    successPopup.classList.remove('show');
                }, 2600);
            }

            introContent.style.display = 'block';
            challengeContent.style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', () => {
            initGame();
        });
    </script>
</body>
</html>
