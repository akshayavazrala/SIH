<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Food Detective - STEM Learn Odisha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin:0; padding:0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: #f0f7ff; color:#1e293b; line-height:1.6; overflow-x:hidden; }
        .container { width:100%; max-width:1200px; margin:0 auto; padding:0 20px; }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, #0e2a47 0%, #1a365d 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo i {
            font-size: 1.8rem;
            color: #2a69ac;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logo-text h1 span {
            color: #38b2ac;
            font-weight: 800;
        }

        .logo-text p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 6px;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1rem;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .profile-container {
            position: relative;
        }

        .profile-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 30px;
            padding: 8px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .profile-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }

        .profile-dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 180px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .profile-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #f5f7fa;
        }

        .dropdown-item i {
            color: #3182ce;
            width: 20px;
        }

        /* Language Options */
        .language-options {
            position: absolute;
            top: 60px;
            right: 120px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 120px;
            display: none;
            z-index: 1001;
            overflow: hidden;
        }

        .language-options.show {
            display: block;
        }

        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: #f5f7fa;
        }

        /* Instructions Modal */
        .instructions-modal { display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 2000; align-items: center; justify-content: center; }
        .instructions-content { background: white; border-radius: 20px; width: 90%; max-width: 700px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); position: relative; text-align: center; }
        .instructions-title { font-size: 2rem; margin-bottom: 20px; color: #1a365d; font-weight: 700; }
        .instructions-text { color: #64748b; margin-bottom: 25px; line-height: 1.6; text-align: left; font-size: 1.1rem; }
        .instructions-list { margin-left: 20px; margin-bottom: 25px; }
        .instructions-list li { margin-bottom: 10px; }
        .start-game-btn { padding: 15px 40px; background: linear-gradient(135deg, #38b2ac 0%, #2c9a94 100%); color: white; border: none; border-radius: 10px; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 20px; }
        .start-game-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(56, 178, 172, 0.3); }

        /* game header */
        .game-header { background: linear-gradient(rgba(14,42,71,0.85),rgba(26,54,93,0.9)), url('https://images.unsplash.com/photo-1593118247619-e2d6f056869e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80'); background-size:cover; background-position:center; color:white; padding:50px 0; text-align:center; }
        .game-header h1 { font-size:2.8rem; margin-bottom:12px; font-weight:700; text-shadow:0 2px 4px rgba(0,0,0,0.2); }
        .game-header p { font-size:1.1rem; max-width:800px; margin:0 auto; font-weight:300; opacity:0.95; }

        /* game stats (second UI) */
        .game-stats { display:flex; justify-content:space-between; align-items:center; background:white; padding:15px 25px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin:20px auto; max-width:1000px; gap:12px; flex-wrap:wrap; }
        .timer, .score, .hints { display:flex; align-items:center; gap:10px; font-size:1.1rem; font-weight:600; color:#1a365d; }
        .timer i { color:#e53e3e; }
        .score i { color:#38a169; }
        .hints i { color:#d69e2e; }
        .progress-container { width:200px; height:12px; background:#e2e8f0; border-radius:10px; overflow:hidden; }
        .progress-bar { height:100%; background:#3182ce; border-radius:10px; transition: width 0.5s ease; }

        /* game area */
        .game-area { padding:40px 0 60px; }
        .game-container { display:grid; grid-template-columns:1fr 1fr; gap:30px; max-width:1000px; margin:0 auto 40px auto; }
        .drop-zone { background: rgba(255,255,255,0.95); border-radius:25px; padding:25px; box-shadow:0 10px 30px rgba(0,0,0,0.08); min-height:350px; display:flex; flex-direction:column; border:3px dashed #cbd5e0; transition: all 0.3s ease; position:relative; }
        .drop-zone.highlight { border-color:#4299e1; background: rgba(235,248,255,0.95); transform:scale(1.03); }
        .zone-header { display:flex; align-items:center; gap:15px; margin-bottom:18px; }
        .zone-icon { width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.6rem; }
        .plant-icon { background: linear-gradient(45deg,#48bb78,#38a169); color:white; }
        .animal-icon { background: linear-gradient(45deg,#ed8936,#dd6b20); color:white; }
        .zone-title { font-size:1.4rem; font-weight:700; color:#1a365d; }

        .zone-items { display:flex; flex-wrap:wrap; gap:12px; min-height:160px; align-content:flex-start; }

        .food-items { display:flex; flex-wrap:wrap; gap:18px; justify-content:center; margin-top:30px; padding:22px; background: rgba(255,255,255,0.1); border-radius:16px; }
        .food-item { width:110px; height:110px; background: linear-gradient(145deg,#ffffff,#f0f4f8); border-radius:16px; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:grab; box-shadow:0 8px 20px rgba(0,0,0,0.06); transition:all 0.25s ease; user-select:none; border:2px solid rgba(255,255,255,0.3); }
        .food-item:hover { transform:translateY(-8px); box-shadow: 0 12px 25px rgba(0,0,0,0.15); }
        .food-item.dragging { opacity:0.85; transform:scale(1.08) rotate(8deg); z-index:1200; box-shadow: 0 15px 30px rgba(0,0,0,0.2); }
        .food-icon { font-size:2.6rem; margin-bottom:8px; }
        .food-name { font-size:0.95rem; font-weight:700; color:#2d3748; text-align:center; }

        /* modal */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.75); z-index:2000; align-items:center; justify-content:center; }
        .modal-content { background:linear-gradient(145deg,#ffffff,#f0f8ff); border-radius:24px; width:90%; max-width:700px; padding:36px; text-align:center; position:relative; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .modal-close { position:absolute; top:16px; right:16px; background:rgba(0,0,0,0.06); border:none; font-size:1.4rem; width:44px; height:44px; border-radius:50%; cursor:pointer; transition: all 0.3s ease; }
        .modal-close:hover { background:rgba(0,0,0,0.12); transform: rotate(90deg); }
        .modal-food-image { width:96px; height:96px; font-size:3.6rem; margin:0 auto 18px; display:flex; align-items:center; justify-content:center; border-radius:16px; background:rgba(255,255,255,0.9); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .modal-icon { font-size:3.6rem; margin-bottom:12px; }
        .modal-title { font-size:2rem; font-weight:800; color:#1a365d; margin-bottom:8px; }
        .modal-text { color:#4a5568; margin-bottom:18px; font-size:1rem; line-height:1.6; }
        .modal-action { padding:12px 22px; background:linear-gradient(45deg,#4facfe,#00f2fe); color:white; border:none; border-radius:14px; font-weight:800; cursor:pointer; transition: all 0.3s ease; }
        .modal-action:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(79, 172, 254, 0.4); }

        /* Level Complete with Ranking */
        .level-complete { display:none; text-align:center; padding:28px; background:linear-gradient(145deg,#ffffff,#f7fafc); border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.08); max-width:700px; margin:24px auto; }
        .level-complete .badge { font-size: 3rem; margin-bottom: 20px; color: #fbbf24; }
        .level-complete .badge i { font-size: 3.5rem; }
        .level-title { font-size:2.2rem; font-weight:800; color:#1a365d; margin-bottom:15px; }
        .level-text { color:#4a5568; margin-bottom:20px; font-size:1.1rem; line-height:1.6; }
        
        /* Score and Rank Display */
        .score-rank-container { display: flex; justify-content: center; gap: 30px; margin: 25px 0; flex-wrap: wrap; }
        .score-box, .rank-box { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.08); min-width: 180px; }
        .score-box { border-left: 5px solid #38b2ac; }
        .rank-box { border-left: 5px solid #f59e0b; }
        .score-label, .rank-label { font-size: 0.9rem; color: #64748b; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .score-value { font-size: 2.5rem; font-weight: 800; color: #1a365d; }
        .rank-value { font-size: 2.5rem; font-weight: 800; color: #d97706; }
        .rank-suffix { font-size: 1rem; color: #6b7280; }
        
        /* Leaderboard Preview */
        .leaderboard-preview { margin: 25px 0; padding: 20px; background: #f8fafc; border-radius: 15px; }
        .leaderboard-title { font-size: 1.2rem; font-weight: 700; color: #1e293b; margin-bottom: 15px; text-align: center; }
        .leaderboard-list { max-height: 200px; overflow-y: auto; }
        .leaderboard-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; margin-bottom: 8px; background: white; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .leaderboard-item.current-user { background: linear-gradient(135deg, #e0f2fe, #f0f9ff); border: 2px solid #0ea5e9; }
        .leaderboard-rank { font-weight: 700; color: #475569; width: 30px; text-align: center; }
        .leaderboard-name { flex-grow: 1; margin: 0 15px; font-weight: 600; }
        .leaderboard-score { font-weight: 700; color: #059669; min-width: 60px; text-align: right; }
        
        .next-level-btn { padding:12px 24px; background:linear-gradient(45deg,#38b2ac,#2c9a94); color:white; border:none; border-radius:12px; font-size:1.1rem; font-weight:800; cursor:pointer; transition: all 0.3s ease; margin-top:15px; }
        .next-level-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(56, 178, 172, 0.4); }

        .particles { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; }
        .particle { position:absolute; width:4px; height:4px; background:rgba(255,255,255,0.5); border-radius:50%; animation: float-particle 18s infinite linear; }

        @keyframes float-particle { 0% { transform: translateY(100vh) translateX(0px); opacity:0; } 10%{opacity:1;} 90%{opacity:1;} 100%{transform:translateY(-100px) translateX(100px); opacity:0;} }

        /* Streak Counter */
        .streak-counter { position: fixed; top: 50%; right: 20px; transform: translateY(-50%); background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; padding: 18px 24px; border-radius: 50px; font-weight: 800; font-size: 1.2rem; box-shadow: 0 6px 20px rgba(255, 107, 107, 0.5); z-index: 500; animation: streak-bounce 2s infinite; display: none; }
        @keyframes streak-bounce {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-55%) scale(1.1); }
        }

        /* Language-specific text styles */
        .odia-text { font-family: 'Kalinga', 'Nirmala UI', 'Segoe UI', sans-serif; font-weight:600; }
        .hindi-text { font-family: 'Nirmala UI', 'Segoe UI', sans-serif; font-weight:600; }

        @media (max-width:968px) {
            .game-container { grid-template-columns:1fr; gap:20px; }
            .food-item { width:92px; height:92px; }
            .game-stats { flex-direction:column; gap:10px; align-items:flex-start; }
            .streak-counter { display: none !important; }
            .score-rank-container { gap: 15px; }
            .score-box, .rank-box { min-width: 150px; padding: 15px; }
        }
        
        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
           
            nav ul {
                gap: 15px;
            }
            
            .score-value, .rank-value { font-size: 2rem; }
        }
        
        /* New animations */
        @keyframes confetti-fall {
            0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        @keyframes pop-in {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .pop-in { animation: pop-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    <div class="streak-counter" id="streak-counter">üî• <span id="streak-count">0</span> Streak!</div>

    <!-- Header -->
    <header>
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-atom"></i>
            </div>
            <div class="logo-text">
                <h1>STEM Learn Odisha</h1>
                <p>Gamified Learning Platform</p>
            </div>
        </div>
       
        <nav>
            <ul>
                <li><a href="student-dashboard.html" id="navHome" data-translate="nav-dashboard">Dashboard</a></li>
                <li><a href="science.html" id="navScience" data-translate="nav-science">Science</a></li>
                <li><a href="about.html" id="navAbout" data-translate="nav-about">About</a></li>
                <li><a href="contact.html" id="navContact" data-translate="nav-contact">Contact</a></li>
            </ul>
        </nav>
       
        <div class="header-controls">
            <button class="control-btn" id="languageToggle">
                <i class="fas fa-globe"></i>
            </button>
           
            <div class="profile-container">
                <button class="profile-btn" id="profileToggle">
                    <img src="" alt="Profile" class="profile-pic" id="headerProfilePic">
                    <span id="headerUserName">Student</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
               
                <div class="profile-dropdown" id="profileDropdown">
                    <a href="#" class="dropdown-item" id="dropdownProfile">
                        <i class="fas fa-user"></i>
                        <span data-translate="dropdown-profile">Profile</span>
                    </a>
                    <a href="#" class="dropdown-item" id="dropdownSettings">
                        <i class="fas fa-cog"></i>
                        <span data-translate="dropdown-settings">Settings</span>
                    </a>
                    <a href="#" class="dropdown-item" id="dropdownLogout">
                        <i class="fas fa-sign-out-alt"></i>
                        <span data-translate="dropdown-logout">Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Language Options -->
    <div class="language-options" id="languageOptions">
        <div class="language-option" data-lang="en">English</div>
        <div class="language-option" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</div>
        <div class="language-option" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</div>
    </div>

    <!-- Instructions modal -->
    <div class="instructions-modal" id="instructions-modal">
        <div class="instructions-content">
            <div class="language-switcher" style="position: relative; top: 0; right: 0; margin: 0 auto 20px auto; width: fit-content; background: rgba(26, 54, 93, 0.1);">
                <button class="lang-btn active" data-lang="en">English</button>
                <button class="lang-btn" data-lang="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</button>
                <button class="lang-btn" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
            </div>
           
            <h2 class="instructions-title" id="instructions-title">How to Play Food Detective</h2>
            <div class="instructions-text" id="instructions-text">
                <p id="instructions-intro">Welcome to Food Detective! Here's how to play:</p>
                <ul class="instructions-list" id="instructions-list">
                    <li id="instruction-1">Drag food items to their correct source - either Plant or Animal.</li>
                    <li id="instruction-2">Each correct answer earns you points and builds your streak.</li>
                    <li id="instruction-3">Maintain your streak to earn bonus points.</li>
                    <li id="instruction-4">Complete all items to finish the level.</li>
                    <li id="instruction-5">Learn about different foods and where they come from!</li>
                    <li id="instruction-6">Have fun learning about where your food comes from!</li>
                </ul>
                <p id="instructions-outro">Good luck and have fun becoming a food detective!</p>
            </div>
            <button class="start-game-btn" id="start-game-btn">Start Game</button>
        </div>
    </div>

    <!-- Game header -->
    <section class="game-header" style="display:none;" id="game-header">
        <div class="container">
            <h1 data-translate="game-title">Food Detective</h1>
            <p data-translate="game-desc">Discover where your food comes from! Drag each food item to its correct source and become a food expert!</p>
        </div>
    </section>

    <!-- Game stats (second UI) -->
    <div class="container" style="display:none;" id="game-stats-container">
        <div class="game-stats">
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span id="time">03:00</span>
            </div>

            <div class="score">
                <i class="fas fa-star"></i>
                <span id="score">Score: 0</span>
            </div>

            <div class="hints">
                <i class="fas fa-fire"></i>
                <span id="streak">Streak: 0</span>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progress" style="width:0%"></div>
            </div>
        </div>
    </div>

    <!-- Game area -->
    <section class="game-area" style="display:none;" id="game-area">
        <div class="container">
            <div class="game-container">
                <div class="drop-zone" id="plant-zone">
                    <div class="zone-header">
                        <div class="zone-icon plant-icon"><i class="fas fa-seedling"></i></div>
                        <h2 class="zone-title" data-translate="plant-source">Plant Sources</h2>
                    </div>
                    <div class="zone-items" id="plant-items"></div>
                </div>

                <div class="drop-zone" id="animal-zone">
                    <div class="zone-header">
                        <div class="zone-icon animal-icon"><i class="fas fa-paw"></i></div>
                        <h2 class="zone-title" data-translate="animal-source">Animal Sources</h2>
                    </div>
                    <div class="zone-items" id="animal-items"></div>
                </div>
            </div>

            <div class="food-items" id="food-items"></div>

            <!-- Level Complete with Ranking -->
            <div class="level-complete" id="level-complete">
                <div class="badge"><i class="fas fa-medal"></i></div>
                <h2 class="level-title" data-translate="level-title">Level Complete!</h2>
                <p class="level-text" data-translate="level-text">Congratulations! You've identified the food sources correctly. You're becoming a real food detective!</p>
                
                <!-- Score and Rank Display -->
                <div class="score-rank-container">
                    <div class="score-box pop-in">
                        <div class="score-label">Your Score</div>
                        <div class="score-value" id="final-score">0</div>
                    </div>
                    <div class="rank-box pop-in">
                        <div class="rank-label">Your Rank</div>
                        <div class="rank-value" id="final-rank">0</div>
                        <div class="rank-suffix" id="rank-suffix">th</div>
                    </div>
                </div>
                
                <!-- Leaderboard Preview -->
                <div class="leaderboard-preview" id="leaderboard-preview">
                    <div class="leaderboard-title">Top Players</div>
                    <div class="leaderboard-list" id="leaderboard-list">
                        <!-- Leaderboard items will be inserted here -->
                    </div>
                </div>
                
                <button class="next-level-btn" id="play-again-btn" data-translate="play-again">Play Again</button>
            </div>
        </div>
    </section>

    <!-- Feedback modal -->
    <div class="modal" id="feedback-modal">
        <div class="modal-content" id="modal-content">
            <button class="modal-close" id="modal-close"><i class="fas fa-times"></i></button>

            <div class="modal-food-image" id="modal-food-image">üçé</div>
            <div class="modal-icon correct-icon" id="modal-icon"><i class="fas fa-check-circle"></i></div>
            <h2 class="modal-title" id="modal-title" data-translate="correct-title">Correct!</h2>
            <p class="modal-text" id="modal-text">Great! Rice comes from plants.</p>

            <button class="modal-action" id="modal-action" data-translate="continue-btn">Continue</button>
        </div>
    </div>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('user'));
           
            if (!user) {
                // Redirect to login if not authenticated
                window.location.href = 'student-login.html';
                return;
            }
           
            // Load user data
            loadUserData(user);
            
            // Initialize the game
            init();
        });

        // Load user data into the page
        function loadUserData(user) {
            document.getElementById('headerUserName').textContent = user.fullName;
            document.getElementById('headerProfilePic').src = user.profilePicture ? `uploads/${user.profilePicture}` : 'default-profile.png';
        }

        /* ---- DATA ---- */
        const foodItems = [
            { id: 1, name: { en: "Rice", or: "‡¨ö‡¨æ‡¨â‡¨≥", hi: "‡§ö‡§æ‡§µ‡§≤" }, icon: "üåæ", type: "plant", info: { en: "Rice is a staple food that comes from the rice plant. It is grown in paddy fields and is a major crop in Odisha. Rice provides energy and is eaten daily by millions of people!", or: "‡¨ö‡¨æ‡¨â‡¨≥ ‡¨è‡¨ï ‡¨Æ‡≠Å‡¨ñ‡≠ç‡≠ü ‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨Ø‡¨æ‡¨π‡¨æ ‡¨ß‡¨æ‡¨® ‡¨ó‡¨õ‡¨∞‡≠Å ‡¨Æ‡¨ø‡¨≥‡≠á‡•§ ‡¨è‡¨π‡¨æ ‡¨≠‡¨≤ ‡¨™‡¨∞‡¨ø‡¨Æ‡¨æ‡¨£‡¨∞‡≠á ‡¨ß‡¨æ‡¨® ‡¨ï‡≠ç‡¨∑‡≠á‡¨§‡≠ç‡¨∞‡¨∞‡≠á ‡¨ö‡¨æ‡¨∑ ‡¨π‡≠Å‡¨è‡•§", hi: "‡§ö‡§æ‡§µ‡§≤ ‡§è‡§ï ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§≠‡•ã‡§ú‡§® ‡§π‡•à ‡§ú‡•ã ‡§ß‡§æ‡§® ‡§ï‡•á ‡§™‡•å‡§ß‡•á ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§ì‡§°‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§´‡§∏‡§≤ ‡§π‡•à ‡§î‡§∞ ‡§≤‡§æ‡§ñ‡•ã‡§Ç ‡§≤‡•ã‡§ó ‡§á‡§∏‡•á ‡§¶‡•à‡§®‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ñ‡§æ‡§§‡•á ‡§π‡•à‡§Ç!" } },
            { id: 2, name: { en: "Milk", or: "‡¨ï‡≠ç‡¨∑‡≠Ä‡¨∞", hi: "‡§¶‡•Ç‡§ß" }, icon: "ü•õ", type: "animal", info: { en: "Milk comes from animals like cows and buffaloes. It's rich in calcium and protein.", or: "‡¨ï‡≠ç‡¨∑‡≠Ä‡¨∞ ‡¨ó‡¨æ‡¨à ‡¨ì ‡¨≠‡≠á‡¨Ç‡¨∏ ‡¨†‡¨æ‡¨∞‡≠Å ‡¨Æ‡¨ø‡¨≥‡≠á‡•§ ‡¨è‡¨π‡¨æ ‡¨ï‡≠ç‡≠ü‡¨æ‡¨≤‡¨∏‡¨ø‡≠ü‡¨Æ‡≠ç ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡≠ã‡¨ü‡¨ø‡¨®‡≠ç‡¨∞‡≠á ‡¨™‡¨∞‡¨ø‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£‡•§", hi: "‡§¶‡•Ç‡§ß ‡§ó‡§æ‡§Ø ‡§î‡§∞ ‡§≠‡•à‡§Ç‡§∏ ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§ï‡•à‡§≤‡•ç‡§∂‡§ø‡§Ø‡§Æ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§" } },
            { id: 3, name: { en: "Apple", or: "‡¨Ü‡¨™‡¨≤‡≠ç", hi: "‡§∏‡•á‡§¨" }, icon: "üçé", type: "plant", info: { en: "Apples grow on trees and are full of vitamins.", or: "‡¨Ü‡¨™‡¨≤‡≠ç ‡¨ó‡¨õ‡¨∞‡≠á ‡¨¨‡¨¢‡¨º‡≠á ‡¨è‡¨¨‡¨Ç ‡¨≠‡¨ø‡¨ü‡¨æ‡¨Æ‡¨ø‡¨®‡≠ç‚Äå‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi: "‡§∏‡•á‡§¨ ‡§™‡•á‡§°‡§º‡•ã‡§Ç ‡§™‡§∞ ‡§â‡§ó‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§µ‡§ø‡§ü‡§æ‡§Æ‡§ø‡§® ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§" } },
            { id: 4, name: { en: "Fish", or: "‡¨Æ‡¨æ‡¨õ", hi: "‡§Æ‡§õ‡§≤‡•Ä" }, icon: "üêü", type: "animal", info: { en: "Fish live in water and are rich in protein and omega-3.", or: "‡¨Æ‡¨æ‡¨õ ‡¨ú‡¨≥‡¨∞‡≠á ‡¨¨‡¨∏‡¨®‡≠ç‡¨§‡¨ø ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡≠ã‡¨ü‡¨ø‡¨®‡≠ç‚Äå‡¨∞ ‡¨â‡¨§‡≠ç‡¨∏‡•§", hi: "‡§Æ‡§õ‡§≤‡•Ä ‡§™‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§î‡§∞ ‡§ì‡§Æ‡•á‡§ó‡§æ-3 ‡§ï‡§æ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§π‡•à‡•§" } },
            { id: 5, name: { en: "Banana", or: "‡¨ï‡¨¶‡¨≥‡≠Ä", hi: "‡§ï‡•á‡§≤‡§æ" }, icon: "üçå", type: "plant", info: { en: "Bananas grow on plants and are rich in potassium.", or: "‡¨ï‡¨¶‡¨≥‡≠Ä ‡¨ó‡¨õ‡¨∞‡≠á ‡¨¨‡¨¢‡¨º‡≠á ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ã‡¨ü‡¨æ‡¨∏‡¨ø‡≠ü‡¨Æ‡≠ç‚Äå‡¨∞ ‡¨≠‡¨≤ ‡¨â‡¨§‡≠ç‡¨∏‡•§", hi: "‡§ï‡•á‡§≤‡•á ‡§™‡•å‡§ß‡•ã‡§Ç ‡§™‡§∞ ‡§â‡§ó‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§™‡•ã‡§ü‡•á‡§∂‡§ø‡§Ø‡§Æ ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§" } },
            { id: 6, name: { en: "Egg", or: "‡¨Ö‡¨£‡≠ç‡¨°‡¨æ", hi: "‡§Ö‡§Ç‡§°‡§æ" }, icon: "ü•ö", type: "animal", info: { en: "Eggs are laid by birds and are a rich source of protein.", or: "‡¨Ö‡¨£‡≠ç‡¨°‡¨æ ‡¨™‡¨ï‡≠ç‡¨∑‡≠Ä‡¨Æ‡¨æ‡¨®‡≠á ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡¨ø; ‡¨™‡≠ç‡¨∞‡≠ã‡¨ü‡¨ø‡¨®‡≠ç‚Äå‡¨∞ ‡¨â‡¨§‡≠ç‡¨∏‡•§", hi: "‡§Ö‡§Ç‡§°‡•á ‡§™‡§ï‡•ç‡§∑‡§ø‡§Ø‡•ã‡§Ç ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¶‡§ø‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§" } },
            { id: 7, name: { en: "Potato", or: "‡¨Ü‡¨≥‡≠Å", hi: "‡§Ü‡§≤‡•Ç" }, icon: "ü•î", type: "plant", info: { en: "Potatoes are tubers that grow underground.", or: "‡¨Ü‡¨≥‡≠Å ‡¨≠‡≠Ç‡¨Æ‡¨ø ‡¨§‡¨≥‡≠á ‡¨¨‡¨¢‡¨º‡≠Å‡¨•‡¨ø‡¨¨‡¨æ ‡¨ï‡¨®‡≠ç‡¨¶‡•§", hi: "‡§Ü‡§≤‡•Ç ‡§ú‡§Æ‡•Ä‡§® ‡§ï‡•á ‡§®‡•Ä‡§ö‡•á ‡§â‡§ó‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§Ü‡§≤‡•Ç ‡§ï‡•á ‡§≠‡§æ‡§ó ‡§π‡•à‡§Ç‡•§" } },
            { id: 8, name: { en: "Chicken", or: "‡¨Æ‡≠Å‡¨∞‡¨ó‡≠Ä", hi: "‡§ö‡§ø‡§ï‡§®" }, icon: "üçó", type: "animal", info: { en: "Chicken meat comes from chickens; it's a common source of protein.", or: "‡¨ö‡¨ø‡¨ï‡≠á‡¨®‡≠ç ‡¨Æ‡¨æ‡¨Ç‡¨∏ ‡¨Æ‡≠Å‡¨∞‡¨ó‡≠Ä‡¨†‡¨æ‡¨∞‡≠Å ‡¨Æ‡¨ø‡¨≥‡≠á‡•§", hi: "‡§ö‡§ø‡§ï‡§® ‡§Æ‡•Å‡§∞‡•ç‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§ï‡§æ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§π‡•à‡•§" } },
            { id: 9, name: { en: "Wheat", or: "‡¨ó‡¨π‡¨Æ", hi: "‡§ó‡•á‡§π‡•Ç‡§Ç" }, icon: "üåæ", type: "plant", info: { en: "Wheat is ground into flour to make bread and chapati.", or: "‡¨ó‡¨π‡¨Æ‡¨∞‡≠Å ‡¨Ü‡¨ü‡¨æ ‡¨§‡¨ø‡¨Ü‡¨∞‡¨ø ‡¨π‡≠Å‡¨è, ‡¨Ø‡¨æ‡¨π‡¨æ ‡¨∞‡≠ã‡¨ü‡¨ø ‡¨™‡¨æ‡¨á‡¨Å ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡≠É‡¨§ ‡¨π‡≠Å‡¨è‡•§", hi: "‡§ó‡•á‡§π‡•Ç‡§Ç ‡§™‡•Ä‡§∏‡§ï‡§∞ ‡§Ü‡§ü‡§æ ‡§¨‡§®‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§∞‡•ã‡§ü‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§Ø‡•ã‡§ó ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§" } },
            { id:10, name:{ en:"Honey", or:"‡¨Æ‡¨π‡≠Å", hi:"‡§∂‡§π‡§¶" }, icon:"üçØ", type:"animal", info:{ en:"Honey is made by bees from flower nectar.", or:"‡¨Æ‡¨π‡≠Å ‡¨Æ‡¨ß‡≠Å‡¨Æ‡¨ï‡≠ç‡¨ñ‡≠Ä‡¨Æ‡¨æ‡¨®‡≠á ‡¨§‡¨ø‡¨Ü‡¨∞‡¨ø ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡¨ø‡•§", hi:"‡§∂‡§π‡§¶ ‡§Æ‡§ß‡•Å‡§Æ‡§ï‡•ç‡§ñ‡§ø‡§Ø‡•ã‡§Ç ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§®‡§§‡§æ ‡§π‡•à‡•§" } },
            { id:11, name:{ en:"Coconut", or:"‡¨®‡¨æ‡¨∞‡¨ø‡¨Ü‡¨≥", hi:"‡§®‡§æ‡§∞‡§ø‡§Ø‡§≤" }, icon:"ü••", type:"plant", info:{ en:"Coconuts grow on palms; every part is useful.", or:"‡¨®‡¨æ‡¨∞‡¨ø‡¨Ü‡¨≥ ‡¨§‡¨æ‡¨≥ ‡¨ó‡¨õ‡¨∞‡≠á ‡¨¨‡¨¢‡¨º‡≠á; ‡¨™‡≠ç‡¨∞‡¨§‡≠ç‡≠ü‡≠á‡¨ï ‡¨Ö‡¨Ç‡¨∂ ‡¨â‡¨™‡¨Ø‡≠ã‡¨ó‡≠Ä‡•§", hi:"‡§®‡§æ‡§∞‡§ø‡§Ø‡§≤ ‡§™‡•á‡§°‡§º‡•ã‡§Ç ‡§™‡§∞ ‡§â‡§ó‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§π‡§∞ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó‡•Ä ‡§π‡•à‡•§" } },
            { id:12, name:{ en:"Carrot", or:"‡¨ó‡¨æ‡¨ú‡¨∞", hi:"‡§ó‡§æ‡§ú‡§∞" }, icon:"ü•ï", type:"plant", info:{ en:"Carrots are root vegetables rich in vitamin A.", or:"‡¨ó‡¨æ‡¨ú‡¨∞ ‡¨≠‡¨ø‡¨ü‡¨æ‡¨Æ‡¨ø‡¨®‡≠ç A ‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§ó‡§æ‡§ú‡§∞ ‡§µ‡§ø‡§ü‡§æ‡§Æ‡§ø‡§® A ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç‡•§" } },
            { id:13, name:{ en:"Cheese", or:"‡¨™‡¨®‡¨ø‡¨∞", hi:"‡§™‡§®‡•Ä‡§∞" }, icon:"üßÄ", type:"animal", info:{ en:"Cheese is made from milk and is rich in calcium.", or:"‡¨™‡¨®‡¨ø‡¨∞ ‡¨ï‡≠ç‡¨∑‡≠Ä‡¨∞‡¨∞‡≠Å ‡¨§‡¨ø‡¨Ü‡¨∞‡¨ø ‡¨π‡≠Å‡¨è ‡¨è‡¨¨‡¨Ç ‡¨ï‡≠ç‡≠ü‡¨æ‡¨≤‡¨∏‡¨ø‡≠ü‡¨Æ‡≠ç‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§™‡§®‡•Ä‡§∞ ‡§¶‡•Ç‡§ß ‡§∏‡•á ‡§¨‡§®‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ï‡•à‡§≤‡•ç‡§∂‡§ø‡§Ø‡§Æ ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§" } },
            { id:14, name:{ en:"Tomato", or:"‡¨ü‡¨Æ‡¨æ‡¨ü‡≠ã", hi:"‡§ü‡§Æ‡§æ‡§ü‡§∞" }, icon:"üçÖ", type:"plant", info:{ en:"Tomatoes are fruits that grow on vines.", or:"‡¨ü‡¨Æ‡¨æ‡¨ü‡≠ã ‡¨≤‡¨§‡¨æ‡¨∞‡≠á ‡¨¨‡¨¢‡¨º‡≠Å‡¨•‡¨ø‡¨¨‡¨æ ‡¨´‡¨≥‡•§", hi:"‡§ü‡§Æ‡§æ‡§ü‡§∞ ‡§¨‡•á‡§≤ ‡§™‡§∞ ‡§â‡§ó‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§´‡§≤ ‡§π‡•à‡§Ç‡•§" } },
            { id:15, name:{ en:"Beef", or:"‡¨ó‡≠ã‡¨Æ‡¨æ‡¨Ç‡¨∏", hi:"‡§¨‡•Ä‡§´" }, icon:"ü•©", type:"animal", info:{ en:"Beef comes from cattle and is rich in protein.", or:"‡¨ó‡≠ã‡¨Æ‡¨æ‡¨Ç‡¨∏ ‡¨ó‡≠ã‡¨∞‡≠Å‡¨†‡¨æ‡¨∞‡≠Å ‡¨Æ‡¨ø‡¨≥‡≠á ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡≠ã‡¨ü‡¨ø‡¨®‡≠ç‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§¨‡•Ä‡§´ ‡§Æ‡§µ‡•á‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§" } },
            { id:16, name:{ en:"Orange", or:"‡¨ï‡¨Æ‡¨≥‡¨æ", hi:"‡§∏‡§Ç‡§§‡§∞‡§æ" }, icon:"üçä", type:"plant", info:{ en:"Oranges grow on trees and are rich in vitamin C.", or:"‡¨ï‡¨Æ‡¨≥‡¨æ ‡¨ó‡¨õ‡¨∞‡≠á ‡¨¨‡¨¢‡¨º‡≠á ‡¨è‡¨¨‡¨Ç ‡¨≠‡¨ø‡¨ü‡¨æ‡¨Æ‡¨ø‡¨®‡≠ç C ‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§∏‡§Ç‡§§‡§∞‡•á ‡§™‡•á‡§°‡§º‡•ã‡§Ç ‡§™‡§∞ ‡§â‡§ó‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§µ‡§ø‡§ü‡§æ‡§Æ‡§ø‡§® ‡§∏‡•Ä ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§" } },
            { id:17, name:{ en:"Yogurt", or:"‡¨¶‡¨π‡¨ø", hi:"‡§¶‡§π‡•Ä" }, icon:"ü•£", type:"animal", info:{ en:"Yogurt is made from milk and contains probiotics.", or:"‡¨¶‡¨π‡¨ø ‡¨ï‡≠ç‡¨∑‡≠Ä‡¨∞‡¨∞‡≠Å ‡¨§‡¨ø‡¨Ü‡¨∞‡¨ø ‡¨π‡≠Å‡¨è ‡¨è‡¨¨‡¨Ç ‡¨™‡≠ç‡¨∞‡≠ã‡¨¨‡¨æ‡≠ü‡≠ã‡¨ü‡¨ø‡¨ï‡≠ç ‡¨ß‡¨æ‡¨∞‡¨£ ‡¨ï‡¨∞‡≠á‡•§", hi:"‡§¶‡§π‡•Ä ‡§¶‡•Ç‡§ß ‡§∏‡•á ‡§¨‡§®‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡•ã‡§¨‡§æ‡§Ø‡•ã‡§ü‡§ø‡§ï‡•ç‡§∏ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§" } },
            { id:18, name:{ en:"Spinach", or:"‡¨™‡¨æ‡¨≥‡¨ô‡≠ç‡¨ó", hi:"‡§™‡§æ‡§≤‡§ï" }, icon:"üçÉ", type:"plant", info:{ en:"Spinach is a leafy green vegetable rich in iron.", or:"‡¨™‡¨æ‡¨≥‡¨ô‡≠ç‡¨ó ‡¨è‡¨ï ‡¨™‡¨§‡≠ç‡¨∞‡¨Ø‡≠Å‡¨ï‡≠ç‡¨§ ‡¨∂‡¨æ‡¨ó ‡¨Ø‡¨æ‡¨π‡¨æ ‡¨≤‡≠å‡¨π‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§™‡§æ‡§≤‡§ï ‡§è‡§ï ‡§™‡§§‡•ç‡§§‡•á‡§¶‡§æ‡§∞ ‡§π‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§ú‡•Ä ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§Ø‡§∞‡§® ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§" } },
            { id:19, name:{ en:"Pork", or:"‡¨∏‡≠Å‡¨Ü‡¨∞‡¨∞ ‡¨Æ‡¨æ‡¨Ç‡¨∏", hi:"‡§∏‡•Å‡§Ö‡§∞ ‡§ï‡§æ ‡§Æ‡§æ‡§Ç‡§∏" }, icon:"üçñ", type:"animal", info:{ en:"Pork comes from pigs and is a common meat.", or:"‡¨∏‡≠Å‡¨Ü‡¨∞‡¨∞ ‡¨Æ‡¨æ‡¨Ç‡¨∏ ‡¨∏‡≠Å‡¨Ü‡¨∞‡¨†‡¨æ‡¨∞‡≠Å ‡¨Æ‡¨ø‡¨≥‡≠á ‡¨è‡¨¨‡¨Ç ‡¨è‡¨ï ‡¨∏‡¨æ‡¨ß‡¨æ‡¨∞‡¨£ ‡¨Æ‡¨æ‡¨Ç‡¨∏‡•§", hi:"‡§∏‡•Å‡§Ö‡§∞ ‡§ï‡§æ ‡§Æ‡§æ‡§Ç‡§∏ ‡§∏‡•Å‡§Ö‡§∞‡•ã‡§Ç ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§è‡§ï ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§æ‡§Ç‡§∏ ‡§π‡•à‡•§" } },
            { id:20, name:{ en:"Broccoli", or:"‡¨¨‡≠ç‡¨∞‡≠ã‡¨ï‡≠ã‡¨≤‡¨ø", hi:"‡§¨‡•ç‡§∞‡•ã‡§ï‡§≤‡•Ä" }, icon:"ü•¶", type:"plant", info:{ en:"Broccoli is a green vegetable rich in vitamins.", or:"‡¨¨‡≠ç‡¨∞‡≠ã‡¨ï‡≠ã‡¨≤‡¨ø ‡¨è‡¨ï ‡¨π‡¨∞‡¨ø‡¨§ ‡¨∂‡¨æ‡¨ï‡¨∏‡¨¨‡≠ç‡¨ú‡¨ø ‡¨Ø‡¨æ‡¨π‡¨æ ‡¨≠‡¨ø‡¨ü‡¨æ‡¨Æ‡¨ø‡¨®‡≠ç‡¨∞‡≠á ‡¨ß‡¨®‡≠ç‡≠ü‡•§", hi:"‡§¨‡•ç‡§∞‡•ã‡§ï‡§≤‡•Ä ‡§è‡§ï ‡§π‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§ú‡•Ä ‡§π‡•à ‡§ú‡•ã ‡§µ‡§ø‡§ü‡§æ‡§Æ‡§ø‡§® ‡§∏‡•á ‡§≠‡§∞‡§™‡•Ç‡§∞ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§" } }
        ];

        /* ---- STATE ---- */
        let currentLanguage = 'en';
        let score = 0;
        let correctAnswers = 0;
        let streak = 0;
        let timeLeft = 180;
        let timerInterval = null;
        let draggedItem = null;
        let completedItems = [];
        let isGameStarted = false;
        let currentGameItems = [];
        let finalScore = 0;
        let userRank = 0;
        let gameName = 'Food Detective';

        /* ---- ELEMENTS ---- */
        const langButtons = document.querySelectorAll('.lang-btn');
        const foodItemsContainer = document.getElementById('food-items');
        const plantZone = document.getElementById('plant-zone');
        const animalZone = document.getElementById('animal-zone');
        const plantItems = document.getElementById('plant-items');
        const animalItems = document.getElementById('animal-items');
        const scoreElement = document.getElementById('score');
        const timeElement = document.getElementById('time');
        const streakElement = document.getElementById('streak');
        const progressElement = document.getElementById('progress');
        const feedbackModal = document.getElementById('feedback-modal');
        const modalContent = document.getElementById('modal-content');
        const modalFoodImage = document.getElementById('modal-food-image');
        const modalIcon = document.getElementById('modal-icon');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const modalAction = document.getElementById('modal-action');
        const modalClose = document.getElementById('modal-close');
        const levelComplete = document.getElementById('level-complete');
        const playAgainBtn = document.getElementById('play-again-btn');
        const instructionsModal = document.getElementById('instructions-modal');
        const startGameBtn = document.getElementById('start-game-btn');
        const gameHeader = document.getElementById('game-header');
        const gameStatsContainer = document.getElementById('game-stats-container');
        const gameArea = document.getElementById('game-area');
        const streakCounter = document.getElementById('streak-counter');
        const streakCountDisplay = document.getElementById('streak-count');
        const finalScoreElement = document.getElementById('final-score');
        const finalRankElement = document.getElementById('final-rank');
        const rankSuffixElement = document.getElementById('rank-suffix');
        const leaderboardPreview = document.getElementById('leaderboard-preview');
        const leaderboardList = document.getElementById('leaderboard-list');

        // Dashboard integration elements
        const profileToggle = document.getElementById('profileToggle');
        const profileDropdown = document.getElementById('profileDropdown');
        const languageToggle = document.getElementById('languageToggle');
        const languageOptions = document.getElementById('languageOptions');
        const dropdownProfile = document.getElementById('dropdownProfile');
        const dropdownSettings = document.getElementById('dropdownSettings');
        const dropdownLogout = document.getElementById('dropdownLogout');
        const navHome = document.getElementById('navHome');
        const navScience = document.getElementById('navScience');
        const navAbout = document.getElementById('navAbout');
        const navContact = document.getElementById('navContact');

        const translations = {
            en: {
                'nav-dashboard': 'Dashboard','nav-science': 'Science','nav-about':'About','nav-contact':'Contact',
                'dropdown-profile': 'Profile','dropdown-settings': 'Settings','dropdown-logout': 'Logout',
                'game-title':'Food Detective','game-desc':'Discover where your food comes from! Drag each food item to its correct source and become a food expert!',
                'correct-title':'Awesome!','incorrect-title':'Try Again!',
                'continue-btn':'Continue Adventure','level-title':'Level Complete!','level-text':"Congratulations! You've identified the food sources correctly. You're becoming a real food detective!",
                'play-again':'Play Again','instructions-title':'How to Play Food Detective','instructions-intro':"Welcome to Food Detective! Here's how to play:",
                'instruction-1':'Drag food items to their correct source - either Plant or Animal.',
                'instruction-2':'Each correct answer earns you points and builds your streak.',
                'instruction-3':'Maintain your streak to earn bonus points.','instruction-4':'Complete all items to finish the level.',
                'instruction-5':'Learn about different foods and where they come from!',
                'instruction-6':'Have fun learning about where your food comes from!','instructions-outro':'Good luck and have fun becoming a food detective!','start-game-btn':'Start Game',
                'plant-source':'Plant Sources','animal-source':'Animal Sources'
            },
            or: {
                'nav-dashboard':'‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨°','nav-science': '‡¨¨‡¨ø‡¨ú‡≠ç‡¨û‡¨æ‡¨®','nav-about':'‡¨¨‡¨ø‡¨∑‡≠ü‡¨∞‡≠á','nav-contact':'‡¨Ø‡≠ã‡¨ó‡¨æ‡¨Ø‡≠ã‡¨ó',
                'dropdown-profile': '‡¨™‡≠ç‡¨∞‡≠ã‡¨´‡¨æ‡¨á‡¨≤‡≠ç','dropdown-settings': '‡¨∏‡≠á‡¨ü‡¨ø‡¨Ç‡¨∏‡≠ç','dropdown-logout': '‡¨≤‡¨ó‡¨Ü‡¨â‡¨ü‡≠ç',
                'game-title':'‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨ó‡¨¨‡≠á‡¨∑‡¨ï','game-desc':'‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ ‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨ï‡≠á‡¨â‡¨Å‡¨†‡¨æ‡¨∞‡≠Å ‡¨Ü‡¨∏‡≠á ‡¨Ü‡¨¨‡¨ø‡¨∑‡≠ç‡¨ï‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å! ‡¨™‡≠ç‡¨∞‡¨§‡≠ç‡≠ü‡≠á‡¨ï ‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨¨‡¨∏‡≠ç‡¨§‡≠Å‡¨ï‡≠Å ‡¨∏‡¨†‡¨ø‡¨ï ‡¨â‡¨§‡≠ç‡¨∏‡¨ï‡≠Å ‡¨ü‡¨æ‡¨£‡¨®‡≠ç‡¨§‡≠Å!',
                'correct-title':'‡¨ö‡¨Æ‡¨§‡≠ç‡¨ï‡¨æ‡¨∞!','incorrect-title':'‡¨™‡≠Å‡¨£‡¨ø ‡¨ö‡≠á‡¨∑‡≠ç‡¨ü‡¨æ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å!',
                'continue-btn':'‡¨Ü‡¨ó‡¨ï‡≠Å ‡¨¨‡¨¢‡¨º‡¨®‡≠ç‡¨§‡≠Å','level-title':'‡¨∏‡≠ç‡¨§‡¨∞ ‡¨∏‡¨Æ‡≠ç‡¨™‡≠Ç‡¨∞‡≠ç‡¨£‡≠ç‡¨£!','level-text':'‡¨Ö‡¨≠‡¨ø‡¨®‡¨®‡≠ç‡¨¶‡¨®! ‡¨Ü‡¨™‡¨£ ‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨â‡¨§‡≠ç‡¨∏‡¨ó‡≠Å‡¨°‡¨º‡¨ø‡¨ï‡≠Å ‡¨∏‡¨†‡¨ø‡¨ï ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨ö‡¨ø‡¨π‡≠ç‡¨®‡¨ø‡¨õ‡¨®‡≠ç‡¨§‡¨ø!',
                'play-again':'‡¨™‡≠Å‡¨£‡¨ø ‡¨ñ‡≠á‡¨≥‡¨®‡≠ç‡¨§‡≠Å','instructions-title':'‡¨´‡≠Å‡¨° ‡¨°‡¨ø‡¨ü‡≠á‡¨ï‡≠ç‡¨ü‡¨ø‡¨≠ ‡¨ï‡¨ø‡¨™‡¨∞‡¨ø ‡¨ñ‡≠á‡¨≥‡¨ø‡¨¨‡≠á','instructions-intro':'‡¨´‡≠Å‡¨° ‡¨°‡¨ø‡¨ü‡≠á‡¨ï‡≠ç‡¨ü‡¨ø‡¨≠‡¨ï‡≠Å ‡¨∏‡≠ç‡≠±‡¨æ‡¨ó‡¨§!',
                'instruction-1':'‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨¨‡¨∏‡≠ç‡¨§‡≠Å‡¨ó‡≠Å‡¨°‡¨ø‡¨ï‡≠Å ‡¨∏‡≠á‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï ‡¨∏‡¨†‡¨ø‡¨ï ‡¨â‡¨§‡≠ç‡¨∏‡¨ï‡≠Å ‡¨ü‡¨æ‡¨£‡¨®‡≠ç‡¨§‡≠Å - ‡¨â‡¨¶‡≠ç‡¨≠‡¨ø‡¨¶ ‡¨ï‡¨ø‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨™‡≠ç‡¨∞‡¨æ‡¨£‡≠Ä‡•§',
                'instruction-2':'‡¨™‡≠ç‡¨∞‡¨§‡≠ç‡≠ü‡≠á‡¨ï ‡¨∏‡¨†‡¨ø‡¨ï ‡¨â‡¨§‡≠ç‡¨§‡¨∞ ‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡≠Å ‡¨™‡¨è‡¨£‡≠ç‡¨ü ‡¨¶‡≠á‡¨¨‡•§','instruction-3':'‡¨ß‡¨æ‡¨∞‡¨æ ‡¨¨‡¨ú‡¨æ‡≠ü ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å','instruction-4':'‡¨∏‡¨Æ‡¨∏‡≠ç‡¨§ ‡¨Ü‡¨á‡¨ü‡¨Æ‡≠ç ‡¨∏‡¨Æ‡¨æ‡¨™‡≠ç‡¨§ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'instruction-5':'‡¨¨‡¨ø‡¨≠‡¨ø‡¨®‡≠ç‡¨® ‡¨ñ‡¨æ‡¨¶‡≠ç‡≠ü ‡¨è‡¨¨‡¨Ç ‡¨∏‡≠á‡¨Æ‡¨æ‡¨®‡¨ô‡≠ç‡¨ï ‡¨â‡¨§‡≠ç‡¨∏ ‡¨¨‡¨ø‡¨∑‡≠ü‡¨∞‡≠á ‡¨∂‡¨ø‡¨ñ‡¨®‡≠ç‡¨§‡≠Å!','instruction-6':'‡¨Æ‡¨ú‡¨æ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å','instructions-outro':'‡¨∂‡≠Å‡¨≠‡¨ï‡¨æ‡¨Æ‡¨®‡¨æ','start-game-btn':'‡¨ñ‡≠á‡¨≥ ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å',
                'plant-source':'‡¨â‡¨¶‡≠ç‡¨≠‡¨ø‡¨¶ ‡¨â‡¨§‡≠ç‡¨∏','animal-source':'‡¨™‡≠ç‡¨∞‡¨æ‡¨£‡≠Ä ‡¨â‡¨§‡≠ç‡¨∏'
            },
            hi: {
                'nav-dashboard':'‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°','nav-science': '‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®','nav-about':'‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç','nav-contact':'‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç',
                'dropdown-profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤','dropdown-settings': '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏','dropdown-logout': '‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
                'game-title':'‡§´‡•Ç‡§° ‡§°‡§ø‡§ü‡•á‡§ï‡•ç‡§ü‡§ø‡§µ','game-desc':'‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§ï‡§æ ‡§≠‡•ã‡§ú‡§® ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à! ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§ï‡•ã ‡§â‡§∏‡§ï‡•á ‡§∏‡§π‡•Ä ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§™‡§∞ ‡§ñ‡•Ä‡§Ç‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§≠‡•ã‡§ú‡§® ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§¨‡§®‡•á‡§Ç!',
                'correct-title':'‡§¨‡§π‡•Å‡§§ ‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ!','incorrect-title':'‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç!',
                'continue-btn':'‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç','level-title':'‡§∏‡•ç‡§§‡§∞ ‡§™‡•Ç‡§∞‡§æ!','level-text':'‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! ‡§Ü‡§™‡§®‡•á ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§∏‡•ç‡§∞‡•ã‡§§‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡•Ä ‡§¢‡§Ç‡§ó ‡§∏‡•á ‡§™‡§π‡§ö‡§æ‡§® ‡§≤‡§ø‡§Ø‡§æ ‡§π‡•à‡•§',
                'play-again':'‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç','instructions-title':'‡§´‡•Ç‡§° ‡§°‡§ø‡§ü‡•á‡§ï‡•ç‡§ü‡§ø‡§µ ‡§ï‡•à‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç','instructions-intro':'‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
                'instruction-1':'‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§™‡§¶‡§æ‡§∞‡•ç‡§•‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§®‡§ï‡•á ‡§∏‡§π‡•Ä ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§™‡§∞ ‡§ñ‡•Ä‡§Ç‡§ö‡•á‡§Ç - ‡§™‡•å‡§ß‡§æ ‡§Ø‡§æ ‡§ú‡§æ‡§®‡§µ‡§∞‡•§','instruction-2':'‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§Ö‡§Ç‡§ï ‡§Ö‡§∞‡•ç‡§ú‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§',
                'instruction-3':'‡§Ö‡§™‡§®‡•Ä ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡•á‡§Ç','instruction-4':'‡§∏‡§≠‡•Ä ‡§Ü‡§á‡§ü‡§Æ ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç','instruction-5':'‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§™‡§¶‡§æ‡§∞‡•ç‡§•‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§®‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡•á‡§Ç!',
                'instruction-6':'‡§Æ‡§ú‡§º‡§æ ‡§ï‡§∞‡•á‡§Ç','instructions-outro':'‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç','start-game-btn':'‡§ñ‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç','plant-source':'‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§','animal-source':'‡§ú‡§æ‡§®‡§µ‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§'
            }
        };

        /* ---- INIT ---- */
        function init() {
            createParticles();

            // Add event listeners to all language buttons (including those in instructions)
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                });
            });

            startGameBtn.addEventListener('click', startGame);
            modalAction.addEventListener('click', closeModal);
            modalClose.addEventListener('click', closeModal);
            playAgainBtn.addEventListener('click', startGame);

            // Dashboard integration event listeners
            profileToggle.addEventListener('click', function() {
                profileDropdown.classList.toggle('show');
            });

            languageToggle.addEventListener('click', function() {
                languageOptions.classList.toggle('show');
            });

            // Language selection
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                    languageOptions.classList.remove('show');
                });
            });

            // Navigation between pages
            dropdownProfile.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#profile';
            });

            dropdownSettings.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html#settings';
            });

            dropdownLogout.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('user');
                window.location.href = 'student-login.html';
            });

            // Navigation menu items
            navHome.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'student-dashboard.html';
            });

            navScience.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'science.html';
            });

            navAbout.addEventListener('click', function(e) {
                e.preventDefault();
                alert('About page would open here');
            });

            navContact.addEventListener('click', function(e) {
                e.preventDefault();
                alert('Contact page would open here');
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#languageToggle') && !e.target.closest('#languageOptions')) {
                    languageOptions.classList.remove('show');
                }
               
                if (!e.target.closest('#profileToggle') && !e.target.closest('#profileDropdown')) {
                    profileDropdown.classList.remove('show');
                }
            });

            switchLanguage('en');
        }

        function createParticles() {
            const container = document.getElementById('particles');
            container.innerHTML = '';
            for (let i=0;i<18;i++){
                const p = document.createElement('div'); p.className='particle';
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.animationDelay = `${Math.random()*10}s`;
                container.appendChild(p);
            }
        }

        /* ---- FOOD ITEM UI + RANDOMIZATION ---- */
        function createFoodItems() {
            // Shuffle all food items and select 8 random ones
            const shuffled = [...foodItems].sort(() => Math.random() - 0.5);
            const count = 8; // Reduced count for better gameplay
            currentGameItems = shuffled.slice(0, count);

            foodItemsContainer.innerHTML = '';
            currentGameItems.forEach((item, idx) => {
                const el = document.createElement('div');
                el.className = 'food-item';
                el.draggable = true;
                el.dataset.id = item.id;
                el.dataset.type = item.type;
                el.style.transitionDelay = `${idx * 30}ms`;
                el.innerHTML = `<div class="food-icon">${item.icon}</div><div class="food-name">${item.name[currentLanguage]}</div>`;
                foodItemsContainer.appendChild(el);
            });
        }

        function setupDragAndDrop() {
            const foodEls = document.querySelectorAll('.food-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            foodEls.forEach(it => {
                it.addEventListener('dragstart', dragStart);
                it.addEventListener('dragend', dragEnd);
            });

            dropZones.forEach(z => {
                z.addEventListener('dragover', dragOver);
                z.addEventListener('dragenter', dragEnter);
                z.addEventListener('dragleave', dragLeave);
                z.addEventListener('drop', drop);
            });
        }

        function dragStart(e) {
            draggedItem = this;
            e.dataTransfer.setData('text/plain', this.dataset.id);
            this.classList.add('dragging');
            setTimeout(()=> this.style.opacity = '0.5', 10);
        }
        function dragEnd() { this.classList.remove('dragging'); this.style.opacity='1'; }

        function dragOver(e) { e.preventDefault(); }
        function dragEnter(e) { e.preventDefault(); this.classList.add('highlight'); }
        function dragLeave() { this.classList.remove('highlight'); }

        function drop(e) {
            e.preventDefault();
            this.classList.remove('highlight');
            const id = e.dataTransfer.getData('text/plain');
            const item = foodItems.find(f => f.id == id);
            const zoneType = this.id === 'plant-zone' ? 'plant' : 'animal';
            if (!item) return;
            if (item.type === zoneType) handleCorrectAnswer(item, this);
            else handleIncorrectAnswer(item, this);
        }

        /* ---- GAME LOGIC ---- */
        function handleCorrectAnswer(item, zone) {
            if (completedItems.includes(item.id)) return; // already placed
            completedItems.push(item.id);

            const basePoints = 10;
            const streakBonus = Math.min(streak * 2, 20);
            const pointsEarned = basePoints + streakBonus;
            score += pointsEarned;
            correctAnswers++;
            streak++;

            updateScore();
            updateStreak();

            // move element into zone visually
            if (draggedItem) {
                const clone = draggedItem.cloneNode(true);
                clone.classList.remove('dragging');
                clone.style.opacity = '1';
                clone.draggable = false;
                zone.querySelector('.zone-items').appendChild(clone);
                draggedItem.style.display = 'none';
            }

            showFeedback(true, item);
            createConfetti();

            // complete if placed all items
            if (correctAnswers >= currentGameItems.length) {
                setTimeout(()=> completeLevel(), 800);
            }
        }

        function handleIncorrectAnswer(item, zone) {
            streak = 0;
            updateStreak();
            zone.classList.add('incorrect');
            if (draggedItem) {
                draggedItem.style.animation = 'shake 0.6s';
                setTimeout(()=> draggedItem.style.animation = '', 600);
            }
            setTimeout(()=> zone.classList.remove('incorrect'), 900);
            showFeedback(false, item);
        }

        /* ---- MODAL & FEEDBACK ---- */
        function showFeedback(isCorrect, item) {
            const modal = feedbackModal;
            const icon = modalIcon;
            modalFoodImage.textContent = item.icon;
            if (isCorrect) {
                modalContent.classList.remove('incorrect-modal');
                modalContent.classList.add('correct-modal');
                icon.innerHTML = '<i class="fas fa-check-circle" style="color:#48bb78;"></i>';
                modalTitle.textContent = translations[currentLanguage]['correct-title'] || 'Correct!';
                modalText.textContent = (currentLanguage === 'en') ? `${item.name.en} comes from ${item.type === 'plant' ? 'plants' : 'animals'}. ${item.info.en}` :
                                     (currentLanguage === 'or') ? `${item.name.or} ${item.type === 'plant' ? '‡¨â‡¨¶‡≠ç‡¨≠‡¨ø‡¨¶' : '‡¨™‡≠ç‡¨∞‡¨æ‡¨£‡≠Ä'} ‡¨â‡¨§‡≠ç‡¨∏ ‡¨†‡¨æ‡¨∞‡≠Å ‡¨Ü‡¨∏‡≠á‡•§ ${item.info.or}` :
                                     `${item.name.hi} ${item.type === 'plant' ? '‡§™‡•å‡§ß‡•ã‡§Ç' : '‡§ú‡§æ‡§®‡§µ‡§∞‡•ã‡§Ç'} ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à‡•§ ${item.info.hi}`;
            } else {
                modalContent.classList.remove('correct-modal');
                modalContent.classList.add('incorrect-modal');
                icon.innerHTML = '<i class="fas fa-times-circle" style="color:#f56565;"></i>';
                modalTitle.textContent = translations[currentLanguage]['incorrect-title'] || 'Try Again!';
                modalText.textContent = (currentLanguage === 'en') ?
                    `${item.name.en} comes from a different source. ${item.info.en}` :
                    (currentLanguage === 'or') ? `${item.name.or} ‡¨Ö‡¨®‡≠ç‡≠ü ‡¨â‡¨§‡≠ç‡¨∏‡¨∞‡≠Å ‡¨Ü‡¨∏‡≠á‡•§ ${item.info.or}` :
                    `${item.name.hi} ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§∏‡•á ‡§Ü‡§§‡§æ ‡§π‡•à‡•§ ${item.info.hi}`;
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            feedbackModal.style.display = 'none';
        }

        /* ---- UI Updates ---- */
        function updateScore() {
            scoreElement.textContent = `Score: ${score}`;
            const maxPossible = currentGameItems.length * 30; // approximate (base 10 + streak)
            const pct = Math.min(100, Math.round((score / (maxPossible || 1)) * 100));
            progressElement.style.width = `${pct}%`;
        }

        function updateStreak() {
            streakElement.textContent = `Streak: ${streak}`;
            streakCountDisplay.textContent = streak;
           
            // Show streak counter when streak is 3 or more
            if (streak >= 3) {
                streakCounter.style.display = 'block';
            } else {
                streakCounter.style.display = 'none';
            }
        }

        /* ---- TIMER ---- */
        function startTimer() {
            clearInterval(timerInterval);
            updateTimerDisplay();
            timerInterval = setInterval(()=> {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showTimeUpModal();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft/60);
            const s = timeLeft % 60;
            timeElement.textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
        }

        function showTimeUpModal() {
            modalIcon.innerHTML = '<i class="fas fa-clock" style="color:#f56565;"></i>';
            modalTitle.textContent = currentLanguage === 'en' ? "Time's Up!" : (currentLanguage === 'or' ? '‡¨∏‡¨Æ‡≠ü ‡¨∏‡¨∞‡¨ø‡¨ó‡¨≤‡¨æ!' : '‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!');
            modalText.textContent = (currentLanguage === 'en') ? `Time finished. You scored ${score} points and got ${correctAnswers} items correct.` :
                (currentLanguage === 'or') ? `‡¨∏‡¨Æ‡≠ü ‡¨∏‡¨Æ‡¨æ‡¨™‡≠ç‡¨§! ‡¨Ü‡¨™‡¨£ ${score} ‡¨™‡¨è‡¨£‡≠ç‡¨ü ‡¨™‡¨æ‡¨á‡¨õ‡¨®‡≠ç‡¨§‡¨ø‡•§` : `‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§! ‡§Ü‡§™‡§®‡•á ${score} ‡§Ö‡§Ç‡§ï ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§ø‡§è‡•§`;
            modalAction.textContent = currentLanguage === 'en' ? 'Try Again' : (currentLanguage === 'or' ? '‡¨™‡≠Å‡¨£‡¨ø ‡¨ö‡≠á‡¨∑‡≠ç‡¨ü‡¨æ' : '‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç');
            feedbackModal.style.display = 'flex';
        }

        /* ---- LEVEL COMPLETION WITH RANKING ---- */
        async function completeLevel() {
            clearInterval(timerInterval);
            const timeBonus = Math.max(0, Math.floor(timeLeft/10) * 5);
            score += timeBonus;
            finalScore = score;
            updateScore();
            
            // Save score to server and get rank
            try {
                const user = JSON.parse(localStorage.getItem('user'));
                if (user && user.id) {
                    const result = await saveGameResult(user.id, finalScore);
                    
                    if (result && result.rank) {
                        // Get leaderboard data
                        const leaderboardData = await getGameLeaderboard(gameName);
                        
                        // Display final results
                        displayFinalResults(finalScore, result.rank, leaderboardData);
                    } else {
                        displayFinalResults(finalScore, result?.rank || 1, []);
                    }
                } else {
                    // Fallback if no user logged in
                    displayFinalResults(finalScore, 1, []);
                }
            } catch (error) {
                console.error('Error saving game result:', error);
                displayFinalResults(finalScore, 1, []);
            }
            
            createConfetti();
            levelComplete.style.display = 'block';
        }

        /* ---- SERVER COMMUNICATION ---- */
        async function saveGameResult(userId, gameScore) {
            try {
                const timeTaken = 180 - timeLeft; // in seconds
                
                const response = await fetch('/api/game/save-result-with-rank', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        userId: userId,
                        gameName: gameName,
                        score: gameScore,
                        timeTaken: timeTaken,
                        completed: true
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to save game result');
                }
                
                return await response.json();
            } catch (error) {
                console.error('Error saving game result:', error);
                throw error;
            }
        }

        async function getGameLeaderboard(gameName) {
            try {
                const response = await fetch(`/api/game/leaderboard/${encodeURIComponent(gameName)}`);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch leaderboard');
                }
                
                return await response.json();
            } catch (error) {
                console.error('Error fetching leaderboard:', error);
                return [];
            }
        }

        /* ---- DISPLAY FINAL RESULTS ---- */
        function displayFinalResults(finalScore, rank, leaderboardData) {
            // Update score and rank display
            finalScoreElement.textContent = finalScore;
            finalRankElement.textContent = rank;
            
            // Add proper suffix to rank
            const suffix = getRankSuffix(rank);
            rankSuffixElement.textContent = suffix;
            
            // Display leaderboard
            if (leaderboardData && leaderboardData.length > 0) {
                displayLeaderboard(leaderboardData);
                leaderboardPreview.style.display = 'block';
            } else {
                leaderboardPreview.style.display = 'none';
            }
            
            // Add celebration effects based on rank
            if (rank <= 3) {
                celebrateTopRank(rank);
            }
        }

        function getRankSuffix(rank) {
            if (rank % 100 >= 11 && rank % 100 <= 13) {
                return 'th';
            }
            switch (rank % 10) {
                case 1: return 'st';
                case 2: return 'nd';
                case 3: return 'rd';
                default: return 'th';
            }
        }

        function displayLeaderboard(leaderboardData) {
            leaderboardList.innerHTML = '';
            
            const user = JSON.parse(localStorage.getItem('user'));
            const currentUserId = user ? user.id : null;
            
            // Sort by score descending
            leaderboardData.sort((a, b) => b.score - a.score);
            
            // Display top 5 or less
            const displayCount = Math.min(5, leaderboardData.length);
            for (let i = 0; i < displayCount; i++) {
                const player = leaderboardData[i];
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                
                // Highlight current user
                if (player.user_id == currentUserId) {
                    item.classList.add('current-user');
                }
                
                // Format rank (starting from 1)
                const rank = i + 1;
                const rankSuffix = getRankSuffix(rank);
                
                item.innerHTML = `
                    <div class="leaderboard-rank">${rank}${rankSuffix}</div>
                    <div class="leaderboard-name">${player.fullName}</div>
                    <div class="leaderboard-score">${player.score}</div>
                `;
                
                leaderboardList.appendChild(item);
            }
        }

        function celebrateTopRank(rank) {
            // Add special effects for top 3 ranks
            const medalColors = ['#FFD700', '#C0C0C0', '#CD7F32']; // Gold, Silver, Bronze
            
            if (rank <= 3) {
                // Update medal icon color
                const medalIcon = document.querySelector('.level-complete .badge i');
                medalIcon.style.color = medalColors[rank - 1];
                
                // Add special confetti for top ranks
                createSpecialConfetti(rank);
                
                // Play victory sound if available
                if (rank === 1) {
                    // First place special celebration
                    setTimeout(() => {
                        createConfetti();
                        setTimeout(() => createConfetti(), 300);
                        setTimeout(() => createConfetti(), 600);
                    }, 500);
                }
            }
        }

        function createSpecialConfetti(rank) {
            const colors = rank === 1 ? ['#FFD700', '#FFED4E', '#FFF9C4'] : 
                          rank === 2 ? ['#C0C0C0', '#E5E4E2', '#D3D3D3'] : 
                          ['#CD7F32', '#B87333', '#8B4513'];
            
            for (let i = 0; i < 15; i++) {
                const c = document.createElement('div');
                c.style.position = 'fixed';
                c.style.left = Math.random() * 100 + 'vw';
                c.style.top = '-10px';
                c.style.width = '12px';
                c.style.height = '12px';
                c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                c.style.zIndex = 1500;
                c.style.borderRadius = '50%';
                c.style.animation = `confetti-fall ${2 + Math.random()}s ease-out forwards`;
                document.body.appendChild(c);
                setTimeout(() => { if (document.body.contains(c)) document.body.removeChild(c); }, 3000);
            }
        }

        /* ---- START GAME / LANGUAGE SWITCH ---- */
        function startGame() {
            instructionsModal.style.display = 'none';
            gameHeader.style.display = 'block';
            gameStatsContainer.style.display = 'block';
            gameArea.style.display = 'block';
            levelComplete.style.display = 'none';
            leaderboardPreview.style.display = 'none';
           
            // reset stats
            score = 0; correctAnswers = 0; streak = 0; timeLeft = 180; completedItems = [];
            plantItems.innerHTML = ''; animalItems.innerHTML = '';
           
            // Generate new random items
            createFoodItems();
            setupDragAndDrop();
            startTimer();
            updateScore(); updateStreak();
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
           
            // Update all language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-lang')===lang);
            });
           
            // translate elements
            const map = translations[lang] || translations.en;
            Object.keys(map).forEach(key => {
                document.querySelectorAll(`[data-translate="${key}"]`).forEach(el => {
                    el.textContent = map[key];
                });
            });
           
            // update instructions text
            document.getElementById('instructions-title').textContent = map['instructions-title'];
            document.getElementById('instructions-intro').textContent = map['instructions-intro'];
            document.getElementById('instruction-1').textContent = map['instruction-1'];
            document.getElementById('instruction-2').textContent = map['instruction-2'];
            document.getElementById('instruction-3').textContent = map['instruction-3'];
            document.getElementById('instruction-4').textContent = map['instruction-4'];
            document.getElementById('instruction-5').textContent = map['instruction-5'];
            document.getElementById('instruction-6').textContent = map['instruction-6'];
            document.getElementById('instructions-outro').textContent = map['instructions-outro'];
            document.getElementById('start-game-btn').textContent = map['start-game-btn'];
           
            // update food names in UI
            document.querySelectorAll('.food-item').forEach(el => {
                const id = parseInt(el.dataset.id);
                const it = foodItems.find(f=>f.id===id);
                if (it) el.querySelector('.food-name').textContent = it.name[lang] || it.name.en;
            });
           
            // apply language-specific font classes
            if (lang === 'or') {
                document.body.classList.add('odia-text');
                document.body.classList.remove('hindi-text');
            } else if (lang === 'hi') {
                document.body.classList.add('hindi-text');
                document.body.classList.remove('odia-text');
            } else {
                document.body.classList.remove('odia-text');
                document.body.classList.remove('hindi-text');
            }
        }

        /* ---- FUN STUFF ---- */
        function createConfetti() {
            for (let i=0;i<12;i++){
                const c = document.createElement('div');
                c.style.position='fixed';
                c.style.left = Math.random()*100 + 'vw';
                c.style.top = '-10px';
                c.style.width='10px'; c.style.height='10px';
                const colors = ['#ff6b6b','#4ecdc4','#45b7d1','#96ceb4','#ffeaa7'];
                c.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
                c.style.zIndex = 1500;
                c.style.borderRadius = '2px';
                c.style.animation = `confetti-fall 2.8s ease-out forwards`;
                document.body.appendChild(c);
                setTimeout(()=> { if (document.body.contains(c)) document.body.removeChild(c); }, 3000);
            }
        }

        /* ---- EVENTS & BOOT ---- */
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
            if ((e.key === 'r' || e.key === 'R') && e.ctrlKey) { e.preventDefault(); startGame(); }
            if (e.key === '1') switchLanguage('en'); if (e.key==='2') switchLanguage('or'); if (e.key==='3') switchLanguage('hi');
        });

        // hide modal when clicking outside content
        feedbackModal.addEventListener('click', (ev)=> { if (ev.target === feedbackModal) closeModal(); });

    </script>
</body>
</html>