<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matter Mission тАФ Save the Three Kingdoms</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
  body{background:#f0f7ff;color:#0f1724;overflow-x:hidden}
  .container{max-width:1100px;margin:0 auto;padding:0 18px}
  header{background:linear-gradient(135deg,#0e2a47 0%,#1a365d 100%);color:white;padding:14px 0;position:sticky;top:0;z-index:100}
  .header-content{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .logo{display:flex;gap:12px;align-items:center}
  .logo-icon{background:white;color:#155e75;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
  .logo-text{font-weight:800;font-size:1.2rem}
  .logo-text span{color:#38b2ac}
  nav ul{display:flex;gap:16px;list-style:none}
  nav a{color:white;text-decoration:none;font-weight:600}
  .language-switcher{position:absolute;top:16px;right:18px;display:flex;gap:6px;background:rgba(255,255,255,0.12);padding:6px;border-radius:22px;backdrop-filter:blur(6px);z-index:1200}
  .lang-btn{background:transparent;border:none;color:white;padding:8px 10px;border-radius:14px;font-weight:700;cursor:pointer}
  .lang-btn.active{background:rgba(255,255,255,0.22)}
  
  /* header hero */
  .game-header{background:linear-gradient(rgba(14,42,71,0.85),rgba(26,54,93,0.9)),url('https://images.unsplash.com/photo-1541976076758-0d0b0a2b9a5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&q=80');background-size:cover;padding:34px 0;color:white;text-align:center;margin-bottom:14px}
  .game-header h1{font-size:2rem;margin-bottom:6px}
  .game-header p{opacity:0.95}
  
  /* stats */
  .game-stats{display:flex;align-items:center;justify-content:space-between;background:white;padding:12px 18px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.06);gap:12px;margin:12px auto;max-width:1000px}
  .stat{display:flex;align-items:center;gap:10px;font-weight:700;color:#0f1724}
  .progress-container{width:220px;height:12px;background:#e6eef9;border-radius:10px;overflow:hidden}
  .progress-bar{height:100%;background:#3182ce;width:0%;transition:width .45s ease}
  .streak-counter{position:fixed;right:18px;top:45%;transform:translateY(-50%);background:linear-gradient(45deg,#ff7a7a,#ff9a6b);color:white;padding:12px 18px;border-radius:32px;font-weight:800;display:none;z-index:900}
  
  /* worlds */
  .worlds{max-width:1000px;margin:18px auto 80px;display:flex;flex-direction:column;gap:18px;padding-bottom:24px}
  .world{background:white;border-radius:16px;padding:14px;box-shadow:0 12px 30px rgba(2,6,23,0.06);border:2px solid rgba(16,24,40,0.03)}
  .world-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
  .world-title{font-weight:800;color:#0f1724;display:flex;gap:10px;align-items:center}
  .cards-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
  .card{background:linear-gradient(145deg,#fff,#f6fbff);border-radius:12px;padding:12px;min-height:110px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;cursor:pointer;transition:all .22s;box-shadow:0 8px 18px rgba(2,6,23,0.04)}
  .card:hover{transform:translateY(-8px);box-shadow:0 18px 38px rgba(2,6,23,0.06)}
  .card.disabled{opacity:0.36;cursor:not-allowed;transform:none;box-shadow:none}
  .card-icon{font-size:2.4rem;margin-bottom:8px}
  .card-title{font-weight:700;color:#0f1724}
  .card-sub{font-size:0.9rem;color:#475569;margin-top:6px}
  .badge-small{background:#eef8ff;color:#075985;padding:6px 10px;border-radius:999px;font-weight:800}
  
  /* modal */
  .modal{display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:2000;align-items:center;justify-content:center;padding:18px}
  .modal-content{background:linear-gradient(145deg,#ffffff,#f6fbff);border-radius:14px;padding:18px;max-width:760px;width:100%;box-shadow:0 30px 60px rgba(2,6,23,0.14);position:relative;text-align:center}
  .modal-close{position:absolute;right:12px;top:12px;background:rgba(0,0,0,0.05);border:none;width:40px;height:40px;border-radius:50%;cursor:pointer}
  .modal-icon{width:86px;height:86px;border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 8px;font-size:2.4rem;background:rgba(255,255,255,0.9);box-shadow:0 8px 18px rgba(2,6,23,0.06)}
  .modal-question{font-weight:800;font-size:1.15rem;color:#0f1724;margin-bottom:10px}
  .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .opt-btn{min-width:140px;padding:10px 14px;border-radius:10px;border:1px solid rgba(49,130,206,0.08);background:linear-gradient(145deg,#fff,#eef7ff);cursor:pointer;font-weight:800}
  .opt-btn:hover{transform:translateY(-4px)}
  .opt-btn.correct{background:linear-gradient(135deg,#d4f7e6,#b7f0d4);border-color:#48bb78}
  .opt-btn.wrong{background:linear-gradient(135deg,#ffdede,#ffc9c9);border-color:#f56565}
  .modal-hint{margin-top:10px;color:#475569}
  .start-game-btn{padding:12px 20px;border-radius:12px;border:none;background:linear-gradient(135deg,#38b2ac,#2c9a94);color:white;font-weight:800;cursor:pointer}
  .next-level-btn{padding:10px 16px;border-radius:12px;border:none;background:linear-gradient(45deg,#4facfe,#00f2fe);color:white;font-weight:800;cursor:pointer}
  
  /* Page System */
  .page {display: none;}
  .page.active {display: block;}
  
  /* Instructions Modal - WITH LANGUAGE SWITCHER */
  .instructions-modal {display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 2000; align-items: center; justify-content: center;}
  .instructions-content {background: white; border-radius: 20px; width: 90%; max-width: 700px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); position: relative; text-align: center;}
  .instructions-title {font-size: 2rem; margin-bottom: 20px; color: #1a365d; font-weight: 700;}
  .instructions-text {color: #64748b; margin-bottom: 25px; line-height: 1.6; text-align: left; font-size: 1.1rem;}
  .instructions-list {margin-left: 20px; margin-bottom: 25px;}
  .instructions-list li {margin-bottom: 10px;}
  
  /* Fun Fact Modal - LIKE IN SAMPLE */
  .funfact-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }
  .funfact-content {
    background: white;
    border-radius: 20px;
    width: 90%;
    max-width: 500px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    position: relative;
    text-align: center;
  }
  .funfact-icon {
    font-size: 3rem;
    margin-bottom: 15px;
  }
  .funfact-title {
    font-size: 1.8rem;
    margin-bottom: 15px;
    color: #1a365d;
    font-weight: 700;
  }
  .funfact-text {
    color: #64748b;
    margin-bottom: 25px;
    line-height: 1.6;
    font-size: 1.1rem;
  }
  .continue-btn {
    padding: 12px 30px;
    background: #38b2ac;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 20px;
  }
  .continue-btn:hover {
    background: #2c9a94;
    transform: translateY(-2px);
  }
  
  /* Kingdom Unlock Page */
  .kingdom-unlock-page {text-align: center; padding: 40px 20px;}
  .kingdom-unlock-content {background: white; border-radius: 20px; padding: 40px; max-width: 700px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1);}
  .kingdom-icon-large {font-size: 5rem; margin-bottom: 20px;}
  .kingdom-unlock-title {font-size: 2.2rem; margin-bottom: 15px; color: #1a365d;}
  .kingdom-unlock-text {color: #64748b; margin-bottom: 30px; line-height: 1.6;}
  
  /* Level Complete */
  .level-complete {text-align:center; padding:28px; background:linear-gradient(145deg,#ffffff,#f7fafc); border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.08); max-width:700px; margin:24px auto; display: none;}
  .level-complete .badge {font-size: 4rem; margin-bottom: 20px;}
  
  /* Final Boss */
  .final-boss-page {text-align: center; padding: 40px 20px;}
  .boss-container {background: white; border-radius: 20px; padding: 40px; max-width: 700px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.1);}
  
  /* small screens */
  @media(max-width:980px){.cards-grid{grid-template-columns:repeat(2,1fr)}.game-header h1{font-size:1.6rem}}
  @media(max-width:520px){.cards-grid{grid-template-columns:repeat(1,1fr)}.language-switcher{right:10px;top:10px}.streak-counter{display:none}}
  
  /* Animations */
  .pulse {animation: pulse 1.5s infinite;}
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  .shake {animation: shake 0.5s;}
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
  }
  .confetti {position: absolute; pointer-events: none; z-index: 10;}
</style>
</head>
<body>
  <div class="language-switcher" id="global-lang">
    <button class="lang-btn active" data-lang="en">English</button>
    <button class="lang-btn" data-lang="or">рмУрмбрм╝рм┐рмЖ</button>
    <button class="lang-btn" data-lang="hi">рд╣рд┐рдиреНрджреА</button>
  </div>

  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo"><div class="logo-icon"><i class="fas fa-vial"></i></div><div class="logo-text">STEM <span>Learn</span> Odisha</div></div>
        <nav>
          <ul>
            <li><a href="#" data-translate="nav-dashboard">Dashboard</a></li>
            <li><a href="#" data-translate="nav-about">About</a></li>
            <li><a href="#" data-translate="nav-contact">Contact</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Instructions Modal with Language Switcher -->
  <div class="instructions-modal" id="instructions-modal">
    <div class="instructions-content">
      <div class="language-switcher" style="position: relative; top: 0; right: 0; margin: 0 auto 20px auto; width: fit-content; background: rgba(26, 54, 93, 0.1);">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="or">рмУрмбрм╝рм┐рмЖ</button>
        <button class="lang-btn" data-lang="hi">рд╣рд┐рдиреНрджреА</button>
      </div>
      
      <h2 class="instructions-title" id="instructions-title">How to Play Matter Mission</h2>
      <div class="instructions-text" id="instructions-text">
        <p id="instructions-intro">Welcome to Matter Mission! Here's how to save the three kingdoms:</p>
        <ul class="instructions-list" id="instructions-list">
          <li id="instruction-1">Complete challenges in each kingdom (Solidia, Liquida, Gasia) to unlock the next one.</li>
          <li id="instruction-2">Answer questions about physical and chemical changes to earn points.</li>
          <li id="instruction-3">Build streaks for bonus points - the longer your streak, the more points you earn!</li>
          <li id="instruction-4">Watch the timer - complete challenges before time runs out for bonus points.</li>
          <li id="instruction-5">Complete all three kingdoms to face the final boss challenge.</li>
          <li id="instruction-6">Defeat the final boss to save all three kingdoms!</li>
        </ul>
        <p id="instructions-outro">Good luck on your mission to save the kingdoms of matter!</p>
      </div>
      <button class="start-game-btn" id="start-game-btn">Start Mission</button>
    </div>
  </div>

  <!-- Fun Fact Modal -->
  <div class="funfact-modal" id="funfact-modal">
    <div class="funfact-content">
      <div class="funfact-icon" id="funfact-icon">ЁЯОЙ</div>
      <h2 class="funfact-title" id="funfact-title">Great Job!</h2>
      <p class="funfact-text" id="funfact-text"></p>
      <button class="continue-btn" id="continue-btn">Continue</button>
    </div>
  </div>

  <!-- Kingdom Unlock Pages -->
  <div class="page kingdom-unlock-page" id="solidia-unlock-page">
    <div class="container">
      <div class="kingdom-unlock-content">
        <div class="kingdom-icon-large">ЁЯзК</div>
        <h2 class="kingdom-unlock-title" id="solidia-unlock-title">Welcome to Solidia Kingdom!</h2>
        <p class="kingdom-unlock-text" id="solidia-unlock-text">The kingdom of solids awaits you! Complete challenges about solid matter to restore balance.</p>
        <button class="start-game-btn pulse" id="start-solidia-btn">Start Solidia Kingdom</button>
      </div>
    </div>
  </div>

  <!-- Solidia Game Page -->
  <div class="page" id="solidia-page">
    <section class="game-header">
      <div class="container">
        <h1 id="solidia-header">Solidia Kingdom - Solids</h1>
        <p id="solidia-desc">Help restore balance to Solidia by identifying physical and chemical changes!</p>
      </div>
    </section>

    <div class="container" id="game-stats">
      <div class="game-stats">
        <div class="stat"><i class="fas fa-clock" style="color:#ef4444"></i> <span id="time">04:00</span></div>
        <div class="stat"><i class="fas fa-star" style="color:#16a34a"></i> <span id="score">Score: 0</span></div>
        <div class="stat"><i class="fas fa-fire" style="color:#f59e0b"></i> <span id="streak">Streak: 0</span></div>
        <div class="progress-container"><div class="progress-bar" id="progress" style="width:0%"></div></div>
      </div>
    </div>

    <div class="container worlds">
      <div class="world" id="w-solidia">
        <div class="world-header">
          <div class="world-title"><i class="fas fa-cube"></i> <span>Solidia - Solids</span></div>
          <div><span class="badge-small" id="status-solidia">0/6</span></div>
        </div>
        <div class="cards-grid" id="cards-solidia"></div>
      </div>
    </div>

    <div class="container">
      <div class="level-complete" id="level-complete-solidia">
        <div class="badge">ЁЯПЕ</div>
        <h3 id="level-complete-title-solidia">Solidia Kingdom Complete!</h3>
        <p id="level-complete-text-solidia">You restored balance to Solidia! Ready for the next kingdom?</p>
        <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
          <button class="next-level-btn" id="next-kingdom-solidia">Next Kingdom</button>
        </div>
      </div>
    </div>
  </div>

  <div class="page kingdom-unlock-page" id="liquida-unlock-page">
    <div class="container">
      <div class="kingdom-unlock-content">
        <div class="kingdom-icon-large">ЁЯТз</div>
        <h2 class="kingdom-unlock-title" id="liquida-unlock-title">Liquida Kingdom Unlocked!</h2>
        <p class="kingdom-unlock-text" id="liquida-unlock-text">You've mastered solids! Now face the challenges of liquids in the Liquida kingdom.</p>
        <button class="start-game-btn pulse" id="start-liquida-btn">Start Liquida Kingdom</button>
      </div>
    </div>
  </div>

  <!-- Liquida Game Page -->
  <div class="page" id="liquida-page">
    <section class="game-header">
      <div class="container">
        <h1 id="liquida-header">Liquida Kingdom - Liquids</h1>
        <p id="liquida-desc">Help restore balance to Liquida by identifying physical and chemical changes!</p>
      </div>
    </section>

    <div class="container" id="game-stats">
      <div class="game-stats">
        <div class="stat"><i class="fas fa-clock" style="color:#ef4444"></i> <span id="time-liquida">04:00</span></div>
        <div class="stat"><i class="fas fa-star" style="color:#16a34a"></i> <span id="score-liquida">Score: 0</span></div>
        <div class="stat"><i class="fas fa-fire" style="color:#f59e0b"></i> <span id="streak-liquida">Streak: 0</span></div>
        <div class="progress-container"><div class="progress-bar" id="progress-liquida" style="width:0%"></div></div>
      </div>
    </div>

    <div class="container worlds">
      <div class="world" id="w-liquida">
        <div class="world-header">
          <div class="world-title"><i class="fas fa-tint"></i> <span>Liquida - Liquids</span></div>
          <div><span class="badge-small" id="status-liquida">0/6</span></div>
        </div>
        <div class="cards-grid" id="cards-liquida"></div>
      </div>
    </div>

    <div class="container">
      <div class="level-complete" id="level-complete-liquida">
        <div class="badge">ЁЯПЕ</div>
        <h3 id="level-complete-title-liquida">Liquida Kingdom Complete!</h3>
        <p id="level-complete-text-liquida">You restored balance to Liquida! Ready for the next kingdom?</p>
        <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
          <button class="next-level-btn" id="next-kingdom-liquida">Next Kingdom</button>
        </div>
      </div>
    </div>
  </div>

  <div class="page kingdom-unlock-page" id="gasia-unlock-page">
    <div class="container">
      <div class="kingdom-unlock-content">
        <div class="kingdom-icon-large">ЁЯТи</div>
        <h2 class="kingdom-unlock-title" id="gasia-unlock-title">Gasia Kingdom Unlocked!</h2>
        <p class="kingdom-unlock-text" id="gasia-unlock-text">You've mastered liquids! Now face the challenges of gases in the Gasia kingdom.</p>
        <button class="start-game-btn pulse" id="start-gasia-btn">Start Gasia Kingdom</button>
      </div>
    </div>
  </div>

  <!-- Gasia Game Page -->
  <div class="page" id="gasia-page">
    <section class="game-header">
      <div class="container">
        <h1 id="gasia-header">Gasia Kingdom - Gases</h1>
        <p id="gasia-desc">Help restore balance to Gasia by identifying physical and chemical changes!</p>
      </div>
    </section>

    <div class="container" id="game-stats">
      <div class="game-stats">
        <div class="stat"><i class="fas fa-clock" style="color:#ef4444"></i> <span id="time-gasia">04:00</span></div>
        <div class="stat"><i class="fas fa-star" style="color:#16a34a"></i> <span id="score-gasia">Score: 0</span></div>
        <div class="stat"><i class="fas fa-fire" style="color:#f59e0b"></i> <span id="streak-gasia">Streak: 0</span></div>
        <div class="progress-container"><div class="progress-bar" id="progress-gasia" style="width:0%"></div></div>
      </div>
    </div>

    <div class="container worlds">
      <div class="world" id="w-gasia">
        <div class="world-header">
          <div class="world-title"><i class="fas fa-wind"></i> <span>Gasia - Gases</span></div>
          <div><span class="badge-small" id="status-gasia">0/6</span></div>
        </div>
        <div class="cards-grid" id="cards-gasia"></div>
      </div>
    </div>

    <div class="container">
      <div class="level-complete" id="level-complete-gasia">
        <div class="badge">ЁЯПЕ</div>
        <h3 id="level-complete-title-gasia">Gasia Kingdom Complete!</h3>
        <p id="level-complete-text-gasia">You restored balance to Gasia! Congratulations on saving all three kingdoms!</p>
        <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
          <button class="next-level-btn" id="final-boss-btn">Final Boss Battle</button>
          <button class="next-level-btn" id="play-again-final">Play Again</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Final Boss Page -->
  <div class="page final-boss-page" id="final-boss-page">
    <section class="game-header">
      <div class="container">
        <h1 id="boss-header">Final Boss Battle!</h1>
        <p id="boss-desc">Face the ultimate challenge to prove your mastery of matter changes!</p>
      </div>
    </section>
    
    <div class="container">
      <div class="boss-container">
        <div class="kingdom-icon-large">ЁЯСС</div>
        <h2 class="kingdom-unlock-title" id="boss-title">Chaotron - The Matter Mixer</h2>
        <p class="kingdom-unlock-text" id="boss-text">The final boss has mixed all states of matter! Answer 6 rapid-fire questions to prove your knowledge and save all three kingdoms!</p>
        
        <div style="margin: 30px 0;">
          <div class="game-stats" style="max-width: 500px; margin: 0 auto;">
            <div class="stat"><i class="fas fa-star" style="color:#16a34a"></i> <span id="boss-score">Score: 0</span></div>
            <div class="stat"><i class="fas fa-fire" style="color:#f59e0b"></i> <span id="boss-streak">Streak: 0</span></div>
          </div>
        </div>
        
        <div id="boss-questions-container" style="margin: 30px 0;"></div>
        
        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 30px;">
          <button class="start-game-btn" id="start-boss-btn">Start Boss Battle</button>
          <button class="next-level-btn" id="back-to-game-btn">Back to Game</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Question Modal -->
  <div class="modal" id="question-modal">
    <div class="modal-content">
      <button class="modal-close" id="modal-close"><i class="fas fa-times"></i></button>
      <div class="modal-icon" id="modal-icon">ЁЯФм</div>
      <div class="modal-question" id="modal-question">Question text</div>
      <div class="options" id="modal-options"></div>
      <div class="modal-hint" id="modal-hint" style="display:none"></div>
      <div style="margin-top:12px">
        <button class="next-level-btn" id="modal-continue" style="display:none">Continue</button>
      </div>
    </div>
  </div>

  <!-- Result Modal -->
  <div class="modal" id="result-modal">
    <div class="modal-content">
      <button class="modal-close" id="result-close"><i class="fas fa-times"></i></button>
      <div style="font-size:3rem" id="result-emoji">ЁЯОЙ</div>
      <h2 id="result-title">Mission Complete!</h2>
      <p id="result-text">You saved all three kingdoms!</p>
      <p>Final Score: <strong id="final-score">0</strong> points</p>
      <div style="margin-top:12px">
        <button class="next-level-btn" id="result-retry">Play Again</button>
      </div>
    </div>
  </div>

  <div class="streak-counter" id="streak-counter">ЁЯФе <span id="streak-count">0</span> Streak!</div>

<script>
/* ========= GAME CONFIG ========= */
const CONFIG = {
  perWorldPick: 6,
  bossQuestions: 6,
  sessionTime: 240,
  basePoints: 10,
  streakBonus: 2
};

/* ========= QUESTION POOLS ========= */
const worldPools = {
  solidia: [
    { id:'s1', icon:'ЁЯзК', title:{en:'Ice Melting', or:'рммрм░рмл рмЧрм│рм┐рммрм╛', hi:'рдмрд░реНрдл рдкрд┐рдШрд▓рдирд╛'},
      prompt:{en:'Ice melting in sun тАФ physical or chemical?', or:'рм╕рнВрм░рнНрмЬрнНрнЯ рм░рм╢рнНрморм┐рм░рнЗ рммрм░рмл рмЧрм│рм┐рммрм╛ тАФ рмнрнМрмдрм┐рмХ рмХрм┐ рм░рм╛рм╕рм╛рнЯрмирм┐рмХ?', hi:'рдзреВрдк рдореЗрдВ рдмрд░реНрдл рдкрд┐рдШрд▓рдирд╛ тАФ рднреМрддрд┐рдХ рдпрд╛ рд░рд╛рд╕рд╛рдпрдирд┐рдХ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Physical',or:'рмнрнМрмдрм┐рмХ',hi:'рднреМрддрд┐рдХ'},correct:true},
        {k:'b',txt:{en:'Chemical',or:'рм░рм╛рм╕рм╛рнЯрмирм┐рмХ',hi:'рд░рд╛рд╕рд╛рдпрдирд┐рдХ'},correct:false}
      ], hint:{en:'Melting changes state but not substance', or:'рмЕрммрм╕рнНрмерм╛ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми', hi:'рдЕрд╡рд╕реНрдерд╛ рдкрд░рд┐рд╡рд░реНрддрди'},
      fun:{en:'Ice cream melts faster on hot days!', or:'рмЧрм░рмо рмжрм┐рмирнЗ рмЖрмЗрм╕рнНрмХрнНрм░рм┐рмо рм╢рнАрмШрнНрм░ рмЧрм│рнЗ', hi:'рдЧрд░реНрдо рджрд┐рди рдореЗрдВ рдЖрдЗрд╕рдХреНрд░реАрдо рдЬрд▓реНрджреА рдкрд┐рдШрд▓рддреА рд╣реИ!'}},
    
    { id:'s2', icon:'ЁЯФи', title:{en:'Breaking Glass', or:'рмХрм╛рмЪ рмнрм╛рмЩрнНрмЧрм┐рммрм╛', hi:'рдХрд╛рдВрдЪ рддреЛрдбрд╝рдирд╛'},
      prompt:{en:'Breaking a glass window тАФ reversible?', or:'рмХрм╛рмЪ рмЦрм┐рмбрм╝рмХрм┐ рмнрм╛рмЩрнНрмЧрм┐рммрм╛ тАФ рмкрнБрмирм░рнНрммрм╛рм░ рм╕рморнНрмнрмм?', hi:'рдХрд╛рдВрдЪ рдХреА рдЦрд┐рдбрд╝рдХреА рддреЛрдбрд╝рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рдЙрд▓рдЯрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'No, irreversible',or:'рмирм╛рм╣рм┐рмБ, рмЕрмкрм░рм┐рммрм░рнНрмдрнНрмдрмирнАрнЯ',hi:'рдирд╣реАрдВ, рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп'},correct:true},
        {k:'b',txt:{en:'Yes, reversible',or:'рм╣рмБ, рмкрнБрмирм░рнНрммрм╛рм░ рм╕рморнНрмнрмм',hi:'рд╣рд╛рдБ, рдкреНрд░рддрд┐рд╡рд░реНрддреА'},correct:false}
      ], hint:{en:'Broken pieces cannot become whole glass again', or:'рмнрм╛рмЩрнНрмЧрм┐ рмпрм╛рмЗрмерм┐рммрм╛ рмХрм╛рмЪ рмкрнБрмгрм┐ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рм╣рнЛрмЗрмкрм╛рм░рм┐рмм рмирм╛рм╣рм┐рмБ', hi:'рдЯреВрдЯреЗ рд╣реБрдП рдЯреБрдХрдбрд╝реЗ рдлрд┐рд░ рд╕реЗ рдкреВрд░реЗ рдХрд╛рдВрдЪ рдирд╣реАрдВ рдмрди рд╕рдХрддреЗ'},
      fun:{en:'Glass can be recycled but not unbroken!', or:'рмХрм╛рмЪ рм░рм┐рм╕рм╛рмЗрмХрм▓рнН рмХрм░рм╛рмпрм╛рмЗрмкрм╛рм░рнЗ рмХрм┐рмирнНрмдрнБ рмЕрмнрмЩрнНрмЧ рмирнБрм╣рнЗрмБ!', hi:'рдХрд╛рдВрдЪ рдХреЛ рд░рд┐рд╕рд╛рдЗрдХрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдЕрдирдмреНрд░реЛрдХрди рдирд╣реАрдВ!'}},
    
    { id:'s3', icon:'ЁЯНл', title:{en:'Chocolate Melting', or:'рмЪрмХрнЛрм▓рнЗрмЯрнН рмЧрм│рм┐рммрм╛', hi:'рдЪреЙрдХрд▓реЗрдЯ рдкрд┐рдШрд▓рдирд╛'},
      prompt:{en:'Chocolate melting in hand тАФ physical change?', or:'рм╣рм╛рмдрм░рнЗ рмЪрмХрнЛрм▓рнЗрмЯрнН рмЧрм│рм┐рммрм╛ тАФ рмнрнМрмдрм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рд╣рд╛рде рдореЗрдВ рдЪреЙрдХрд▓реЗрдЯ рдкрд┐рдШрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рднреМрддрд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'tf', answers:[
        {k:'yes',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'no',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Melting changes state, not composition', or:'рмЕрммрм╕рнНрмерм╛ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми, рмЧрмарми рмирнБрм╣рнЗрмБ', hi:'рдЕрд╡рд╕реНрдерд╛ рдкрд░рд┐рд╡рд░реНрддрди, рд╕рдВрд░рдЪрдирд╛ рдирд╣реАрдВ'},
      fun:{en:'White chocolate melts fastest!', or:'рмзрм│рм╛ рмЪрмХрнЛрм▓рнЗрмЯрнН рм╕рммрнБрмарм╛рм░рнБ рм╢рнАрмШрнНрм░ рмЧрм│рнЗ!', hi:'рд╕рдлреЗрдж рдЪреЙрдХрд▓реЗрдЯ рд╕рдмрд╕реЗ рддреЗрдЬреА рд╕реЗ рдкрд┐рдШрд▓рддреА рд╣реИ!'}},
    
    { id:'s4', icon:'тЬПя╕П', title:{en:'Sharpening Pencil', or:'рмкрнЗрмирнНрм╕рм┐рм▓рнН рм╢рм╛рм░рнНрмк рмХрм░рм┐рммрм╛', hi:'рдкреЗрдВрд╕рд┐рд▓ рддреЗрдЬ рдХрд░рдирд╛'},
      prompt:{en:'Sharpening a pencil тАФ new substance formed?', or:'рмкрнЗрмирнНрм╕рм┐рм▓рнН рм╢рм╛рм░рнНрмк рмХрм░рм┐рммрм╛ тАФ рмирнВрмЖ рмкрмжрм╛рм░рнНрме рм╕рнГрм╖рнНрмЯрм┐ рм╣рнЗрмЙрмЫрм┐?', hi:'рдкреЗрдВрд╕рд┐рд▓ рддреЗрдЬ рдХрд░рдирд╛ тАФ рдХреНрдпрд╛ рдирдпрд╛ рдкрджрд╛рд░реНрде рдмрдирддрд╛ рд╣реИ?'},
      type:'tf', answers:[
        {k:'yes',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:false},
        {k:'no',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:true}
      ], hint:{en:'Only shape changes, material remains same', or:'рмХрнЗрммрм│ рмЖрмХрнГрмдрм┐ рммрмжрм│рнЗ, рмкрмжрм╛рм░рнНрме рм╕рморм╛рми рм░рм╣рнЗ', hi:'рдХреЗрд╡рд▓ рдЖрдХрд╛рд░ рдмрджрд▓рддрд╛ рд╣реИ, рдкрджрд╛рд░реНрде рд╡рд╣реА рд░рд╣рддрд╛ рд╣реИ'},
      fun:{en:'Pencil shavings can be used in art!', or:'рмкрнЗрмирнНрм╕рм┐рм▓рнН рмЫрм┐рм▓рм╛ рмХрм│рм╛рм░рнЗ рммрнНрнЯрммрм╣рм╛рм░ рм╣рнЛрмЗрмкрм╛рм░рнЗ!', hi:'рдкреЗрдВрд╕рд┐рд▓ рдХреЗ рдЫрд┐рд▓рдХреЗ рдХрд▓рд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ!'}},
    
    { id:'s5', icon:'ЁЯки', title:{en:'Crushing Stone', or:'рмкрмерм░ рмЪрнВрм░рнНрмгрнНрмг рмХрм░рм┐рммрм╛', hi:'рдкрддреНрдерд░ рдХреЛ рдХреБрдЪрд▓рдирд╛'},
      prompt:{en:'Crushing stone into powder тАФ chemical change?', or:'рмкрмерм░рмХрнБ рмЪрнВрм░рнНрмгрнНрмг рмХрм░рм┐рммрм╛ тАФ рм░рм╛рм╕рм╛рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдкрддреНрдерд░ рдХреЛ рдЪреВрд░реНрдг рдореЗрдВ рдХреБрдЪрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Physical',or:'рмнрнМрмдрм┐рмХ',hi:'рднреМрддрд┐рдХ'},correct:true},
        {k:'b',txt:{en:'Chemical',or:'рм░рм╛рм╕рм╛рнЯрмирм┐рмХ',hi:'рд░рд╛рд╕рд╛рдпрдирд┐рдХ'},correct:false}
      ], hint:{en:'Size changes, but stone remains stone', or:'рмЖрмХрм╛рм░ рммрмжрм│рнЗ, рмХрм┐рмирнНрмдрнБ рмкрмерм░ рмкрмерм░ рм╣рм┐рмБ рм░рм╣рнЗ', hi:'рдЖрдХрд╛рд░ рдмрджрд▓рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкрддреНрдерд░ рдкрддреНрдерд░ рд╣реА рд░рд╣рддрд╛ рд╣реИ'},
      fun:{en:'Stone powder is used in construction!', or:'рмкрмерм░ рмЪрнВрм░рнНрмгрнНрмг рмирм┐рм░рнНрморм╛рмг рмХрм╛рм░рнНрмпрнНрнЯрм░рнЗ рммрнНрнЯрммрм╣рнГрмд рм╣рнБрмП!', hi:'рдкрддреНрдерд░ рдХрд╛ рдЪреВрд░реНрдг рдирд┐рд░реНрдорд╛рдг рдХрд╛рд░реНрдп рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рд╣реЛрддрд╛ рд╣реИ!'}},
    
    { id:'s6', icon:'ЁЯУД', title:{en:'Tearing Paper', or:'рмХрм╛рмЧрмЬ рмЫрм┐рмгрнНрмбрм╛рмЗрммрм╛', hi:'рдХрд╛рдЧрдЬ рдлрд╛рдбрд╝рдирд╛'},
      prompt:{en:'Tearing paper into pieces тАФ reversible change?', or:'рмХрм╛рмЧрмЬрмХрнБ рмЯрнБрмХрнБрмбрм╝рм╛ рмЫрм┐рмгрнНрмбрм╛рмЗрммрм╛ тАФ рмкрнНрм░рмдрнНрнЯрм╛рммрм░рнНрмдрнНрмдрмирнАрнЯ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдХрд╛рдЧрдЬ рдХреЛ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рдлрд╛рдбрд╝рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рдкреНрд░рддрд┐рд╡рд░реНрддреА рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Irreversible',or:'рмЕрмкрнНрм░рмдрнНрнЯрм╛рммрм░рнНрмдрнНрмдрмирнАрнЯ',hi:'рдЕрдкреНрд░рддрд┐рд╡рд░реНрддреА'},correct:true},
        {k:'b',txt:{en:'Reversible',or:'рмкрнНрм░рмдрнНрнЯрм╛рммрм░рнНрмдрнНрмдрмирнАрнЯ',hi:'рдкреНрд░рддрд┐рд╡рд░реНрддреА'},correct:false}
      ], hint:{en:'Torn paper cannot be perfectly restored', or:'рмЫрм┐рмгрнНрмбрм╛рмпрм╛рмЗрмерм┐рммрм╛ рмХрм╛рмЧрмЬ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рмнрм╛рммрнЗ рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм╛рмпрм╛рмЗрмкрм╛рм░рм┐рмм рмирм╛рм╣рм┐рмБ', hi:'рдлрдЯрд╛ рд╣реБрдЖ рдХрд╛рдЧрдЬ рдкреВрд░реНрдгрддрдГ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛'},
      fun:{en:'Recycled paper saves trees!', or:'рм░рм┐рм╕рм╛рмЗрмХрм▓рнН рмХрм╛рмЧрмЬ рмЧрмЫ рммрмЮрнНрмЪрм╛рмП!', hi:'рд░реАрд╕рд╛рдЗрдХрд┐рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд╛рдЧрдЬ рдкреЗрдбрд╝реЛрдВ рдХреЛ рдмрдЪрд╛рддрд╛ рд╣реИ!'}}
  ],
  
  liquida: [
    { id:'l1', icon:'ЁЯзВ', title:{en:'Salt in Water', or:'рмкрм╛рмгрм┐рм░рнЗ рм▓рнБрмг', hi:'рдкрд╛рдиреА рдореЗрдВ рдирдордХ'},
      prompt:{en:'Salt dissolving in water тАФ physical change?', or:'рмкрм╛рмгрм┐рм░рнЗ рм▓рнБрмг рмжрнНрм░рммрнАрмнрнВрмд рм╣рнЗрммрм╛ тАФ рмнрнМрмдрм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдкрд╛рдиреА рдореЗрдВ рдирдордХ рдШреБрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рднреМрддрд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Yes, physical',or:'рм╣рмБ, рмнрнМрмдрм┐рмХ',hi:'рд╣рд╛рдБ, рднреМрддрд┐рдХ'},correct:true},
        {k:'b',txt:{en:'No, chemical',or:'рмирм╛рм╣рм┐рмБ, рм░рм╛рм╕рм╛рнЯрмирм┐рмХ',hi:'рдирд╣реАрдВ, рд░рд╛рд╕рд╛рдпрдирд┐рдХ'},correct:false}
      ], hint:{en:'Salt can be recovered by evaporation', or:'рммрм╛рм╖рнНрмкрнАрмнрммрми рмжрнНрн▒рм╛рм░рм╛ рм▓рнБрмг рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм╛рмпрм╛рмЗрмкрм╛рм░рнЗ', hi:'рд╡рд╛рд╖реНрдкреАрдХрд░рдг рджреНрд╡рд╛рд░рд╛ рдирдордХ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ'},
      fun:{en:'Sea water contains dissolved salts!', or:'рм╕рморнБрмжрнНрм░ рмЬрм│рм░рнЗ рмжрнНрм░рммрнАрмнрнВрмд рм▓рнБрмг рмерм╛рмП!', hi:'рд╕рдореБрджреНрд░реА рдЬрд▓ рдореЗрдВ рдШреБрд▓рд╛ рд╣реБрдЖ рдирдордХ рд╣реЛрддрд╛ рд╣реИ!'}},
    
    { id:'l2', icon:'ЁЯЫвя╕П', title:{en:'Oil and Water', or:'рмдрнЗрм▓ рмУ рмкрм╛рмгрм┐', hi:'рддреЗрд▓ рдФрд░ рдкрд╛рдиреА'},
      prompt:{en:'Oil not mixing with water тАФ physical property?', or:'рмдрнЗрм▓ рмкрм╛рмгрм┐ рм╕рм╣рм┐рмд рморм┐рм╢рнБрмирмерм┐рммрм╛ тАФ рмнрнМрмдрм┐рмХ рмЧрнБрмг?', hi:'рддреЗрд▓ рдкрд╛рдиреА рдХреЗ рд╕рд╛рде рдирд╣реАрдВ рдорд┐рд▓рддрд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рднреМрддрд┐рдХ рдЧреБрдг рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'b',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Different densities prevent mixing', or:'рмнрм┐рмирнНрми рмШрмирмдрм╛ рморм┐рм╢рнНрм░рмгрмХрнБ рмкрнНрм░рмдрм┐рм░рнЛрмз рмХрм░рнЗ', hi:'рд╡рд┐рднрд┐рдиреНрди рдШрдирддреНрд╡ рдорд┐рд╢реНрд░рдг рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВ'},
      fun:{en:'Soap helps oil and water mix!', or:'рм╕рм╛рммрнБрми рмдрнЗрм▓ рмПрммрмВ рмкрм╛рмгрм┐ рморм┐рм╢рм┐рммрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рнЗ!', hi:'рд╕рд╛рдмреБрди рддреЗрд▓ рдФрд░ рдкрд╛рдиреА рдХреЛ рдорд┐рд▓рд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ!'}},
    
    { id:'l3', icon:'ЁЯеЫ', title:{en:'Milk to Curd', or:'рмжрнБрмзрм░рнБ рмжрм╣рм┐', hi:'рджреВрдз рд╕реЗ рджрд╣реА'},
      prompt:{en:'Milk turning into curd тАФ chemical change?', or:'рмжрнБрмз рмжрм╣рм┐рм░рнЗ рмкрм░рм┐рмгрмд рм╣рнЗрммрм╛ тАФ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рджреВрдз рдХрд╛ рджрд╣реА рдореЗрдВ рдмрджрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'tf', answers:[
        {k:'yes',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'no',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Bacteria produce acid, changing composition', or:'рмЬрнАрммрм╛рмгрнБ рмЕрморнНрм│ рмЙрмдрнНрмкрм╛рмжрми рмХрм░рм┐ рм╕рмВрм░рмЪрмирм╛ рммрмжрм│рм╛рмП', hi:'рдЬреАрд╡рд╛рдгреБ рдЕрдореНрд▓ рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВ, рд╕рдВрд░рдЪрдирд╛ рдмрджрд▓ рдЬрд╛рддреА рд╣реИ'},
      fun:{en:'Curd contains probiotics good for digestion!', or:'рмжрм╣рм┐рм░рнЗ рмкрм╛рмЪрми рмкрм╛рмЗрмБ рмЙрмдрнНрмХрнГрм╖рнНрмЯ рмкрнНрм░рнЛрммрм╛рнЯрнЛрмЯрм┐рмХрнНтАМрм╕рнН рмерм╛рмП!', hi:'рджрд╣реА рдореЗрдВ рдкрд╛рдЪрди рдХреЗ рд▓рд┐рдП рдЙрддреНрдХреГрд╖реНрдЯ рдкреНрд░реЛрдмрд╛рдпреЛрдЯрд┐рдХреНрд╕ рд╣реЛрддреЗ рд╣реИрдВ!'}},
    
    { id:'l4', icon:'ЁЯНм', title:{en:'Sugar Dissolving', or:'рмЪрм┐рмирм┐ рмжрнНрм░рммрнАрмнрнВрмд рм╣рнЗрммрм╛', hi:'рдЪреАрдиреА рдШреБрд▓рдирд╛'},
      prompt:{en:'Sugar dissolving in tea тАФ reversible?', or:'рмЪрм╛рм╣рм╛рм░рнЗ рмЪрм┐рмирм┐ рмжрнНрм░рммрнАрмнрнВрмд рм╣рнЗрммрм╛ тАФ рмкрнНрм░рмдрнНрнЯрм╛рммрм░рнНрмдрнНрмдрмирнАрнЯ?', hi:'рдЪрд╛рдп рдореЗрдВ рдЪреАрдиреА рдШреБрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рдкреНрд░рддрд┐рд╡рд░реНрддреА рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'b',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Evaporate water to get sugar back', or:'рмЪрм┐рмирм┐ рмлрнЗрм░рм┐рмкрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рмкрм╛рмгрм┐ рммрм╛рм╖рнНрмкрнАрмнрнВрмд рмХрм░рмирнНрмдрнБ', hi:'рдЪреАрдиреА рд╡рд╛рдкрд╕ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рдиреА рдХреЛ рд╡рд╛рд╖реНрдкрд┐рдд рдХрд░реЗрдВ'},
      fun:{en:'Hot water dissolves sugar faster!', or:'рмЧрм░рмо рмкрм╛рмгрм┐ рмЪрм┐рмирм┐ рмжрнНрм░рнБрмд рмжрнНрм░рммрнАрмнрнВрмд рмХрм░рнЗ!', hi:'рдЧрд░реНрдо рдкрд╛рдиреА рдЪреАрдиреА рдХреЛ рддреЗрдЬреА рд╕реЗ рдШреЛрд▓рддрд╛ рд╣реИ!'}}
  ],
  
  gasia: [
    { id:'g1', icon:'ЁЯХпя╕П', title:{en:'Candle Burning', or:'рморнЛрморммрмдрм┐ рмЬрм│рм┐рммрм╛', hi:'рдореЛрдордмрддреНрддреА рдЬрд▓рдирд╛'},
      prompt:{en:'Candle burning тАФ chemical change?', or:'рморнЛрморммрмдрм┐ рмЬрм│рм┐рммрм╛ тАФ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдореЛрдордмрддреНрддреА рдЬрд▓рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'b',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Wax reacts with oxygen, produces new substances', or:'рморм╣рмо рмЕрморнНрм│рмЬрм╛рми рм╕рм╣рм┐рмд рмкрнНрм░рмдрм┐рмХрнНрм░рм┐рнЯрм╛ рмХрм░рнЗ, рмирнВрмдрми рмкрмжрм╛рм░рнНрме рмЙрмдрнНрмкрмирнНрми рмХрм░рнЗ', hi:'рдореЛрдо рдСрдХреНрд╕реАрдЬрди рдХреЗ рд╕рд╛рде рдЕрднрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдирдП рдкрджрд╛рд░реНрде рдмрдирд╛рддрд╛ рд╣реИ'},
      fun:{en:'Candle flame has different temperature zones!', or:'рморнЛрморммрмдрм┐ рм╢рм┐рмЦрм╛ рм░ рмнрм┐рмирнНрми рмнрм┐рмирнНрми рмдрм╛рмкрморм╛рмдрнНрм░рм╛ рмЕрмЮрнНрмЪрм│ рмЕрмЫрм┐!', hi:'рдореЛрдордмрддреНрддреА рдХреА рд▓реМ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд╛рдкрдорд╛рди рдХреНрд╖реЗрддреНрд░ рд╣реЛрддреЗ рд╣реИрдВ!'}},
    
    { id:'g2', icon:'ЁЯдв', title:{en:'Food Rotting', or:'рмЦрм╛рмжрнНрнЯ рмкрмЪрм┐рммрм╛', hi:'рднреЛрдЬрди рд╕рдбрд╝рдирд╛'},
      prompt:{en:'Food rotting and smelling тАФ chemical change?', or:'рмЦрм╛рмжрнНрнЯ рмкрмЪрм┐ рмЧрмирнНрмз рм╣рнЗрммрм╛ тАФ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рднреЛрдЬрди рдХрд╛ рд╕рдбрд╝рдХрд░ рдЧрдВрдз рдЖрдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'tf', answers:[
        {k:'yes',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'no',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Bacteria break down food, new compounds form', or:'рмЬрнАрммрм╛рмгрнБ рмЦрм╛рмжрнНрнЯ рмнрм╛рмЩрнНрмЧрмирнНрмдрм┐, рмирнВрмдрми рмпрнМрмЧрм┐рмХ рмЧрмарми рм╣рнБрмП', hi:'рдЬреАрд╡рд╛рдгреБ рднреЛрдЬрди рдХреЛ рддреЛрдбрд╝рддреЗ рд╣реИрдВ, рдирдП рдпреМрдЧрд┐рдХ рдмрдирддреЗ рд╣реИрдВ'},
      fun:{en:'Some smells warn us not to eat rotten food!', or:'рмХрнЗрмдрнЗрмХ рмЧрмирнНрмз рмЖрмормХрнБ рмкрмЪрм╛ рмЦрм╛рмжрнНрнЯ рмЦрм╛рмЗрммрм╛рмХрнБ рмирм┐рм╖рнЗрмз рмХрм░рнЗ!', hi:'рдХреБрдЫ рдЧрдВрдз рд╣рдореЗрдВ рд╕рдбрд╝рд╛ рд╣реБрдЖ рднреЛрдЬрди рди рдЦрд╛рдиреЗ рдХреА рдЪреЗрддрд╛рд╡рдиреА рджреЗрддреА рд╣реИрдВ!'}},
    
    { id:'g3', icon:'ЁЯОЖ', title:{en:'Fireworks', or:'рмЖрмдрм╕рммрм╛рмЬрнА', hi:'рдкрдЯрд╛рдЦреЗ'},
      prompt:{en:'Fireworks exploding тАФ chemical change?', or:'рмЖрмдрм╕рммрм╛рмЬрнА рмлрнБрмЯрм┐рммрм╛ тАФ рм░рм╛рм╕рдпрд╛рдирд┐рдХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдкрдЯрд╛рдЦреЗ рдлрдЯрдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'mcq', answers:[
        {k:'a',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'b',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Rapid chemical reactions produce light and sound', or:'рмжрнНрм░рнБрмд рм░рм╛рм╕рнЯрмирм┐рмХ рмкрнНрм░рмдрм┐рмХрнНрм░рм┐рнЯрм╛ рмЖрм▓рнЛрмХ рмПрммрмВ рмзрнНрн▒рмирм┐ рмЙрмдрнНрмкрмирнНрми рмХрм░рнЗ', hi:'рддреЗрдЬ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдЕрднрд┐рдХреНрд░рд┐рдпрд╛рдПрдВ рдкреНрд░рдХрд╛рд╢ рдФрд░ рдзреНрд╡рдирд┐ рдЙрддреНрдкрдиреНрди рдХрд░рддреА рд╣реИрдВ'},
      fun:{en:'Different metals create different firework colors!', or:'рмнрм┐рмирнНрми рмнрм┐рмирнНрми рмзрм╛рмдрнБ рмнрм┐рмирнНрми рмнрм┐рмирнНрми рмЖрмдрм╕рммрм╛рмЬрнА рм░рмЩрнНрмЧ рм╕рнГрм╖рнНрмЯрм┐ рмХрм░рнЗ!', hi:'рд╡рд┐рднрд┐рдиреНрди рдзрд╛рддреБрдПрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрдЯрд╛рдЦреЛрдВ рдХреЗ рд░рдВрдЧ рдмрдирд╛рддреА рд╣реИрдВ!'}},
    
    { id:'g4', icon:'ЁЯН░', title:{en:'Baking Cake', or:'рмХрнЗрмХрнН рммрнЗрмХрм┐рмВ', hi:'рдХреЗрдХ рдмреЗрдХ рдХрд░рдирд╛'},
      prompt:{en:'Baking cake тАФ chemical change?', or:'рмХрнЗрмХрнН рммрнЗрмХрм┐рмВ тАФ рм░рм╛рм╕рдпрд╛рдирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми?', hi:'рдХреЗрдХ рдмреЗрдХ рдХрд░рдирд╛ тАФ рдХреНрдпрд╛ рдпрд╣ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ?'},
      type:'tf', answers:[
        {k:'yes',txt:{en:'Yes',or:'рм╣рмБ',hi:'рд╣рд╛рдБ'},correct:true},
        {k:'no',txt:{en:'No',or:'рмирм╛рм╣рм┐рмБ',hi:'рдирд╣реАрдВ'},correct:false}
      ], hint:{en:'Heat causes chemical reactions in ingredients', or:'рмдрм╛рмк рмЙрмкрм╛рмжрм╛рмирм░рнЗ рм░рм╛рм╕рдпрд╛рдирм┐рмХ рмкрнНрм░рмдрм┐рмХрнНрм░рм┐рнЯрм╛ рм╕рнГрм╖рнНрмЯрм┐ рмХрм░рнЗ', hi:'рдЧрд░реНрдореА рд╕рд╛рдордЧреНрд░реА рдореЗрдВ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдЕрднрд┐рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рд╛рддреА рд╣реИ'},
      fun:{en:'Baking powder makes cakes rise with gas bubbles!', or:'рммрнЗрмХрм┐рмВ рмкрм╛рмЙрмбрм░ рмЧрнНрнЯрм╛рм╕рнН рммрнБрмжрнНрммрнБрмжрнН рм╕рм╣рм┐рмд рмХрнЗрмХрнНтАМрмХрнБ рмЙрмарм╛рмЗрмерм╛рмП!', hi:'рдмреЗрдХрд┐рдВрдЧ рдкрд╛рдЙрдбрд░ рдЧреИрд╕ рдХреЗ рдмреБрд▓рдмреБрд▓реЛрдВ рд╕реЗ рдХреЗрдХ рдХреЛ рдлреБрд▓рд╛рддрд╛ рд╣реИ!'}}
  ]
};

// Combined pool for boss questions
const bossPool = [...worldPools.solidia, ...worldPools.liquida, ...worldPools.gasia];

/* ========= GAME STATE ========= */
let LANG = 'en'; // This controls the ENTIRE GAME language
let selectedCards = { solidia: [], liquida: [], gasia: [] };
let completedCards = { solidia: [], liquida: [], gasia: [] };
let score = { solidia: 0, liquida: 0, gasia: 0 };
let totalScore = 0;
let streak = { solidia: 0, liquida: 0, gasia: 0 };
let timeLeft = CONFIG.sessionTime;
let timerInterval = null;
let currentCard = null;
let currentKingdom = 'solidia';

/* ========= TRANSLATIONS ========= */
const UI_STRINGS = {
  en: {
    'nav-dashboard':'Dashboard','nav-about':'About','nav-contact':'Contact',
    'game-title':'Matter Mission тАФ Save the Three Kingdoms',
    'game-desc':'Help restore balance to the kingdoms of matter by identifying physical and chemical changes!',
    'instructions-title':'How to Play Matter Mission',
    'instructions-intro':'Welcome to Matter Mission! Here\'s how to save the three kingdoms:',
    'instruction-1':'Complete challenges in each kingdom (Solidia, Liquida, Gasia) to unlock the next one.',
    'instruction-2':'Answer questions about physical and chemical changes to earn points.',
    'instruction-3':'Build streaks for bonus points - the longer your streak, the more points you earn!',
    'instruction-4':'Watch the timer - complete challenges before time runs out for bonus points.',
    'instruction-5':'Complete all three kingdoms to face the final boss challenge.',
    'instruction-6':'Defeat the final boss to save all three kingdoms!',
    'instructions-outro':'Good luck on your mission to save the kingdoms of matter!',
    'start-game-btn':'Start Mission',
    'solidia-unlock-title':'Welcome to Solidia Kingdom!',
    'solidia-unlock-text':'The kingdom of solids awaits you! Complete challenges about solid matter to restore balance.',
    'liquida-unlock-title':'Liquida Kingdom Unlocked!',
    'liquida-unlock-text':'You\'ve mastered solids! Now face the challenges of liquids in the Liquida kingdom.',
    'gasia-unlock-title':'Gasia Kingdom Unlocked!',
    'gasia-unlock-text':'You\'ve mastered liquids! Now face the challenges of gases in the Gasia kingdom.',
    'continue':'Continue',
    // Game text translations
    'score':'Score',
    'streak':'Streak',
    'solidia-kingdom':'Solidia Kingdom - Solids',
    'liquida-kingdom':'Liquida Kingdom - Liquids',
    'gasia-kingdom':'Gasia Kingdom - Gases',
    'solidia-desc':'Help restore balance to Solidia by identifying physical and chemical changes!',
    'liquida-desc':'Help restore balance to Liquida by identifying physical and chemical changes!',
    'gasia-desc':'Help restore balance to Gasia by identifying physical and chemical changes!',
    'next-kingdom':'Next Kingdom',
    'final-boss':'Final Boss Battle',
    'play-again':'Play Again',
    'boss-header':'Final Boss Battle!',
    'boss-desc':'Face the ultimate challenge to prove your mastery of matter changes!',
    'boss-title':'Chaotron - The Matter Mixer',
    'boss-text':'The final boss has mixed all states of matter! Answer 6 rapid-fire questions to prove your knowledge and save all three kingdoms!',
    'start-boss':'Start Boss Battle',
    'back-game':'Back to Game',
    'funfact-title':'Great Job!',
    'continue-btn':'Continue',
    'level-complete-solidia':'Solidia Kingdom Complete!',
    'level-complete-liquida':'Liquida Kingdom Complete!',
    'level-complete-gasia':'Gasia Kingdom Complete!',
    'level-text-solidia':'You restored balance to Solidia! Ready for the next kingdom?',
    'level-text-liquida':'You restored balance to Liquida! Ready for the next kingdom?',
    'level-text-gasia':'You restored balance to Gasia! Congratulations on saving all three kingdoms!'
  },
  or: {
    'nav-dashboard':'рмбрнНрнЯрм╛рм╕рммрнЛрм░рнНрмб','nav-about':'рммрм┐рм╖рнЯрм░рнЗ','nav-contact':'рмпрнЛрмЧрм╛рмпрнЛрмЧ',
    'game-title':'рморнНрнЯрм╛рмЯрм░ рморм┐рм╢рми тАФ рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯрмХрнБ рм░рмХрнНрм╖рм╛ рмХрм░рмирнНрмдрнБ',
    'game-desc':'рмнрнМрмдрм┐рмХ рмПрммрмВ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми рмЪрм┐рм╣рнНрмирмЯ рмХрм░рм┐ рмкрмжрм╛рм░рнНрмерм░ рм░рм╛рмЬрнНрнЯрмЧрнБрмбрм╝рм┐рмХрм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рммрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рмирнНрмдрнБ |',
    'instructions-title':'рморнНрнЯрм╛рмЯрм░ рморм┐рм╢рми рмХрм┐рмкрм░рм┐ рмЦрнЗрм│рм┐рммрнЗ',
    'instructions-intro':'рморнНрнЯрм╛рмЯрм░ рморм┐рм╢рмирмХрнБ рм╕рнНрн▒рм╛рмЧрмд! рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯ рммрмЮрнНрмЪрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рмирм┐рм░рнНрмжрнНрмжрнЗрм╢рм╛рммрм│рнА:',
    'instruction-1':'рмкрнНрм░рмдрнНрнЯрнЗрмХ рм░рм╛рмЬрнНрнЯрм░рнЗ рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрмЧрнБрмбрм╝рм┐рмХ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рмХрм░рмирнНрмдрнБ (Solidia, Liquida, Gasia) рмкрм░рммрм░рнНрмдрнНрмдрнА рм░рм╛рмЬрнНрнЯ рмЕрмирм▓рмХрнН рмХрм░рм┐рммрм╛ рмкрм╛рмЗрмБред',
    'instruction-2':'рмнрнМрмдрм┐рмХ рмПрммрмВ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми рммрм┐рм╖рнЯрм░рнЗ рмкрнНрм░рм╢рнНрмирмЧрнБрмбрм╝рм┐рмХрм░ рмЙрмдрнНрмдрм░ рмжрнЗрмЗ рмкрмПрмгрнНрмЯ рмЕрм░рнНрмЬрми рмХрм░рмирнНрмдрнБред',
    'instruction-3':'рммрнЛрмирм╕ рмкрмПрмгрнНрмЯ рмкрм╛рмЗрмБ рм╖рнНрмЯрнНрм░рм┐рмХрнН рмдрм┐рмЖрм░рм┐ рмХрм░рмирнНрмдрнБ - рмЖрмкрмгрмЩрнНрмХ рм╖рнНрмЯрнНрм░рм┐рмХрнН рмпрнЗрмдрнЗ рмжрнАрм░рнНрмШ, рмдрнЗрмдрнЗ рмЕрмзрм┐рмХ рмкрмПрмгрнНрмЯ рмкрм╛рмЖрмирнНрмдрнБ!',
    'instruction-4':'рмЯрм╛рмЗрморм░ рмжрнЗрмЦрмирнНрмдрнБ - рммрнЛрмирм╕ рмкрмПрмгрнНрмЯ рмкрм╛рмЗрмБ рм╕рморнЯ рм╢рнЗрм╖ рм╣рнЗрммрм╛ рмкрнВрм░рнНрммрм░рнБ рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрмЧрнБрмбрм╝рм┐рмХ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рмХрм░рмирнНрмдрнБред',
    'instruction-5':'рмЪрнВрмбрм╛рмирнНрмд рммрнЛрм╕рнН рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬ рм╕рм╛рморнНрмирм╛ рмХрм░рм┐рммрм╛ рмкрм╛рмЗрмБ рм╕рморм╕рнНрмд рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рмХрм░рмирнНрмдрнБред',
    'instruction-6':'рм╕рморм╕рнНрмд рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯ рммрмЮрнНрмЪрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рмЕрмирнНрмдрм┐рмо рммрнЛрм╕рмХрнБ рмкрм░рм╛рм╕рнНрмд рмХрм░рмирнНрмдрнБ!',
    'instructions-outro':'рмкрмжрм╛рм░рнНрмерм░ рм░рм╛рмЬрнНрнЯрмЧрнБрмбрм╝рм┐рмХрнБ рммрмЮрнНрмЪрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рмЖрмкрмгрмЩрнНрмХ рморм┐рм╢рмирм░рнЗ рм╢рнБрмнрмХрм╛рмормирм╛!',
    'start-game-btn':'рморм┐рм╢рми рмЖрм░рморнНрмн рмХрм░рмирнНрмдрнБ',
    'solidia-unlock-title':'рм╕рнЛрм▓рм┐рмбрм┐рмЖ рм░рм╛рмЬрнНрнЯрмХрнБ рм╕рнНрн▒рм╛рмЧрмд!',
    'solidia-unlock-text':'рмарнЛрм╕ рмкрмжрм╛рм░рнНрмерм░ рм░рм╛рмЬрнНрнЯ рмЖрмкрмгрмЩрнНрмХ рмкрм╛рмЗрмБ рмЕрмкрнЗрмХрнНрм╖рм╛ рмХрм░рнБрмЫрм┐! рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рммрм╛ рмкрм╛рмЗрмБ рмарнЛрм╕ рмкрмжрм╛рм░рнНрме рм╕рморнНрммрмирнНрмзрнАрнЯ рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрмЧрнБрмбрм╝рм┐рмХ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг рмХрм░рмирнНрмдрнБ |',
    'liquida-unlock-title':'рм▓рм┐рмХрнНрн▒рм┐рмбрм╛ рм░рм╛рмЬрнНрнЯ рмЕрмирм▓рмХрнН!',
    'liquida-unlock-text':'рмЖрмкрмг рмарнЛрм╕ рмкрмжрм╛рм░рнНрмерм░рнЗ рмжрмХрнНрм╖рмдрм╛ рм╣рм╛рм╕рм▓ рмХрм░рм┐рмЫрмирнНрмдрм┐! рмПрммрнЗ рм▓рм┐рмХрнНрн▒рм┐рмбрм╛ рм░рм╛рмЬрнНрнЯрм░рнЗ рмдрм░рм│ рмкрмжрм╛рм░рнНрмерм░ рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрмЧрнБрмбрм╝рм┐рмХрм░ рм╕рморнНрморнБрмЦрнАрми рм╣рнБрмЕрмирнНрмдрнБ |',
    'gasia-unlock-title':'рмЧрнЗрм╕рм┐рмЖ рм░рм╛рмЬрнНрнЯ рмЕрмирм▓рмХрнН!',
    'gasia-unlock-text':'рмЖрмкрмг рмдрм░рм│ рмкрмжрм╛рм░рнНрмерм░рнЗ рмжрмХрнНрм╖рмдрм╛ рм╣рм╛рм╕рм▓ рмХрм░рм┐рмЫрмирнНрмдрм┐! рмПрммрнЗ рмЧрнЗрм╕рм┐рмЖ рм░рм╛рмЬрнНрнЯрм░рнЗ рмЧрнНрнЯрм╛рм╕рнНрм░ рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрмЧрнБрмбрм╝рм┐рмХрм░ рм╕рморнНрморнБрмЦрнАрми рм╣рнБрмЕрмирнНрмдрнБ |',
    'continue':'рмЖрмЧрмХрнБ',
    // Game text translations
    'score':'рм╕рнНрмХрнЛрм░',
    'streak':'рм╖рнНрмЯрнНрм░рм┐рмХрнН',
    'solidia-kingdom':'рм╕рнЛрм▓рм┐рмбрм┐рмЖ рм░рм╛рмЬрнНрнЯ - рмарнЛрм╕',
    'liquida-kingdom':'рм▓рм┐рмХрнНрн▒рм┐рмбрм╛ рм░рм╛рмЬрнНрнЯ - рмдрм░рм│',
    'gasia-kingdom':'рмЧрнЗрм╕рм┐рмЖ рм░рм╛рмЬрнНрнЯ - рмЧрнНрнЯрм╛рм╕рнН',
    'solidia-desc':'рмнрнМрмдрм┐рмХ рмПрммрмВ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми рмЪрм┐рм╣рнНрмирмЯ рмХрм░рм┐ рм╕рнЛрм▓рм┐рмбрм┐рмЖрм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рммрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рмирнНрмдрнБ!',
    'liquida-desc':'рмнрнМрмдрм┐рмХ рмПрммрмВ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми рмЪрм┐рм╣рнНрмирмЯ рмХрм░рм┐ рм▓рм┐рмХрнНрн▒рм┐рмбрм╛рм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рммрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рмирнНрмдрнБ!',
    'gasia-desc':'рмнрнМрмдрм┐рмХ рмПрммрмВ рм░рм╛рм╕рнЯрмирм┐рмХ рмкрм░рм┐рммрм░рнНрмдрнНрмдрми рмЪрм┐рм╣рнНрмирмЯ рмХрм░рм┐ рмЧрнЗрм╕рм┐рмЖрм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рммрм╛рм░рнЗ рм╕рм╛рм╣рм╛рмпрнНрнЯ рмХрм░рмирнНрмдрнБ!',
    'next-kingdom':'рмкрм░рммрм░рнНрмдрнНрмдрнА рм░рм╛рмЬрнНрнЯ',
    'final-boss':'рмЕрмирнНрмдрм┐рмо рммрнЛрм╕рнН рмпрнБрмжрнНрмз',
    'play-again':'рмкрнБрмгрм┐ рмЦрнЗрм│рмирнНрмдрнБ',
    'boss-header':'рмЕрмирнНрмдрм┐рмо рммрнЛрм╕рнН рмпрнБрмжрнНрмз!',
    'boss-desc':'рмкрмжрм╛рм░рнНрме рмкрм░рм┐рммрм░рнНрмдрнНрмдрмирм░ рмЖрмкрмгрмЩрнНрмХрм░ рмжрмХрнНрм╖рмдрм╛ рмкрнНрм░рморм╛рмг рмХрм░рм┐рммрм╛ рмкрм╛рмЗрмБ рмЪрм░рмо рмЪрнНрнЯрм╛рм▓рнЗрмЮрнНрмЬрм░ рм╕рморнНрморнБрмЦрнАрми рм╣рнБрмЕрмирнНрмдрнБ!',
    'boss-title':'рмЪрм╛рмУрмЯрнНрм░рмирнН - рмкрмжрм╛рм░рнНрме рморм┐рм╢рнНрм░рмХ',
    'boss-text':'рмЕрмирнНрмдрм┐рмо рммрнЛрм╕рнН рм╕рморм╕рнНрмд рмкрмжрм╛рм░рнНрмерм░ рмЕрммрм╕рнНрмерм╛ рморм┐рм╢рнНрм░рмг рмХрм░рм┐рмЫрмирнНрмдрм┐! рмЖрмкрмгрмЩрнНрмХрм░ рмЬрнНрмЮрм╛рми рмкрнНрм░рморм╛рмг рмХрм░рм┐рммрм╛ рмПрммрмВ рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯ рммрмЮрнНрмЪрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рнмрмЯрм┐ рмжрнНрм░рнБрмд рмЕрмЧрнНрмирм┐ рмкрнНрм░рм╢рнНрмирм░ рмЙрмдрнНрмдрм░ рмжрм┐рмЕрмирнНрмдрнБ!',
    'start-boss':'рммрнЛрм╕рнН рмпрнБрмжрнНрмз рмЖрм░рморнНрмн рмХрм░рмирнНрмдрнБ',
    'back-game':'рмЦрнЗрм│рмХрнБ рмлрнЗрм░рм┐рмпрм╛рмирнНрмдрнБ',
    'funfact-title':'рммрм╣рнБрмд рмнрм▓!',
    'continue-btn':'рмЬрм╛рм░рм┐ рм░рмЦрмирнНрмдрнБ',
    'level-complete-solidia':'рм╕рнЛрм▓рм┐рмбрм┐рмЖ рм░рм╛рмЬрнНрнЯ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг!',
    'level-complete-liquida':'рм▓рм┐рмХрнНрн▒рм┐рмбрм╛ рм░рм╛рмЬрнНрнЯ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг!',
    'level-complete-gasia':'рмЧрнЗрм╕рм┐рмЖ рм░рм╛рмЬрнНрнЯ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг!',
    'level-text-solidia':'рмЖрмкрмг рм╕рнЛрм▓рм┐рмбрм┐рмЖрм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рмЫрмирнНрмдрм┐! рмкрм░рммрм░рнНрмдрнНрмдрнА рм░рм╛рмЬрнНрнЯ рмкрм╛рмЗрмБ рмкрнНрм░рм╕рнНрмдрнБрмд рмХрм┐?',
    'level-text-liquida':'рмЖрмкрмг рм▓рм┐рмХрнНрн▒рм┐рмбрм╛рм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рмЫрмирнНрмдрм┐! рмкрм░рммрм░рнНрмдрнНрмдрнА рм░рм╛рмЬрнНрнЯ рмкрм╛рмЗрмБ рмкрнНрм░рм╕рнНрмдрнБрмд рмХрм┐?',
    'level-text-gasia':'рмЖрмкрмг рмЧрнЗрм╕рм┐рмЖрм░ рм╕рмирнНрмдрнБрм│рми рмкрнБрмирм░рнБрмжрнНрмзрм╛рм░ рмХрм░рм┐рмЫрмирнНрмдрм┐! рмдрм┐рмирнЛрмЯрм┐ рм░рм╛рмЬрнНрнЯ рммрмЮрнНрмЪрм╛рмЗрммрм╛ рмкрм╛рмЗрмБ рмЕрмнрм┐рмирмирнНрмжрми!'
  },
  hi: {
    'nav-dashboard':'рдбреИрд╢рдмреЛрд░реНрдб','nav-about':'рд╣рдорд╛рд░реЗ рдмрд╛рд░реЗ рдореЗрдВ','nav-contact':'рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ',
    'game-title':'рдореИрдЯрд░ рдорд┐рд╢рди тАФ рддреАрди рд░рд╛рдЬреНрдп рдмрдЪрд╛рдУ',
    'game-desc':'рднреМрддрд┐рдХ рдФрд░ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдХреЗ рдкрджрд╛рд░реНрде рдХреЗ рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВред',
    'instructions-title':'рдореИрдЯрд░ рдорд┐рд╢рди рдХреИрд╕реЗ рдЦреЗрд▓реЗрдВ',
    'instructions-intro':'рдореИрдЯрд░ рдорд┐рд╢рди рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рддреАрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢:',
    'instruction-1':'рдЕрдЧрд▓рд╛ рд░рд╛рдЬреНрдп рдЕрдирд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп (Solidia, Liquida, Gasia) рдореЗрдВ рдЪреБрдиреМрддрд┐рдпрд╛рдБ рдкреВрд░реА рдХрд░реЗрдВред',
    'instruction-2':'рдЕрдВрдХ рдЕрд░реНрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреМрддрд┐рдХ рдФрд░ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдЙрддреНрддрд░ рджреЗрдВред',
    'instruction-3':'рдмреЛрдирд╕ рдЕрдВрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░реАрдХ рдмрдирд╛рдПрдБ - рдЖрдкрдХрд╛ рд╕реНрдЯреНрд░реАрдХ рдЬрд┐рддрдирд╛ рд▓рдВрдмрд╛ рд╣реЛрдЧрд╛, рдЙрддрдиреЗ рдЕрдзрд┐рдХ рдЕрдВрдХ рдЖрдк рдЕрд░реНрдЬрд┐рдд рдХрд░реЗрдВрдЧреЗ!',
    'instruction-4':'рдЯрд╛рдЗрдорд░ рджреЗрдЦреЗрдВ - рдмреЛрдирд╕ рдЕрдВрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЪреБрдиреМрддрд┐рдпрд╛рдБ рдкреВрд░реА рдХрд░реЗрдВред',
    'instruction-5':'рдЕрдВрддрд┐рдо рдмреЙрд╕ рдЪреБрдиреМрддреА рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рддреАрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░реЗрдВред',
    'instruction-6':'рддреАрдиреЛрдВ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдмреЙрд╕ рдХреЛ рд╣рд░рд╛рдПрдВ!',
    'instructions-outro':'рдкрджрд╛рд░реНрде рдХреЗ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рдЕрдкрдиреЗ рдорд┐рд╢рди рдкрд░ рд╢реБрднрдХрд╛рдордирд╛рдПрдБ!',
    'start-game-btn':'рдорд┐рд╢рди рд╢реБрд░реВ рдХрд░реЗрдВ',
    'solidia-unlock-title':'рд╕реЛрд▓рд┐рдбрд┐рдпрд╛ рд░рд╛рдЬреНрдп рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!',
    'solidia-unlock-text':'рдареЛрд╕ рдкрджрд╛рд░реНрдереЛрдВ рдХрд╛ рд░рд╛рдЬреНрдп рдЖрдкрдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИ! рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдареЛрд╕ рдкрджрд╛рд░реНрде рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЪреБрдиреМрддрд┐рдпрд╛рдБ рдкреВрд░реА рдХрд░реЗрдВред',
    'liquida-unlock-title':'рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рд░рд╛рдЬреНрдп рдЕрдирд▓реЙрдХ!',
    'liquida-unlock-text':'рдЖрдкрдиреЗ рдареЛрд╕ рдкрджрд╛рд░реНрдереЛрдВ рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░ рд▓реА рд╣реИ! рдЕрдм рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рд░рд╛рдЬреНрдп рдореЗрдВ рддрд░рд▓ рдкрджрд╛рд░реНрдереЛрдВ рдХреА рдЪреБрдиреМрддрд┐рдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░реЗрдВред',
    'gasia-unlock-title':'рдЧреЗрд╕рд┐рдпрд╛ рд░рд╛рдЬреНрдп рдЕрдирд▓реЙрдХ!',
    'gasia-unlock-text':'рдЖрдкрдиреЗ рддрд░рд▓ рдкрджрд╛рд░реНрдереЛрдВ рдореЗрдВ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдХрд░ рд▓реА рд╣реИ! рдЕрдм рдЧреЗрд╕рд┐рдпрд╛ рд░рд╛рдЬреНрдп рдореЗрдВ рдЧреИрд╕реЛрдВ рдХреА рдЪреБрдиреМрддрд┐рдпреЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░реЗрдВред',
    'continue':'рдЬрд╛рд░реА рд░рдЦреЗрдВ',
    // Game text translations
    'score':'рд╕реНрдХреЛрд░',
    'streak':'рд╕реНрдЯреНрд░реАрдХ',
    'solidia-kingdom':'рд╕реЛрд▓рд┐рдбрд┐рдпрд╛ рд░рд╛рдЬреНрдп - рдареЛрд╕',
    'liquida-kingdom':'рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рд░рд╛рдЬреНрдп - рддрд░рд▓',
    'gasia-kingdom':'рдЧреЗрд╕рд┐рдпрд╛ рд░рд╛рдЬреНрдп - рдЧреИрд╕',
    'solidia-desc':'рднреМрддрд┐рдХ рдФрд░ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдХреЗ рд╕реЛрд▓рд┐рдбрд┐рдпрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВ!',
    'liquida-desc':'рднреМрддрд┐рдХ рдФрд░ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдХреЗ рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВ!',
    'gasia-desc':'рднреМрддрд┐рдХ рдФрд░ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдХреЗ рдЧреЗрд╕рд┐рдпрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВ!',
    'next-kingdom':'рдЕрдЧрд▓рд╛ рд░рд╛рдЬреНрдп',
    'final-boss':'рдЕрдВрддрд┐рдо рдмреЙрд╕ рд▓рдбрд╝рд╛рдИ',
    'play-again':'рдлрд┐рд░ рд╕реЗ рдЦреЗрд▓реЗрдВ',
    'boss-header':'рдЕрдВрддрд┐рдо рдмреЙрд╕ рд▓рдбрд╝рд╛рдИ!',
    'boss-desc':'рдкрджрд╛рд░реНрде рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдореЗрдВ рдЕрдкрдиреА рдорд╣рд╛рд░рдд рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдЪреБрдиреМрддреА рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░реЗрдВ!',
    'boss-title':'рдЪрд╛рдУрдЯреНрд░реЙрди - рдореИрдЯрд░ рдорд┐рдХреНрд╕рд░',
    'boss-text':'рдЕрдВрддрд┐рдо рдмреЙрд╕ рдиреЗ рдкрджрд╛рд░реНрде рдХреА рд╕рднреА рдЕрд╡рд╕реНрдерд╛рдУрдВ рдХреЛ рдорд┐рд▓рд╛ рджрд┐рдпрд╛ рд╣реИ! рдЕрдкрдирд╛ рдЬреНрдЮрд╛рди рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдФрд░ рддреАрдиреЛрдВ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП 6 рддреЗрдЬ-рддрд░реНрд░рд╛рд░ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдЙрддреНрддрд░ рджреЗрдВ!',
    'start-boss':'рдмреЙрд╕ рд▓рдбрд╝рд╛рдИ рд╢реБрд░реВ рдХрд░реЗрдВ',
    'back-game':'рдЦреЗрд▓ рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ',
    'funfact-title':'рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛!',
    'continue-btn':'рдЬрд╛рд░реА рд░рдЦреЗрдВ',
    'level-complete-solidia':'рд╕реЛрд▓рд┐рдбрд┐рдпрд╛ рд░рд╛рдЬреНрдп рдкреВрд░реНрдг!',
    'level-complete-liquida':'рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рд░рд╛рдЬреНрдп рдкреВрд░реНрдг!',
    'level-complete-gasia':'рдЧреЗрд╕рд┐рдпрд╛ рд░рд╛рдЬреНрдп рдкреВрд░реНрдг!',
    'level-text-solidia':'рдЖрдкрдиреЗ рд╕реЛрд▓рд┐рдбрд┐рдпрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░ рджрд┐рдпрд╛! рдХреНрдпрд╛ рдЖрдк рдЕрдЧрд▓реЗ рд░рд╛рдЬреНрдп рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ?',
    'level-text-liquida':'рдЖрдкрдиреЗ рд▓рд┐рдХреНрд╡рд┐рдбрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░ рджрд┐рдпрд╛! рдХреНрдпрд╛ рдЖрдк рдЕрдЧрд▓реЗ рд░рд╛рдЬреНрдп рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ?',
    'level-text-gasia':'рдЖрдкрдиреЗ рдЧреЗрд╕рд┐рдпрд╛ рдореЗрдВ рд╕рдВрддреБрд▓рди рдмрд╣рд╛рд▓ рдХрд░ рджрд┐рдпрд╛! рддреАрдиреЛрдВ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдзрд╛рдИ!'
  }
};

/* ========= DOM ELEMENTS ========= */
const dom = {
  langBtns: document.querySelectorAll('#global-lang .lang-btn'),
  instructionsModal: document.getElementById('instructions-modal'),
  instructionsLangBtns: document.querySelectorAll('#instructions-modal .lang-btn'),
  pages: document.querySelectorAll('.page'),
  
  // Instructions
  startGameBtn: document.getElementById('start-game-btn'),
  
  // Kingdom unlock pages
  startSolidiaBtn: document.getElementById('start-solidia-btn'),
  startLiquidaBtn: document.getElementById('start-liquida-btn'),
  startGasiaBtn: document.getElementById('start-gasia-btn'),
  
  // Solidia page
  cardsSolidia: document.getElementById('cards-solidia'),
  statusSolidia: document.getElementById('status-solidia'),
  nextKingdomSolidiaBtn: document.getElementById('next-kingdom-solidia'),
  levelCompleteSolidia: document.getElementById('level-complete-solidia'),
  
  // Liquida page
  cardsLiquida: document.getElementById('cards-liquida'),
  statusLiquida: document.getElementById('status-liquida'),
  nextKingdomLiquidaBtn: document.getElementById('next-kingdom-liquida'),
  levelCompleteLiquida: document.getElementById('level-complete-liquida'),
  
  // Gasia page
  cardsGasia: document.getElementById('cards-gasia'),
  statusGasia: document.getElementById('status-gasia'),
  finalBossBtn: document.getElementById('final-boss-btn'),
  playAgainFinalBtn: document.getElementById('play-again-final'),
  levelCompleteGasia: document.getElementById('level-complete-gasia'),
  
  // Modal
  questionModal: document.getElementById('question-modal'),
  modalClose: document.getElementById('modal-close'),
  modalIcon: document.getElementById('modal-icon'),
  modalQuestion: document.getElementById('modal-question'),
  modalOptions: document.getElementById('modal-options'),
  modalHint: document.getElementById('modal-hint'),
  modalContinue: document.getElementById('modal-continue'),
  
  // Result
  resultModal: document.getElementById('result-modal'),
  resultClose: document.getElementById('result-close'),
  resultRetry: document.getElementById('result-retry'),
  finalScore: document.getElementById('final-score'),
  
  // Boss
  startBossBtn: document.getElementById('start-boss-btn'),
  backToGameBtn: document.getElementById('back-to-game-btn'),
  bossQuestionsContainer: document.getElementById('boss-questions-container'),
  bossScore: document.getElementById('boss-score'),
  bossStreak: document.getElementById('boss-streak'),
  
  // Fun Fact Modal
  funfactModal: document.getElementById('funfact-modal'),
  funfactIcon: document.getElementById('funfact-icon'),
  funfactTitle: document.getElementById('funfact-title'),
  funfactText: document.getElementById('funfact-text'),
  continueBtn: document.getElementById('continue-btn')
};

/* ========= UTILITIES ========= */
function randShuffle(arr){ return arr.map(a=>({v:a,r:Math.random()})).sort((a,b)=>a.r-b.r).map(x=>x.v); }

// NEW: Function to ensure fresh questions every time
function pickRandomUnique(pool, count){
  // Always shuffle and pick fresh questions
  const shuffled = randShuffle(pool);
  return shuffled.slice(0, Math.min(count, shuffled.length));
}

function t(key){ return UI_STRINGS[LANG][key] || UI_STRINGS['en'][key] || key; }
function safeText(obj){ return (obj && (obj[LANG]||obj['en'])) || ''; }

function showPage(pageId){
  dom.pages.forEach(page => {
    page.classList.remove('active');
  });
  document.getElementById(pageId).classList.add('active');
}

function updateKingdomStats(kingdom){
  const completed = completedCards[kingdom].length;
  const total = selectedCards[kingdom].length;
  
  const statusEl = kingdom === 'solidia' ? dom.statusSolidia :
                  kingdom === 'liquida' ? dom.statusLiquida :
                  dom.statusGasia;
  statusEl.textContent = `${completed}/${total}`;
  
  const scoreEl = document.getElementById(`score${kingdom === 'solidia' ? '' : '-' + kingdom}`);
  if(scoreEl) scoreEl.textContent = `${t('score')}: ${score[kingdom]}`;
  
  const streakEl = document.getElementById(`streak${kingdom === 'solidia' ? '' : '-' + kingdom}`);
  if(streakEl) streakEl.textContent = `${t('streak')}: ${streak[kingdom]}`;
  
  const progressEl = document.getElementById(`progress${kingdom === 'solidia' ? '' : '-' + kingdom}`);
  if(progressEl){
    const progress = Math.round((completed / total) * 100);
    progressEl.style.width = `${progress}%`;
  }
}

/* ========= INITIALIZATION ========= */
document.addEventListener('DOMContentLoaded', ()=> {
  // Global language buttons - THIS CHANGES ENTIRE GAME
  dom.langBtns.forEach(btn=>{
    btn.addEventListener('click', ()=> switchLanguage(btn.dataset.lang));
  });
  
  // Instructions language buttons - ONLY changes instructions text
  dom.instructionsLangBtns.forEach(btn=>{
    btn.addEventListener('click', (e)=> {
      e.stopPropagation();
      switchInstructionsLanguage(btn.dataset.lang);
    });
  });
  
  // Start buttons
  dom.startGameBtn.addEventListener('click', startNewGame);
  dom.startSolidiaBtn.addEventListener('click', ()=> startKingdom('solidia'));
  dom.startLiquidaBtn.addEventListener('click', ()=> startKingdom('liquida'));
  dom.startGasiaBtn.addEventListener('click', ()=> startKingdom('gasia'));
  
  // Next kingdom buttons
  dom.nextKingdomSolidiaBtn.addEventListener('click', ()=> showUnlockPage('liquida'));
  dom.nextKingdomLiquidaBtn.addEventListener('click', ()=> showUnlockPage('gasia'));
  
  // Final buttons
  dom.finalBossBtn.addEventListener('click', startFinalBoss);
  dom.playAgainFinalBtn.addEventListener('click', startNewGame);
  
  // Boss page buttons
  dom.startBossBtn.addEventListener('click', startBossBattle);
  dom.backToGameBtn.addEventListener('click', ()=> showPage('gasia-page'));
  
  // Modal buttons
  dom.modalClose.addEventListener('click', closeModal);
  dom.modalContinue.addEventListener('click', closeModal);
  dom.resultClose.addEventListener('click', ()=> dom.resultModal.style.display='none');
  dom.resultRetry.addEventListener('click', startNewGame);
  
  // Fun fact modal button
  dom.continueBtn.addEventListener('click', () => {
    dom.funfactModal.style.display = 'none';
  });
  
  // Show instructions modal initially
  dom.instructionsModal.style.display = 'flex';
  
  // Set initial language
  switchLanguage('en');
  switchInstructionsLanguage('en');
});

/* ========= LANGUAGE SWITCHING ========= */
function switchLanguage(lang){
  LANG = lang; // This changes the ENTIRE GAME language
  
  // Update global language switcher
  document.querySelectorAll('#global-lang .lang-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.lang===lang);
  });
  
  // Update all translatable elements
  document.querySelectorAll('[data-translate]').forEach(el=>{
    const key = el.getAttribute('data-translate');
    el.textContent = t(key);
  });
  
  // Update game headers and descriptions
  document.getElementById('solidia-header').textContent = t('solidia-kingdom');
  document.getElementById('solidia-desc').textContent = t('solidia-desc');
  document.getElementById('liquida-header').textContent = t('liquida-kingdom');
  document.getElementById('liquida-desc').textContent = t('liquida-desc');
  document.getElementById('gasia-header').textContent = t('gasia-kingdom');
  document.getElementById('gasia-desc').textContent = t('gasia-desc');
  
  // Update boss page
  document.getElementById('boss-header').textContent = t('boss-header');
  document.getElementById('boss-desc').textContent = t('boss-desc');
  document.getElementById('boss-title').textContent = t('boss-title');
  document.getElementById('boss-text').textContent = t('boss-text');
  
  // Update buttons
  document.getElementById('next-kingdom-solidia').textContent = t('next-kingdom');
  document.getElementById('next-kingdom-liquida').textContent = t('next-kingdom');
  document.getElementById('final-boss-btn').textContent = t('final-boss');
  document.getElementById('play-again-final').textContent = t('play-again');
  document.getElementById('start-boss-btn').textContent = t('start-boss');
  document.getElementById('back-to-game-btn').textContent = t('back-game');
  
  // UPDATE ALL START BUTTONS TOO - THIS IS THE FIX
  document.getElementById('start-game-btn').textContent = t('start-game-btn');
  document.getElementById('start-solidia-btn').textContent = t('start-game-btn');
  document.getElementById('start-liquida-btn').textContent = t('start-game-btn');
  document.getElementById('start-gasia-btn').textContent = t('start-game-btn');
  
  // Update level complete texts
  document.getElementById('level-complete-title-solidia').textContent = t('level-complete-solidia');
  document.getElementById('level-complete-text-solidia').textContent = t('level-text-solidia');
  document.getElementById('level-complete-title-liquida').textContent = t('level-complete-liquida');
  document.getElementById('level-complete-text-liquida').textContent = t('level-text-liquida');
  document.getElementById('level-complete-title-gasia').textContent = t('level-complete-gasia');
  document.getElementById('level-complete-text-gasia').textContent = t('level-text-gasia');
  
  // Update fun fact modal
  dom.funfactTitle.textContent = t('funfact-title');
  dom.continueBtn.textContent = t('continue-btn');
  
  // Update unlock pages
  document.getElementById('solidia-unlock-title').textContent = t('solidia-unlock-title');
  document.getElementById('solidia-unlock-text').textContent = t('solidia-unlock-text');
  document.getElementById('liquida-unlock-title').textContent = t('liquida-unlock-title');
  document.getElementById('liquida-unlock-text').textContent = t('liquida-unlock-text');
  document.getElementById('gasia-unlock-title').textContent = t('gasia-unlock-title');
  document.getElementById('gasia-unlock-text').textContent = t('gasia-unlock-text');
  
  // Update score and streak labels
  updateKingdomStats('solidia');
  updateKingdomStats('liquida');
  updateKingdomStats('gasia');
  
  // Update boss labels
  dom.bossScore.textContent = `${t('score')}: 0`;
  dom.bossStreak.textContent = `${t('streak')}: 0`;
  
  // UPDATE CARD TITLES ON THE BOARD - THIS IS THE NEW FIX
  updateCardTitles();
}

function switchInstructionsLanguage(lang){
  // Only update instruction modal, NOT the game language
  document.querySelectorAll('#instructions-modal .lang-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.lang === lang);
  });
  
  // Save the temp language for instructions
  const tempLang = LANG;
  LANG = lang;
  
  // Update instruction text
  document.getElementById('instructions-title').textContent = t('instructions-title');
  document.getElementById('instructions-intro').textContent = t('instructions-intro');
  document.getElementById('instruction-1').textContent = t('instruction-1');
  document.getElementById('instruction-2').textContent = t('instruction-2');
  document.getElementById('instruction-3').textContent = t('instruction-3');
  document.getElementById('instruction-4').textContent = t('instruction-4');
  document.getElementById('instruction-5').textContent = t('instruction-5');
  document.getElementById('instruction-6').textContent = t('instruction-6');
  document.getElementById('instructions-outro').textContent = t('instructions-outro');
  document.getElementById('start-game-btn').textContent = t('start-game-btn');
  
  // Restore game language
  LANG = tempLang;
}

/* ========= NEW FUNCTION: UPDATE CARD TITLES ========= */
function updateCardTitles() {
  // Update cards for each kingdom if they exist on the page
  const kingdoms = ['solidia', 'liquida', 'gasia'];
  
  kingdoms.forEach(kingdom => {
    const cardElements = document.querySelectorAll(`#cards-${kingdom} .card`);
    if (cardElements.length > 0) {
      cardElements.forEach(cardEl => {
        const cardId = cardEl.dataset.cardId;
        // Find the card in our selectedCards array
        const card = selectedCards[kingdom].find(c => c.id === cardId);
        if (card) {
          // Update the title
          const titleEl = cardEl.querySelector('.card-title');
          if (titleEl) {
            titleEl.textContent = safeText(card.title);
          }
          
          // Update the subtitle (preview of the question)
          const subEl = cardEl.querySelector('.card-sub');
          if (subEl) {
            subEl.textContent = safeText(card.prompt).substring(0, 40) + '...';
          }
        }
      });
    }
  });
}

/* ========= START NEW GAME ========= */
function startNewGame(){
  // ALWAYS get fresh random questions
  selectedCards.solidia = pickRandomUnique(worldPools.solidia, CONFIG.perWorldPick);
  selectedCards.liquida = pickRandomUnique(worldPools.liquida, CONFIG.perWorldPick);
  selectedCards.gasia = pickRandomUnique(worldPools.gasia, CONFIG.perWorldPick);
  
  completedCards = { solidia: [], liquida: [], gasia: [] };
  score = { solidia: 0, liquida: 0, gasia: 0 };
  totalScore = 0;
  streak = { solidia: 0, liquida: 0, gasia: 0 };
  
  dom.instructionsModal.style.display = 'none';
  dom.resultModal.style.display = 'none';
  dom.questionModal.style.display = 'none';
  dom.funfactModal.style.display = 'none';
  
  showPage('solidia-unlock-page');
}

function showUnlockPage(kingdom){
  if(kingdom === 'liquida'){
    showPage('liquida-unlock-page');
  } else if(kingdom === 'gasia'){
    showPage('gasia-unlock-page');
  }
}

/* ========= START KINGDOM ========= */
function startKingdom(kingdom){
  currentKingdom = kingdom;
  timeLeft = CONFIG.sessionTime;
  
  renderKingdomCards(kingdom);
  updateKingdomStats(kingdom);
  
  showPage(`${kingdom}-page`);
  startTimer(kingdom);
}

function renderKingdomCards(kingdom){
  const container = kingdom === 'solidia' ? dom.cardsSolidia :
                   kingdom === 'liquida' ? dom.cardsLiquida :
                   dom.cardsGasia;
  
  container.innerHTML = '';
  
  selectedCards[kingdom].forEach(card => {
    const cardEl = document.createElement('div');
    cardEl.className = 'card';
    if(completedCards[kingdom].includes(card.id)){
      cardEl.classList.add('disabled');
    }
    cardEl.dataset.cardId = card.id;
    cardEl.innerHTML = `
      <div class="card-icon">${card.icon}</div>
      <div class="card-title">${safeText(card.title)}</div>
      <div class="card-sub">${safeText(card.prompt).substring(0, 40)}...</div>
    `;
    cardEl.addEventListener('click', ()=> openCard(kingdom, card.id));
    container.appendChild(cardEl);
  });
}

/* ========= CARD CLICK ========= */
function openCard(kingdom, cardId){
  if(completedCards[kingdom].includes(cardId)){
    showToast(safeText({en:'Already completed!', or:'рмкрнВрм░рнНрммрм░рнБ рм╕рморнНрмкрнВрм░рнНрмгрнНрмг!', hi:'рдкрд╣рд▓реЗ рд╕реЗ рдкреВрд░реНрдг!'}));
    return;
  }
  
  const card = selectedCards[kingdom].find(c => c.id === cardId);
  if(!card) return;
  
  currentCard = { kingdom, card };
  showQuestionModal(card);
}

/* ========= QUESTION MODAL ========= */
function showQuestionModal(card){
  dom.modalIcon.textContent = card.icon || 'ЁЯФм';
  dom.modalQuestion.textContent = safeText(card.prompt);
  dom.modalOptions.innerHTML = '';
  dom.modalHint.style.display = 'none';
  dom.modalHint.textContent = '';
  dom.modalContinue.style.display = 'none';
  
  if(card.type === 'tf' || card.type === 'mcq'){
    card.answers.forEach(ans => {
      const btn = document.createElement('button');
      btn.className = 'opt-btn';
      btn.textContent = safeText(ans.txt);
      btn.dataset.key = ans.k;
      btn.addEventListener('click', ()=> evaluateAnswer(ans));
      dom.modalOptions.appendChild(btn);
    });
  }
  
  if(card.hint){
    dom.modalHint.style.display = 'block';
    dom.modalHint.textContent = safeText(card.hint);
  }
  
  dom.questionModal.style.display = 'flex';
}

function evaluateAnswer(answer){
  const correct = answer.correct;
  const kingdom = currentCard.kingdom;
  const card = currentCard.card;
  
  if(correct){
    handleCorrectAnswer(kingdom, card);
  } else {
    handleWrongAnswer(kingdom);
  }
  
  Array.from(dom.modalOptions.children).forEach(btn => {
    btn.disabled = true;
    const isThisAnswer = btn.dataset.key === answer.k;
    if(isThisAnswer){
      btn.classList.add(correct ? 'correct' : 'wrong');
    }
  });
  
  dom.modalContinue.style.display = 'inline-block';
  dom.modalContinue.textContent = t('continue');
  
  if(correct){
    completedCards[kingdom].push(currentCard.card.id);
    const cardEl = document.querySelector(`.card[data-card-id="${currentCard.card.id}"]`);
    if(cardEl){
      cardEl.classList.add('disabled');
    }
    
    updateKingdomStats(kingdom);
    
    if(completedCards[kingdom].length >= selectedCards[kingdom].length){
      setTimeout(()=> {
        showLevelComplete(kingdom);
      }, 500);
    }
  }
}

function handleCorrectAnswer(kingdom, card){
  const basePoints = CONFIG.basePoints;
  const streakBonus = Math.min(streak[kingdom] * CONFIG.streakBonus, 20);
  const pointsEarned = basePoints + streakBonus;
  
  score[kingdom] += pointsEarned;
  totalScore += pointsEarned;
  streak[kingdom]++;
  
  // Show fun fact modal
  if(card.fun){
    dom.funfactText.textContent = safeText(card.fun);
    dom.funfactModal.style.display = 'flex';
  }
  
  showToast(safeText({en:`Correct! +${pointsEarned}`, or:`рмарм┐рмХрнН! +${pointsEarned}`, hi:`рд╕рд╣реА! +${pointsEarned}`}));
  createConfetti();
}

function handleWrongAnswer(kingdom){
  streak[kingdom] = 0;
  score[kingdom] = Math.max(0, score[kingdom] - 5);
  
  showToast(safeText({en:'Try again!', or:'рмкрнБрмгрм┐ рмЪрнЗрм╖рнНрмЯрм╛ рмХрм░рмирнНрмдрнБ!', hi:'рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ!'}));
}

/* ========= TIMER ========= */
function startTimer(kingdom){
  clearInterval(timerInterval);
  
  updateTimerDisplay(kingdom);
  
  timerInterval = setInterval(()=> {
    timeLeft--;
    updateTimerDisplay(kingdom);
    
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      showTimeUp(kingdom);
    }
  }, 1000);
}

function updateTimerDisplay(kingdom){
  const minutes = Math.floor(timeLeft / 60);
  const seconds = timeLeft % 60;
  const timeStr = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
  
  const timeEl = document.getElementById(`time${kingdom === 'solidia' ? '' : '-' + kingdom}`);
  if(timeEl) timeEl.textContent = timeStr;
}

function showTimeUp(kingdom){
  showToast(safeText({en:'Time\'s up!', or:'рм╕рморнЯ рм╕рм░рм┐рмЧрм▓рм╛!', hi:'рд╕рдордп рд╕рдорд╛рдкреНрдд!'}));
}

/* ========= LEVEL COMPLETE ========= */
function showLevelComplete(kingdom){
  const levelCompleteBox = document.getElementById(`level-complete-${kingdom}`);
  if(levelCompleteBox){
    levelCompleteBox.style.display = 'block';
  }
  
  const timeBonus = Math.floor(timeLeft / 10) * 5;
  if(timeBonus > 0){
    score[kingdom] += timeBonus;
    totalScore += timeBonus;
    updateKingdomStats(kingdom);
    showToast(safeText({en:`Time bonus! +${timeBonus}`, or:`рм╕рморнЯ рммрнЛрмирм╕! +${timeBonus}`, hi:`рд╕рдордп рдмреЛрдирд╕! +${timeBonus}`}));
  }
  
  clearInterval(timerInterval);
}

/* ========= FINAL BOSS ========= */
function startFinalBoss(){
  showPage('final-boss-page');
}

function startBossBattle(){
  const bossQuestions = pickRandomUnique(bossPool, CONFIG.bossQuestions);
  let currentQuestion = 0;
  let bossScore = 0;
  let bossStreak = 0;
  
  dom.bossQuestionsContainer.innerHTML = '';
  
  function showNextQuestion(){
    if(currentQuestion >= bossQuestions.length){
      // Boss battle complete
      showBossComplete();
      return;
    }
    
    const question = bossQuestions[currentQuestion];
    const questionEl = document.createElement('div');
    questionEl.className = 'instruction-card';
    questionEl.innerHTML = `
      <div class="instruction-icon">${question.icon}</div>
      <h4>Question ${currentQuestion + 1} of ${CONFIG.bossQuestions}</h4>
      <p>${safeText(question.prompt)}</p>
      <div class="options" style="margin-top: 15px;">
        ${question.answers.map((ans, idx) => `
          <button class="opt-btn boss-answer" data-correct="${ans.correct}" data-index="${idx}">
            ${safeText(ans.txt)}
          </button>
        `).join('')}
      </div>
    `;
    
    dom.bossQuestionsContainer.appendChild(questionEl);
    
    questionEl.querySelectorAll('.boss-answer').forEach(btn => {
      btn.addEventListener('click', function() {
        const isCorrect = this.dataset.correct === 'true';
        
        if(isCorrect){
          bossScore += 15;
          bossStreak++;
          this.classList.add('correct');
          showToast(safeText({en:'Correct! +15', or:'рмарм┐рмХрнН! +15', hi:'рд╕рд╣реА! +15'}));
          
          // Show fun fact if available
          if(question.fun){
            dom.funfactText.textContent = safeText(question.fun);
            dom.funfactModal.style.display = 'flex';
          }
        } else {
          bossStreak = 0;
          this.classList.add('wrong');
          showToast(safeText({en:'Wrong!', or:'рмнрнБрм▓рнН!', hi:'рдЧрд▓рдд!'}));
        }
        
        dom.bossScore.textContent = `${t('score')}: ${bossScore}`;
        dom.bossStreak.textContent = `${t('streak')}: ${bossStreak}`;
        
        questionEl.querySelectorAll('.boss-answer').forEach(b => {
          b.disabled = true;
          if(b.dataset.correct === 'true'){
            b.classList.add('correct');
          }
        });
        
        setTimeout(() => {
          questionEl.remove();
          currentQuestion++;
          showNextQuestion();
        }, 1500);
      });
    });
  }
  
  showNextQuestion();
}

function showBossComplete(){
  dom.bossQuestionsContainer.innerHTML = `
    <div class="instruction-card">
      <div class="instruction-icon">ЁЯПЖ</div>
      <h3>Boss Defeated!</h3>
      <p>Congratulations! You have successfully defeated Chaotron and saved all three kingdoms!</p>
      <p>Your final score: <strong>${totalScore}</strong></p>
      <div style="margin-top: 20px;">
        <button class="start-game-btn" id="play-again-boss">${t('play-again')}</button>
      </div>
    </div>
  `;
  
  document.getElementById('play-again-boss').addEventListener('click', startNewGame);
}

/* ========= UI HELPERS ========= */
function closeModal(){
  dom.questionModal.style.display = 'none';
}

function showToast(text){
  const toast = document.createElement('div');
  toast.style.position = 'fixed';
  toast.style.bottom = '20px';
  toast.style.left = '50%';
  toast.style.transform = 'translateX(-50%)';
  toast.style.background = 'rgba(0,0,0,0.8)';
  toast.style.color = 'white';
  toast.style.padding = '12px 24px';
  toast.style.borderRadius = '8px';
  toast.style.fontWeight = '600';
  toast.style.zIndex = '3000';
  toast.style.textAlign = 'center';
  toast.style.maxWidth = '80%';
  toast.textContent = text;
  
  document.body.appendChild(toast);
  
  setTimeout(()=> {
    if(toast.parentNode){
      toast.parentNode.removeChild(toast);
    }
  }, 3000);
}

function createConfetti(){
  const colors = ['#ff6b6b','#4ecdc4','#45b7d1','#96ceb4','#ffeaa7','#ffd166'];
  for(let i=0;i<12;i++){
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = '-10px';
    confetti.style.width = '10px';
    confetti.style.height = '10px';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.zIndex = '2000';
    confetti.style.borderRadius = '2px';
    confetti.style.animation = 'confetti-fall 2s ease-out forwards';
    
    document.body.appendChild(confetti);
    
    setTimeout(()=> {
      if(confetti.parentNode){
        confetti.parentNode.removeChild(confetti);
      }
    }, 2000);
  }
}

// Add confetti animation
const style = document.createElement('style');
style.textContent = `
@keyframes confetti-fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}
`;
document.head.appendChild(style);

/* ========= KEYBOARD SHORTCUTS ========= */
document.addEventListener('keydown', (e)=> {
  if(e.key === 'Escape'){
    closeModal();
    dom.resultModal.style.display = 'none';
    dom.funfactModal.style.display = 'none';
  }
  if(e.key === '1') switchLanguage('en');
  if(e.key === '2') switchLanguage('or');
  if(e.key === '3') switchLanguage('hi');
});
</script>
</body>
</html>